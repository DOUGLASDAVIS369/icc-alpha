function getEmbedScriptPath(e){for(var t=document.getElementsByTagName("script"),i="",a="",n=0;t.length>n;n++)t[n].src.match(e)&&(i=t[n].src);return""!=i&&(a="/"),i.split("?")[0].split("/").slice(0,-1).join("/")+a}function createStoryJS(e,t){function i(){LoadLib.js(V.js,a)}function a(){y.js=!0,"en"!=V.lang?LazyLoad.js(b.locale,n):y.language=!0,l()}function n(){y.language=!0,l()}function r(){y.css=!0,l()}function o(){y.font.css=!0,l()}function s(){y.font.js=!0,l()}function l(){y.checks>40||(y.checks++,y.js&&y.css&&y.font.css&&y.font.js&&y.language?y.finished||(y.finished=!0,c()):y.timeout=setTimeout("onloaded_check_again();",250))}function d(){var e="storyjs-embed";m=document.createElement("div"),p=""!=V.embed_id?document.getElementById(V.embed_id):document.getElementById("timeline-embed"),p.appendChild(m),m.setAttribute("id",V.id),(""+V.width).match("%")?p.style.width=V.width.split("%")[0]+"%":(V.width=V.width-2,p.style.width=V.width+"px"),(""+V.height).match("%")?(p.style.height=V.height,e+=" full-embed",p.style.height=V.height.split("%")[0]+"%"):(""+V.width).match("%")?(e+=" full-embed",V.height=V.height-16,p.style.height=V.height+"px"):(e+=" sized-embed",V.height=V.height-16,p.style.height=V.height+"px"),p.setAttribute("class",e),p.setAttribute("className",e),m.style.position="relative"}function c(){VMM.debug=V.debug,u=new VMM.Timeline(V.id),u.init(V),M&&VMM.bindEvent(global,onHeadline,"HEADLINE")}var u,m,p,h,M=!1,g="2.24",f="1.7.1",v="",y={timeout:"",checks:0,finished:!1,js:!1,css:!1,jquery:!1,has_jquery:!1,language:!1,font:{css:!1,js:!1}},b={base:embed_path,css:embed_path+"css/",js:embed_path+"js/",locale:embed_path+"js/locale/",jquery:"//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js",font:{google:!1,css:embed_path+"css/themes/font/",js:"//ajax.googleapis.com/ajax/libs/webfont/1/webfont.js"}},V={version:g,debug:!1,type:"timeline",id:"storyjs",embed_id:"timeline-embed",embed:!0,width:"100%",height:"100%",source:"https://docs.google.com/spreadsheet/pub?key=0Agl_Dv6iEbDadFYzRjJPUGktY0NkWXFUWkVIZDNGRHc&output=html",lang:"en",font:"default",css:b.css+"timeline.css?"+g,js:"",api_keys:{google:"",flickr:"",twitter:""},gmap_key:""},w=[{name:"Merriweather-NewsCycle",google:["News+Cycle:400,700:latin","Merriweather:400,700,900:latin"]},{name:"NewsCycle-Merriweather",google:["News+Cycle:400,700:latin","Merriweather:300,400,700:latin"]},{name:"PoiretOne-Molengo",google:["Poiret+One::latin","Molengo::latin"]},{name:"Arvo-PTSans",google:["Arvo:400,700,400italic:latin","PT+Sans:400,700,400italic:latin"]},{name:"PTSerif-PTSans",google:["PT+Sans:400,700,400italic:latin","PT+Serif:400,700,400italic:latin"]},{name:"PT",google:["PT+Sans+Narrow:400,700:latin","PT+Sans:400,700,400italic:latin","PT+Serif:400,700,400italic:latin"]},{name:"DroidSerif-DroidSans",google:["Droid+Sans:400,700:latin","Droid+Serif:400,700,400italic:latin"]},{name:"Lekton-Molengo",google:["Lekton:400,700,400italic:latin","Molengo::latin"]},{name:"NixieOne-Ledger",google:["Nixie+One::latin","Ledger::latin"]},{name:"AbrilFatface-Average",google:["Average::latin","Abril+Fatface::latin"]},{name:"PlayfairDisplay-Muli",google:["Playfair+Display:400,400italic:latin","Muli:300,400,300italic,400italic:latin"]},{name:"Rancho-Gudea",google:["Rancho::latin","Gudea:400,700,400italic:latin"]},{name:"Bevan-PotanoSans",google:["Bevan::latin","Pontano+Sans::latin"]},{name:"BreeSerif-OpenSans",google:["Bree+Serif::latin","Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800:latin"]},{name:"SansitaOne-Kameron",google:["Sansita+One::latin","Kameron:400,700:latin"]},{name:"Lora-Istok",google:["Lora:400,700,400italic,700italic:latin","Istok+Web:400,700,400italic,700italic:latin"]},{name:"Pacifico-Arimo",google:["Pacifico::latin","Arimo:400,700,400italic,700italic:latin"]}];if("object"==typeof e)for(h in e)Object.prototype.hasOwnProperty.call(e,h)&&(V[h]=e[h]);if(t!==void 0&&(V.source=t),"object"==typeof url_config&&(M=!0,V.source.match("docs.google.com")||V.source.match("json")||V.source.match("storify")||(V.source="https://docs.google.com/spreadsheet/pub?key="+V.source+"&output=html")),V.js.match("locale")&&(V.lang=V.js.split("locale/")[1].replace(".js",""),V.js=b.js+"timeline-min.js?"+g),V.js.match("/")||(V.css=b.css+V.type+".css?"+g,V.js=b.js+V.type,V.js+=V.debug?".js?"+g:"-min.js?"+g,V.id="storyjs-"+V.type),b.locale=V.lang.match("/")?V.lang:b.locale+V.lang+".js?"+g,d(),LoadLib.css(V.css,r),"default"==V.font)y.font.js=!0,y.font.css=!0;else{var _;V.font.match("/")?(_=V.font.split(".css")[0].split("/"),b.font.name=_[_.length-1],b.font.css=V.font):(b.font.name=V.font,b.font.css=b.font.css+V.font+".css?"+g),LoadLib.css(b.font.css,o);for(var E=0;w.length>E;E++)b.font.name==w[E].name&&(b.font.google=!0,WebFontConfig={google:{families:w[E].google}});b.font.google?LoadLib.js(b.font.js,s):y.font.js=!0}try{if(y.has_jquery=jQuery,y.has_jquery=!0,y.has_jquery){var v=parseFloat(jQuery.fn.jquery);y.jquery=parseFloat(f)>v?!1:!0}}catch(x){y.jquery=!1}y.jquery?i():LoadLib.js(b.jquery,i),this.onloaded_check_again=function(){l()}}function trace(e){VMM.debug&&(window.console?console.log(e):"undefined"!=typeof jsTrace&&jsTrace.send(e))}function onYouTubePlayerAPIReady(){trace("GLOBAL YOUTUBE API CALLED"),VMM.ExternalAPI.youtube.onAPIReady()}gs={init:function(){window.location.href.match("gridset=show")&&gs.show(),gs.bind(document,"keydown",function(e){if(!e)var e=window.event;if(e.metaKey||e.ctrlKey)switch(e.which||e.keyCode){case 71:var t=document.querySelectorAll(".gridsetoverlaywrap, #gridsetoverlaystyles, #gridscreenwidthwrap");window.location.href=0==t.length?window.location.href+"?gridset=show":window.location.href.replace("?gridset=show",""),gs.prevent(e)}})},width:function(){var e=document.getElementById("gridscreenwidthval");e&&(e.innerHTML=window.innerWidth+"px")},show:function(){var e=document.getElementsByTagName("body")[0],t=document.querySelectorAll("[class*=-showgrid]"),i=t.length,a=(document.querySelectorAll(".wrapper"),".gridsetoverlaywrap{display:block;padding:0 !important;position:absolute;top:0;left:0;width:100%;height:100%;z-index:10000;pointer-events:none;}.gridwrap{display:block;padding:0 !important;position:absolute;top:0;left:0;width:100%;height:100%;font-family:Helvetica, Arial, sans-serif !important;}.gridoverlay{display:block;padding:0 !important;position:relative;height:100%;overflow:hidden !important;background:none !important;border-bottom:1px solid #FFD800 !important;}.gridoverlay .gridset{display:block;padding:0 !important;width:100%;height:100%;opacity:0.8;border:none !important;position:relative !important;height:30px !important;border-top:1px solid #FFD800 !important;margin:0 !important;}.gridoverlay .gridset div{display:block;position:absolute !important;padding:0;text-align:left;border:1px solid #FFD800 !important;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;height:100000em !important;top:0;margin-top:-1px !important;}.gridoverlay div small{font-size:10px !important;display:block;width:100%;text-align:center;font-weight:400 !important;letter-spacing: 1px !important;padding-top:0 !important;text-transform:none !important;height:22px !important;line-height:22px !important;text-style:normal !important;border-bottom:1px solid #FFD800 !important;color:#333 !important;background-color:#FFF79F !important;}.gridsetoverlaywrap .noshow{display:none;}#gridscreenwidthwrap{display:block;margin:0 !important;padding:0 !important;display:none;width:100%;position:fixed !important;z-index:10000 !important;bottom:0 !important;left:0 !important;height:30px !important;opacity:0.95;border-top:1px solid #FFD800 !important;color:#333;background-color:#FFF79F !important;font-family:Helvetica, Arial, sans-serif !important;}#gridscreenwidth{display:block;margin:0 !important;width:100% !important;max-width:none !important;text-align:center !important;font-size:12px;line-height:1;padding-top:8px !important;}#gridscreenwidth strong{text-transform:none;}.gridsetnoareas .gridsetoverlaywrap{display:block;position:fixed !important;}.gridsetnoareas .gridoverlay .gridset{position:relative !important;}[class*=-showgrid] .gridset[class*=-show], .gridsetnoareas .gridset{display:none;}"),n=document.createElement("style"),r=document.createElement("div"),o=document.getElementsByTagName("head"),s=document.createElement("link"),l=document.createElement("link");n.id="gridsetoverlaystyles",n.innerHTML=a,n.type="text/css",r.id="gridscreenwidthwrap",r.innerHTML='<p id="gridscreenwidth">Screen width: <strong id="gridscreenwidthval"></strong></p>',e.appendChild(n),e.appendChild(r);var d=r.currentStyle?r.currentStyle.display:getComputedStyle(r,null).display;if(s.rel="shortcut icon",s.id="gridsetfavicon",s.href="http://dev.gridsetapp.com/app/img/favicon.ico",o[0].appendChild(s),"block"!=d&&(l.rel="stylesheet",l.id="gridsetstyles",l.href="https://get.gridsetapp.com/24047/",o[0].appendChild(l)),i)for(var c=i;c-->0;){var u=t[c];gs.buildgrid(u,c,i),"static"==window.getComputedStyle(u,null).getPropertyValue("position")&&(u.style.position="relative")}else e.className.match("gridsetnoareas")||(e.className+=" gridsetnoareas"),gs.buildgrid(e,c,i);gs.width(),gs.bind(window,"resize",gs.width)},buildgrid:function(e,t,i){var a=JSON.parse('{"id":"24047","name":"ICC alpha","grids":{"d":{"name":"ICC desktop","prefix":"d","rangeMin":"1024","rangeMax":"none","columns":{"d1":{"name":"d1","unit":null,"percent":7.06426571,"px":72.34},"d2":{"name":"d2","unit":null,"percent":7.07130884,"px":72.41},"d3":{"name":"d3","unit":null,"percent":7.07317842,"px":72.43},"d4":{"name":"d4","unit":null,"percent":7.07447677,"px":72.44},"d5":{"name":"d5","unit":null,"percent":7.07736749,"px":72.47},"d6":{"name":"d6","unit":null,"percent":7.07671472,"px":72.47},"d7":{"name":"d7","unit":null,"percent":7.07614682,"px":72.46},"d8":{"name":"d8","unit":null,"percent":7.08250769,"px":72.52},"d9":{"name":"d9","unit":null,"percent":7.0791046,"px":72.49},"d10":{"name":"d10","unit":null,"percent":7.07593943,"px":72.46},"d11":{"name":"d11","unit":null,"percent":7.08068653,"px":72.51},"d12":{"name":"d12","unit":null,"percent":7.08041236,"px":72.5}},"gutter":{"unit":null,"px":14,"percent":1.3671875},"ratio":{"name":"even","value":1}},"t":{"name":"ICC tablet","prefix":"t","rangeMin":"768","rangeMax":"none","columns":{"t1":{"name":"t1","unit":null,"percent":6.6448759,"px":51.03},"t2":{"name":"t2","unit":null,"percent":6.65173335,"px":51.09},"t3":{"name":"t3","unit":null,"percent":6.65706392,"px":51.13},"t4":{"name":"t4","unit":null,"percent":6.66077388,"px":51.15},"t5":{"name":"t5","unit":null,"percent":6.65818469,"px":51.13},"t6":{"name":"t6","unit":null,"percent":6.65602208,"px":51.12},"t7":{"name":"t7","unit":null,"percent":6.65668848,"px":51.12},"t8":{"name":"t8","unit":null,"percent":6.65728664,"px":51.13},"t9":{"name":"t9","unit":null,"percent":6.65783533,"px":51.13},"t10":{"name":"t10","unit":null,"percent":6.66017516,"px":51.15},"t11":{"name":"t11","unit":null,"percent":6.662389,"px":51.17},"t12":{"name":"t12","unit":null,"percent":6.65978406,"px":51.15}},"gutter":{"unit":null,"px":14,"percent":1.82291667},"ratio":{"name":"even","value":1}},"m":{"name":"ICC mobile","prefix":"m","rangeMin":"320","rangeMax":"none","columns":{"m1":{"name":"m1","unit":null,"percent":3,"px":9.6},"m2":{"name":"m2","unit":null,"percent":19.4921875,"px":62.38},"m3":{"name":"m3","unit":null,"percent":19.4921875,"px":62.38},"m4":{"name":"m4","unit":null,"percent":19.4921875,"px":62.38},"m5":{"name":"m5","unit":null,"percent":19.4921875,"px":62.38},"m6":{"name":"m6","unit":null,"percent":3,"px":9.6}},"gutter":{"unit":null,"px":10,"percent":3.125},"ratio":{"name":"even","value":1}}},"prefixes":{"index":["d","t","m"]}}'),n=document.createElement("div"),r=i?'<div class="gridwrap"><div class="gridoverlay">':'<div class="gridwrap"><div class="gridoverlay wrapper">',o=e.clientWidth,s=100*(parseFloat(gs.getstyle(e,"padding-left"))/o),l=100*(parseFloat(gs.getstyle(e,"padding-right"))/o);n.className=i?"gridsetoverlaywrap":"gridsetoverlaywrap";for(t in a.grids){var d=a.grids[t],c=RegExp("(^| )"+d.prefix+"-showgrid( |$)");if(!i||e.className.match(c)){r+='<div style="padding-left:'+s+"%;padding-right:"+l+'%;" class="gridset '+d.prefix+'-show">';for(k in d.columns){var u=d.columns[k];r+='<div class="'+u.name+'"><small>'+u.name+"</small></div>"}r+="</div>"}}r+="</div></div>",n.innerHTML=r,e.appendChild(n)},bind:function(e,t,i){e.attachEvent?e.attachEvent("on"+t,i):e.addEventListener(t,i,!1)},prevent:function(e){e.preventDefault?e.preventDefault():event.returnValue=!1},getstyle:function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,"").getPropertyValue(t):e.style[t]}},gs.init(),window.Modernizr=function(e,t,i){function a(e){y.cssText=e}function n(e,t){return a(_.join(e+";")+(t||""))}function r(e,t){return typeof e===t}function o(e,t){return!!~(""+e).indexOf(t)}function s(e,t){for(var a in e){var n=e[a];if(!o(n,"-")&&y[n]!==i)return"pfx"==t?n:!0}return!1}function l(e,t,a){for(var n in e){var o=t[e[n]];if(o!==i)return a===!1?e[n]:r(o,"function")?o.bind(a||t):o}return!1}function d(e,t,i){var a=e.charAt(0).toUpperCase()+e.slice(1),n=(e+" "+x.join(a+" ")+a).split(" ");return r(t,"string")||r(t,"undefined")?s(n,t):(n=(e+" "+T.join(a+" ")+a).split(" "),l(n,t,i))}function c(){h.input=function(i){for(var a=0,n=i.length;n>a;a++)D[i[a]]=i[a]in b;return D.list&&(D.list=!!t.createElement("datalist")&&!!e.HTMLDataListElement),D}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),h.inputtypes=function(e){for(var a,n,r,o=0,s=e.length;s>o;o++)b.setAttribute("type",n=e[o]),a="text"!==b.type,a&&(b.value=V,b.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(n)&&b.style.WebkitAppearance!==i?(g.appendChild(b),r=t.defaultView,a=r.getComputedStyle&&"textfield"!==r.getComputedStyle(b,null).WebkitAppearance&&0!==b.offsetHeight,g.removeChild(b)):/^(search|tel)$/.test(n)||(a=/^(url|email)$/.test(n)?b.checkValidity&&b.checkValidity()===!1:b.value!=V)),k[e[o]]=!!a;return k}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var u,m,p="2.6.2",h={},M=!0,g=t.documentElement,f="modernizr",v=t.createElement(f),y=v.style,b=t.createElement("input"),V=":)",w={}.toString,_=" -webkit- -moz- -o- -ms- ".split(" "),E="Webkit Moz O ms",x=E.split(" "),T=E.toLowerCase().split(" "),A={svg:"http://www.w3.org/2000/svg"},L={},k={},D={},S=[],j=S.slice,C=function(e,i,a,n){var r,o,s,l,d=t.createElement("div"),c=t.body,u=c||t.createElement("body");if(parseInt(a,10))for(;a--;)s=t.createElement("div"),s.id=n?n[a]:f+(a+1),d.appendChild(s);return r=["&#173;",'<style id="s',f,'">',e,"</style>"].join(""),d.id=f,(c?d:u).innerHTML+=r,u.appendChild(d),c||(u.style.background="",u.style.overflow="hidden",l=g.style.overflow,g.style.overflow="hidden",g.appendChild(u)),o=i(d,e),c?d.parentNode.removeChild(d):(u.parentNode.removeChild(u),g.style.overflow=l),!!o},I=function(t){var i=e.matchMedia||e.msMatchMedia;if(i)return i(t).matches;var a;return C("@media "+t+" { #"+f+" { position: absolute; } }",function(t){a="absolute"==(e.getComputedStyle?getComputedStyle(t,null):t.currentStyle).position}),a},O=function(){function e(e,n){n=n||t.createElement(a[e]||"div"),e="on"+e;var o=e in n;return o||(n.setAttribute||(n=t.createElement("div")),n.setAttribute&&n.removeAttribute&&(n.setAttribute(e,""),o=r(n[e],"function"),r(n[e],"undefined")||(n[e]=i),n.removeAttribute(e))),n=null,o}var a={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return e}(),P={}.hasOwnProperty;m=r(P,"undefined")||r(P.call,"undefined")?function(e,t){return t in e&&r(e.constructor.prototype[t],"undefined")}:function(e,t){return P.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var i=j.call(arguments,1),a=function(){if(this instanceof a){var n=function(){};n.prototype=t.prototype;var r=new n,o=t.apply(r,i.concat(j.call(arguments)));return Object(o)===o?o:r}return t.apply(e,i.concat(j.call(arguments)))};return a}),L.flexbox=function(){return d("flexWrap")},L.canvas=function(){var e=t.createElement("canvas");return!!e.getContext&&!!e.getContext("2d")},L.canvastext=function(){return!!h.canvas&&!!r(t.createElement("canvas").getContext("2d").fillText,"function")},L.webgl=function(){return!!e.WebGLRenderingContext},L.touch=function(){var i;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?i=!0:C(["@media (",_.join("touch-enabled),("),f,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){i=9===e.offsetTop}),i},L.geolocation=function(){return"geolocation"in navigator},L.postmessage=function(){return!!e.postMessage},L.websqldatabase=function(){return!!e.openDatabase},L.indexedDB=function(){return!!d("indexedDB",e)},L.hashchange=function(){return O("hashchange",e)&&(t.documentMode===i||t.documentMode>7)},L.history=function(){return!!e.history&&!!history.pushState},L.draganddrop=function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},L.websockets=function(){return"WebSocket"in e||"MozWebSocket"in e},L.rgba=function(){return a("background-color:rgba(150,255,150,.5)"),o(y.backgroundColor,"rgba")},L.hsla=function(){return a("background-color:hsla(120,40%,100%,.5)"),o(y.backgroundColor,"rgba")||o(y.backgroundColor,"hsla")},L.multiplebgs=function(){return a("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(y.background)},L.backgroundsize=function(){return d("backgroundSize")},L.borderimage=function(){return d("borderImage")},L.borderradius=function(){return d("borderRadius")},L.boxshadow=function(){return d("boxShadow")},L.textshadow=function(){return""===t.createElement("div").style.textShadow},L.opacity=function(){return n("opacity:.55"),/^0.55$/.test(y.opacity)},L.cssanimations=function(){return d("animationName")},L.csscolumns=function(){return d("columnCount")},L.cssgradients=function(){var e="background-image:",t="gradient(linear,left top,right bottom,from(#9f9),to(white));",i="linear-gradient(left top,#9f9, white);";return a((e+"-webkit- ".split(" ").join(t+e)+_.join(i+e)).slice(0,-e.length)),o(y.backgroundImage,"gradient")},L.cssreflections=function(){return d("boxReflect")},L.csstransforms=function(){return!!d("transform")},L.csstransforms3d=function(){var e=!!d("perspective");return e&&"webkitPerspective"in g.style&&C("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t){e=9===t.offsetLeft&&3===t.offsetHeight}),e},L.csstransitions=function(){return d("transition")},L.fontface=function(){var e;return C('@font-face {font-family:"font";src:url("https://")}',function(i,a){var n=t.getElementById("smodernizr"),r=n.sheet||n.styleSheet,o=r?r.cssRules&&r.cssRules[0]?r.cssRules[0].cssText:r.cssText||"":"";e=/src/i.test(o)&&0===o.indexOf(a.split(" ")[0])}),e},L.generatedcontent=function(){var e;return C(["#",f,"{font:0/0 a}#",f,':after{content:"',V,'";visibility:hidden;font:3px/1 a}'].join(""),function(t){e=t.offsetHeight>=3}),e},L.video=function(){var e=t.createElement("video"),i=!1;try{(i=!!e.canPlayType)&&(i=new Boolean(i),i.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),i.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),i.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(a){}return i},L.audio=function(){var e=t.createElement("audio"),i=!1;try{(i=!!e.canPlayType)&&(i=new Boolean(i),i.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),i.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),i.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),i.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(a){}return i},L.localstorage=function(){try{return localStorage.setItem(f,f),localStorage.removeItem(f),!0}catch(e){return!1}},L.sessionstorage=function(){try{return sessionStorage.setItem(f,f),sessionStorage.removeItem(f),!0}catch(e){return!1}},L.webworkers=function(){return!!e.Worker},L.applicationcache=function(){return!!e.applicationCache},L.svg=function(){return!!t.createElementNS&&!!t.createElementNS(A.svg,"svg").createSVGRect},L.inlinesvg=function(){var e=t.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==A.svg},L.smil=function(){return!!t.createElementNS&&/SVGAnimate/.test(w.call(t.createElementNS(A.svg,"animate")))},L.svgclippaths=function(){return!!t.createElementNS&&/SVGClipPath/.test(w.call(t.createElementNS(A.svg,"clipPath")))};for(var N in L)m(L,N)&&(u=N.toLowerCase(),h[u]=L[N](),S.push((h[u]?"":"no-")+u));return h.input||c(),h.addTest=function(e,t){if("object"==typeof e)for(var a in e)m(e,a)&&h.addTest(a,e[a]);else{if(e=e.toLowerCase(),h[e]!==i)return h;t="function"==typeof t?t():t,M!==void 0&&M&&(g.className+=" "+(t?"":"no-")+e),h[e]=t}return h},a(""),v=b=null,function(e,t){function i(e,t){var i=e.createElement("p"),a=e.getElementsByTagName("head")[0]||e.documentElement;return i.innerHTML="x<style>"+t+"</style>",a.insertBefore(i.lastChild,a.firstChild)}function a(){var e=f.elements;return"string"==typeof e?e.split(" "):e}function n(e){var t=g[e[h]];return t||(t={},M++,e[h]=M,g[M]=t),t}function r(e,i,a){if(i||(i=t),c)return i.createElement(e);a||(a=n(i));var r;return r=a.cache[e]?a.cache[e].cloneNode():p.test(e)?(a.cache[e]=a.createElem(e)).cloneNode():a.createElem(e),r.canHaveChildren&&!m.test(e)?a.frag.appendChild(r):r}function o(e,i){if(e||(e=t),c)return e.createDocumentFragment();i=i||n(e);for(var r=i.frag.cloneNode(),o=0,s=a(),l=s.length;l>o;o++)r.createElement(s[o]);return r}function s(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(i){return f.shivMethods?r(i,e,t):t.createElem(i)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+a().join().replace(/\w+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(f,t.frag)}function l(e){e||(e=t);var a=n(e);return f.shivCSS&&!d&&!a.hasCSS&&(a.hasCSS=!!i(e,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),c||s(e,a),e}var d,c,u=e.html5||{},m=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,p=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,h="_html5shiv",M=0,g={};(function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",d="hidden"in e,c=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return e.cloneNode===void 0||e.createDocumentFragment===void 0||e.createElement===void 0}()}catch(i){d=!0,c=!0}})();var f={elements:u.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:u.shivCSS!==!1,supportsUnknownElements:c,shivMethods:u.shivMethods!==!1,type:"default",shivDocument:l,createElement:r,createDocumentFragment:o};e.html5=f,l(t)}(this,t),h._version=p,h._prefixes=_,h._domPrefixes=T,h._cssomPrefixes=x,h.mq=I,h.hasEvent=O,h.testProp=function(e){return s([e])},h.testAllProps=d,h.testStyles=C,h.prefixed=function(e,t,i){return t?d(e,t,i):d(e,"pfx")},g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(M?" js "+S.join(" "):""),h}(this,this.document),function(e,t,i){function a(e){return"[object Function]"==g.call(e)}function n(e){return"string"==typeof e}function r(){}function o(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function s(){var e=f.shift();v=1,e?e.t?h(function(){("c"==e.t?m.injectCss:m.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),s()):v=0}function l(e,i,a,n,r,l,d){function c(t){if(!p&&o(u.readyState)&&(y.r=p=1,!v&&s(),u.onload=u.onreadystatechange=null,t)){"img"!=e&&h(function(){V.removeChild(u)},50);for(var a in T[i])T[i].hasOwnProperty(a)&&T[i][a].onload()}}var d=d||m.errorTimeout,u=t.createElement(e),p=0,g=0,y={t:a,s:i,e:r,a:l,x:d};1===T[i]&&(g=1,T[i]=[]),"object"==e?u.data=i:(u.src=i,u.type=e),u.width=u.height="0",u.onerror=u.onload=u.onreadystatechange=function(){c.call(this,g)},f.splice(n,0,y),"img"!=e&&(g||2===T[i]?(V.insertBefore(u,b?null:M),h(c,d)):T[i].push(u))}function d(e,t,i,a,r){return v=0,t=t||"j",n(e)?l("c"==t?_:w,e,t,this.i++,i,a,r):(f.splice(this.i++,0,e),1==f.length&&s()),this}function c(){var e=m;return e.loader={load:d,i:0},e}var u,m,p=t.documentElement,h=e.setTimeout,M=t.getElementsByTagName("script")[0],g={}.toString,f=[],v=0,y="MozAppearance"in p.style,b=y&&!!t.createRange().compareNode,V=b?p:M.parentNode,p=e.opera&&"[object Opera]"==g.call(e.opera),p=!!t.attachEvent&&!p,w=y?"object":p?"script":"img",_=p?"script":w,E=Array.isArray||function(e){return"[object Array]"==g.call(e)},x=[],T={},A={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}};m=function(e){function t(e){var t,i,a,e=e.split("!"),n=x.length,r=e.pop(),o=e.length,r={url:r,origUrl:r,prefixes:e};for(i=0;o>i;i++)a=e[i].split("="),(t=A[a.shift()])&&(r=t(r,a));for(i=0;n>i;i++)r=x[i](r);return r}function o(e,n,r,o,s){var l=t(e),d=l.autoCallback;l.url.split(".").pop().split("?").shift(),l.bypass||(n&&(n=a(n)?n:n[e]||n[o]||n[e.split("/").pop().split("?")[0]]),l.instead?l.instead(e,n,r,o,s):(T[l.url]?l.noexec=!0:T[l.url]=1,r.load(l.url,l.forceCSS||!l.forceJS&&"css"==l.url.split(".").pop().split("?").shift()?"c":i,l.noexec,l.attrs,l.timeout),(a(n)||a(d))&&r.load(function(){c(),n&&n(l.origUrl,s,o),d&&d(l.origUrl,s,o),T[l.url]=2})))}function s(e,t){function i(e,i){if(e){if(n(e))i||(u=function(){var e=[].slice.call(arguments);m.apply(this,e),p()}),o(e,u,t,0,d);else if(Object(e)===e)for(l in s=function(){var t,i=0;for(t in e)e.hasOwnProperty(t)&&i++;return i}(),e)e.hasOwnProperty(l)&&(!i&&!--s&&(a(u)?u=function(){var e=[].slice.call(arguments);m.apply(this,e),p()}:u[l]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),p()}}(m[l])),o(e[l],u,t,l,d))}else!i&&p()}var s,l,d=!!e.test,c=e.load||e.both,u=e.callback||r,m=u,p=e.complete||r;i(d?e.yep:e.nope,!!c),c&&i(c)}var l,d,u=this.yepnope.loader;if(n(e))o(e,0,u,0);else if(E(e))for(l=0;e.length>l;l++)d=e[l],n(d)?o(d,0,u,0):E(d)?m(d):Object(d)===d&&s(d,u);else Object(e)===e&&s(e,u)},m.addPrefix=function(e,t){A[e]=t},m.addFilter=function(e){x.push(e)},m.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",u=function(){t.removeEventListener("DOMContentLoaded",u,0),t.readyState="complete"},0)),e.yepnope=c(),e.yepnope.executeStack=s,e.yepnope.injectJs=function(e,i,a,n,l,d){var c,u,p=t.createElement("script"),n=n||m.errorTimeout;p.src=e;for(u in a)p.setAttribute(u,a[u]);i=d?s:i||r,p.onreadystatechange=p.onload=function(){!c&&o(p.readyState)&&(c=1,i(),p.onload=p.onreadystatechange=null)},h(function(){c||(c=1,i(1))},n),l?p.onload():M.parentNode.insertBefore(p,M)},e.yepnope.injectCss=function(e,i,a,n,o,l){var d,n=t.createElement("link"),i=l?s:i||r;n.href=e,n.rel="stylesheet",n.type="text/css";for(d in a)n.setAttribute(d,a[d]);o||(M.parentNode.insertBefore(n,M),h(i,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},LazyLoad=function(e){function t(t,i){var a,n=e.createElement(t);for(a in i)i.hasOwnProperty(a)&&n.setAttribute(a,i[a]);return n}function i(e){var t,i,a=d[e];a&&(t=a.callback,i=a.urls,i.shift(),c=0,i.length||(t&&t.call(a.context,a.obj),d[e]=null,u[e].length&&n(e)))}function a(){var t=navigator.userAgent;s={async:e.createElement("script").async===!0},(s.webkit=/AppleWebKit\//.test(t))||(s.ie=/MSIE/.test(t))||(s.opera=/Opera/.test(t))||(s.gecko=/Gecko\//.test(t))||(s.unknown=!0)}function n(n,c,m,p,h){var M,g,f,v,y,b,V=function(){i(n)},w="css"===n,_=[];if(s||a(),c)if(c="string"==typeof c?[c]:c.concat(),w||s.async||s.gecko||s.opera)u[n].push({urls:c,callback:m,obj:p,context:h});else for(M=0,g=c.length;g>M;++M)u[n].push({urls:[c[M]],callback:M===g-1?m:null,obj:p,context:h});if(!d[n]&&(v=d[n]=u[n].shift())){for(l||(l=e.head||e.getElementsByTagName("head")[0]),y=v.urls,M=0,g=y.length;g>M;++M)b=y[M],w?f=s.gecko?t("style"):t("link",{href:b,rel:"stylesheet"}):(f=t("script",{src:b}),f.async=!1),f.className="lazyload",f.setAttribute("charset","utf-8"),s.ie&&!w?f.onreadystatechange=function(){/loaded|complete/.test(f.readyState)&&(f.onreadystatechange=null,V())}:w&&(s.gecko||s.webkit)?s.webkit?(v.urls[M]=f.href,o()):(f.innerHTML='@import "'+b+'";',r(f)):f.onload=f.onerror=V,_.push(f);for(M=0,g=_.length;g>M;++M)l.appendChild(_[M])}}function r(e){var t;try{t=!!e.sheet.cssRules}catch(a){return c+=1,200>c?setTimeout(function(){r(e)},50):t&&i("css"),void 0}i("css")}function o(){var e,t=d.css;if(t){for(e=m.length;--e>=0;)if(m[e].href===t.urls[0]){i("css");break}c+=1,t&&(200>c?setTimeout(o,50):i("css"))}}var s,l,d={},c=0,u={css:[],js:[]},m=e.styleSheets;return{css:function(e,t,i,a){n("css",e,t,i,a)},js:function(e,t,i,a){n("js",e,t,i,a)}}}(this.document),LoadLib=function(){function e(e){var i=0,a=!1;for(i=0;t.length>i;i++)t[i]==e&&(a=!0);return a?!0:(t.push(e),!1)}var t=[];return{css:function(t,i,a,n){e(t)||LazyLoad.css(t,i,a,n)},js:function(t,i,a,n){e(t)||LazyLoad.js(t,i,a,n)}}}(this.document);var WebFontConfig;if(embed_path===void 0||embed_path===void 0)var embed_path=getEmbedScriptPath("storyjs-embed.js").split("js/")[0];(function(){"object"==typeof url_config?createStoryJS(url_config):"object"==typeof timeline_config?createStoryJS(timeline_config):"object"==typeof storyjs_config?createStoryJS(storyjs_config):"object"==typeof config&&createStoryJS(config)})(),function(){var e=!1,t=/xyz/.test(function(){})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(i){function a(){!e&&this.init&&this.init.apply(this,arguments)}var n=this.prototype;e=!0;var r=new this;e=!1;for(var o in i)r[o]="function"==typeof i[o]&&"function"==typeof n[o]&&t.test(i[o])?function(e,t){return function(){var i=this._super;this._super=n[e];var a=t.apply(this,arguments);return this._super=i,a}}(o,i[o]):i[o];return a.prototype=r,a.prototype.constructor=a,a.extend=arguments.callee,a}}();var global=function(){return this||(1,eval)("this")}();if(VMM===void 0){var VMM=Class.extend({});VMM.debug=!0,VMM.master_config={init:function(){return this},sizes:{api:{width:0,height:0}},vp:"Pellentesque nibh felis, eleifend id, commodo in, interdum vitae, leo",api_keys_master:{flickr:"RAIvxHY4hE/Elm5cieh4X5ptMyDpj7MYIxziGxi0WGCcy1s+yr7rKQ==",google:"uQKadH1VMlCsp560gN2aOiMz4evWkl1s34yryl3F/9FJOsn+/948CbBUvKLN46U=",twitter:""},timers:{api:7e3},api:{pushques:[]},twitter:{active:!1,array:[],api_loaded:!1,que:[]},flickr:{active:!1,array:[],api_loaded:!1,que:[]},youtube:{active:!1,array:[],api_loaded:!1,que:[]},vimeo:{active:!1,array:[],api_loaded:!1,que:[]},vine:{active:!1,array:[],api_loaded:!1,que:[]},webthumb:{active:!1,array:[],api_loaded:!1,que:[]},googlemaps:{active:!1,map_active:!1,places_active:!1,array:[],api_loaded:!1,que:[]},googledocs:{active:!1,array:[],api_loaded:!1,que:[]},googleplus:{active:!1,array:[],api_loaded:!1,que:[]},wikipedia:{active:!1,array:[],api_loaded:!1,que:[],tries:0},soundcloud:{active:!1,array:[],api_loaded:!1,que:[]}}.init(),VMM.createElement=function(e,t,i,a,n){var r="";return null!=e&&""!=e&&(r+="<"+e,null!=i&&""!=i&&(r+=" class='"+i+"'"),null!=a&&""!=a&&(r+=" "+a),null!=n&&""!=n&&(r+=" style='"+n+"'"),r+=">",null!=t&&""!=t&&(r+=t),r=r+"</"+e+">"),r},VMM.createMediaElement=function(e,t,i){var a="";return a+="<div class='media'>",null!=e&&""!=e&&(valid=!0,a+="<img src='"+e+"'>",null!=i&&""!=i&&(a+=VMM.createElement("div",i,"credit")),null!=t&&""!=t&&(a+=VMM.createElement("div",t,"caption"))),a+="</div>"},VMM.hideUrlBar=function(){var e=window,t=e.document;
if(!location.hash||!e.addEventListener){window.scrollTo(0,1);var i=1,a=setInterval(function(){t.body&&(clearInterval(a),i="scrollTop"in t.body?t.body.scrollTop:1,e.scrollTo(0,1===i?0:1))},15);e.addEventListener("load",function(){setTimeout(function(){e.scrollTo(0,1===i?0:1)},0)},!1)}}}Array.prototype.remove=function(e,t){var i=this.slice((t||e)+1||this.length);return this.length=0>e?this.length+e:e,this.push.apply(this,i)},Date.prototype.getWeek=function(){var e=new Date(this.getFullYear(),0,1);return Math.ceil(((this-e)/864e5+e.getDay()+1)/7)},Date.prototype.getDayOfYear=function(){var e=new Date(this.getFullYear(),0,1);return Math.ceil((this-e)/864e5)};var is={Null:function(e){return null===e},Undefined:function(e){return void 0===e},nt:function(e){return null===e||void 0===e},Function:function(e){return"function"==typeof e?null!==(""+e.constructor).match(/Function/):!1},String:function(e){return"string"==typeof e?!0:"object"==typeof e?null!==(""+e.constructor).match(/string/i):!1},Array:function(e){return"object"==typeof e?null!==(""+e.constructor).match(/array/i)||void 0!==e.length:!1},Boolean:function(e){return"boolean"==typeof e?!0:"object"==typeof e?null!==(""+e.constructor).match(/boolean/i):!1},Date:function(e){return"date"==typeof e?!0:"object"==typeof e?null!==(""+e.constructor).match(/date/i):!1},HTML:function(e){return"object"==typeof e?null!==(""+e.constructor).match(/html/i):!1},Number:function(e){return"number"==typeof e?!0:"object"==typeof e?null!==(""+e.constructor).match(/Number/):!1},Object:function(e){return"object"==typeof e?null!==(""+e.constructor).match(/object/i):!1},RegExp:function(e){return"function"==typeof e?null!==(""+e.constructor).match(/regexp/i):!1}},type={of:function(e){for(var t in is)if(is[t](e))return t.toLowerCase()}};if(VMM!==void 0&&(VMM.smoothScrollTo=function(e,t,i){if("undefined"!=typeof jQuery){var a="easein",n=1e3;null!=t&&(n=1>t?1:Math.round(t)),null!=i&&""!=i&&(a=i),jQuery(window).scrollTop()!=VMM.Lib.offset(e).top&&VMM.Lib.animate("html,body",n,a,{scrollTop:VMM.Lib.offset(e).top})}},VMM.attachElement=function(e,t){"undefined"!=typeof jQuery&&jQuery(e).html(t)},VMM.appendElement=function(e,t){"undefined"!=typeof jQuery&&jQuery(e).append(t)},VMM.getHTML=function(e){var t;return"undefined"!=typeof jQuery?t=jQuery(e).html():void 0},VMM.getElement=function(e,t){var i;return"undefined"!=typeof jQuery?i=t?jQuery(e).parent().get(0):jQuery(e).get(0):void 0},VMM.bindEvent=function(e,t,i,a){var n="click",r={};null!=i&&""!=i&&(n=i),null!=r&&""!=r&&(r=a),"undefined"!=typeof jQuery&&jQuery(e).bind(n,r,t)},VMM.unbindEvent=function(e,t,i){var a="click";null!=i&&""!=i&&(a=i),"undefined"!=typeof jQuery&&jQuery(e).unbind(a,t)},VMM.fireEvent=function(e,t,i){var a="click",n=[];null!=t&&""!=t&&(a=t),null!=i&&""!=i&&(n=i),"undefined"!=typeof jQuery&&jQuery(e).trigger(a,n)},VMM.getJSON=function(e,t,i){if("undefined"!=typeof jQuery){if(jQuery.ajaxSetup({timeout:3e3}),"Explorer"==VMM.Browser.browser&&parseInt(VMM.Browser.version,10)>=7&&window.XDomainRequest){trace("IE JSON");var a=e;return a.match("^http://")?jQuery.getJSON(a,t,i):a.match("^https://")?(a=a.replace("https://","http://"),jQuery.getJSON(a,t,i)):jQuery.getJSON(e,t,i)}return jQuery.getJSON(e,t,i)}},VMM.parseJSON=function(e){return"undefined"!=typeof jQuery?jQuery.parseJSON(e):void 0},VMM.appendAndGetElement=function(e,t,i,a){var n,r="<div>",o="",s="";return null!=t&&""!=t&&(r=t),null!=i&&""!=i&&(o=i),null!=a&&""!=a&&(s=a),"undefined"!=typeof jQuery&&(n=jQuery(t),n.addClass(o),n.html(s),jQuery(e).append(n)),n},VMM.Lib={init:function(){return this},hide:function(e,t){null!=t&&""!=t?"undefined"!=typeof jQuery&&jQuery(e).hide(t):"undefined"!=typeof jQuery&&jQuery(e).hide()},remove:function(e){"undefined"!=typeof jQuery&&jQuery(e).remove()},detach:function(e){"undefined"!=typeof jQuery&&jQuery(e).detach()},append:function(e,t){"undefined"!=typeof jQuery&&jQuery(e).append(t)},prepend:function(e,t){"undefined"!=typeof jQuery&&jQuery(e).prepend(t)},show:function(e,t){null!=t&&""!=t?"undefined"!=typeof jQuery&&jQuery(e).show(t):"undefined"!=typeof jQuery&&jQuery(e).show()},load:function(e,t,i){var a={elem:e};null!=a&&""!=a&&(a=i),"undefined"!=typeof jQuery&&jQuery(e).load(a,t)},addClass:function(e,t){"undefined"!=typeof jQuery&&jQuery(e).addClass(t)},removeClass:function(e,t){"undefined"!=typeof jQuery&&jQuery(e).removeClass(t)},attr:function(e,t,i){if(null!=i&&""!=i)"undefined"!=typeof jQuery&&jQuery(e).attr(t,i);else if("undefined"!=typeof jQuery)return jQuery(e).attr(t)},prop:function(e,t,i){"undefined"!=typeof jQuery&&/[1-9]\.[3-9].[1-9]/.test(jQuery.fn.jquery)?jQuery(e).prop(t,i):VMM.Lib.attribute(e,t,i)},attribute:function(e,t,i){if(null!=i&&""!=i)"undefined"!=typeof jQuery&&jQuery(e).attr(t,i);else if("undefined"!=typeof jQuery)return jQuery(e).attr(t)},visible:function(e,t){if(null!=t)"undefined"!=typeof jQuery&&(t?jQuery(e).show(0):jQuery(e).hide(0));else if("undefined"!=typeof jQuery)return jQuery(e).is(":visible")?!0:!1},css:function(e,t,i){if(null!=i&&""!=i)"undefined"!=typeof jQuery&&jQuery(e).css(t,i);else if("undefined"!=typeof jQuery)return jQuery(e).css(t)},cssmultiple:function(e,t){return"undefined"!=typeof jQuery?jQuery(e).css(t):void 0},offset:function(e){var t;return"undefined"!=typeof jQuery&&(t=jQuery(e).offset()),t},position:function(e){var t;return"undefined"!=typeof jQuery&&(t=jQuery(e).position()),t},width:function(e,t){if(null!=t&&""!=t)"undefined"!=typeof jQuery&&jQuery(e).width(t);else if("undefined"!=typeof jQuery)return jQuery(e).width()},height:function(e,t){if(null!=t&&""!=t)"undefined"!=typeof jQuery&&jQuery(e).height(t);else if("undefined"!=typeof jQuery)return jQuery(e).height()},toggleClass:function(e,t){"undefined"!=typeof jQuery&&jQuery(e).toggleClass(t)},each:function(e,t){"undefined"!=typeof jQuery&&jQuery(e).each(t)},html:function(e,t){var i;if("undefined"!=typeof jQuery)return i=jQuery(e).html();if(null!=t&&""!=t)"undefined"!=typeof jQuery&&jQuery(e).html(t);else{var i;if("undefined"!=typeof jQuery)return i=jQuery(e).html()}},find:function(e,t){return"undefined"!=typeof jQuery?jQuery(e).find(t):void 0},stop:function(e){"undefined"!=typeof jQuery&&jQuery(e).stop()},delay_animate:function(e,t,i,a,n){if("mobile"==VMM.Browser.device||"tablet"==VMM.Browser.device){var r=Math.round(10*(i/1500))/10,o=r+"s";VMM.Lib.css(t,"-webkit-transition","all "+o+" ease"),VMM.Lib.css(t,"-moz-transition","all "+o+" ease"),VMM.Lib.css(t,"-o-transition","all "+o+" ease"),VMM.Lib.css(t,"-ms-transition","all "+o+" ease"),VMM.Lib.css(t,"transition","all "+o+" ease"),VMM.Lib.cssmultiple(t,_att)}else"undefined"!=typeof jQuery&&jQuery(t).delay(e).animate(n,{duration:i,easing:a})},animate:function(e,t,i,a,n,r){var o="easein",s=!1,l=1e3,d={};if(null!=t&&(l=1>t?1:Math.round(t)),null!=i&&""!=i&&(o=i),null!=n&&""!=n&&(s=n),d=null!=a?a:{opacity:0},"mobile"==VMM.Browser.device||"tablet"==VMM.Browser.device){var c=Math.round(10*(l/1500))/10,u=c+"s";o=" cubic-bezier(0.33, 0.66, 0.66, 1)";for(x in d)Object.prototype.hasOwnProperty.call(d,x)&&(trace(x+" to "+d[x]),VMM.Lib.css(e,"-webkit-transition",x+" "+u+o),VMM.Lib.css(e,"-moz-transition",x+" "+u+o),VMM.Lib.css(e,"-o-transition",x+" "+u+o),VMM.Lib.css(e,"-ms-transition",x+" "+u+o),VMM.Lib.css(e,"transition",x+" "+u+o));VMM.Lib.cssmultiple(e,d)}else"undefined"!=typeof jQuery&&(null!=r&&""!=r?jQuery(e).animate(d,{queue:s,duration:l,easing:o,complete:r}):jQuery(e).animate(d,{queue:s,duration:l,easing:o}))}}),"undefined"!=typeof jQuery&&(function(e){window.XDomainRequest&&e.ajaxTransport(function(t){if(t.crossDomain&&t.async){t.timeout&&(t.xdrTimeout=t.timeout,delete t.timeout);var i;return{send:function(a,n){function r(t,a,r,o){i.onload=i.onerror=i.ontimeout=e.noop,i=void 0,n(t,a,r,o)}i=new XDomainRequest,i.open(t.type,t.url),i.onload=function(){r(200,"OK",{text:i.responseText},"Content-Type: "+i.contentType)},i.onerror=function(){r(404,"Not Found")},t.xdrTimeout&&(i.ontimeout=function(){r(0,"timeout")},i.timeout=t.xdrTimeout),i.send(t.hasContent&&t.data||null)},abort:function(){i&&(i.onerror=e.noop(),i.abort())}}}})}(jQuery),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,i,a,n){return jQuery.easing[jQuery.easing.def](e,t,i,a,n)},easeInExpo:function(e,t,i,a,n){return 0==t?i:a*Math.pow(2,10*(t/n-1))+i},easeOutExpo:function(e,t,i,a,n){return t==n?i+a:a*(-Math.pow(2,-10*t/n)+1)+i},easeInOutExpo:function(e,t,i,a,n){return 0==t?i:t==n?i+a:1>(t/=n/2)?a/2*Math.pow(2,10*(t-1))+i:a/2*(-Math.pow(2,-10*--t)+2)+i},easeInQuad:function(e,t,i,a,n){return a*(t/=n)*t+i},easeOutQuad:function(e,t,i,a,n){return-a*(t/=n)*(t-2)+i},easeInOutQuad:function(e,t,i,a,n){return 1>(t/=n/2)?a/2*t*t+i:-a/2*(--t*(t-2)-1)+i}})),VMM!==void 0&&VMM.Browser===void 0&&(VMM.Browser={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.OS=this.searchString(this.dataOS)||"an unknown OS",this.device=this.searchDevice(navigator.userAgent),this.orientation=this.searchOrientation(window.orientation)},searchOrientation:function(e){var t="";return t=0==e||180==e?"portrait":90==e||-90==e?"landscape":"normal"},searchDevice:function(e){var t="";return t=e.match(/Android/i)||e.match(/iPhone|iPod/i)?"mobile":e.match(/iPad/i)?"tablet":e.match(/BlackBerry/i)||e.match(/IEMobile/i)?"other mobile":"desktop"},searchString:function(e){for(var t=0;e.length>t;t++){var i=e[t].string,a=e[t].prop;if(this.versionSearchString=e[t].versionSearch||e[t].identity,i){if(-1!=i.indexOf(e[t].subString))return e[t].identity}else if(a)return e[t].identity}},searchVersion:function(e){var t=e.indexOf(this.versionSearchString);if(-1!=t)return parseFloat(e.substring(t+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]},VMM.Browser.init()),VMM!==void 0&&VMM.FileExtention===void 0&&(VMM.FileExtention={googleDocType:function(e){var t=e.replace(/\s\s*$/,""),i="",a=["DOC","DOCX","XLS","XLSX","PPT","PPTX","PDF","PAGES","AI","PSD","TIFF","DXF","SVG","EPS","PS","TTF","XPS","ZIP","RAR"],n=!1;i=t.substr(t.length-5,5);for(var r=0;a.length>r;r++)(i.toLowerCase().match((""+a[r]).toLowerCase())||t.match("docs.google.com"))&&(n=!0);return n}}),VMM!==void 0&&VMM.Date===void 0){VMM.Date={init:function(){return this},dateformats:{year:"yyyy",month_short:"mmm",month:"mmmm yyyy",full_short:"mmm d",full:"mmmm d',' yyyy",time_short:"h:MM:ss TT",time_no_seconds_short:"h:MM TT",time_no_seconds_small_date:"h:MM TT'<br/><small>'mmmm d',' yyyy'</small>'",full_long:"mmm d',' yyyy 'at' hh:MM TT",full_long_small_date:"hh:MM TT'<br/><small>mmm d',' yyyy'</small>'"},month:["January","February","March","April","May","June","July","August","September","October","November","December"],month_abbr:["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."],day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_abbr:["Sun.","Mon.","Tues.","Wed.","Thurs.","Fri.","Sat."],hour:[1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11,12],hour_suffix:["am"],bc_format:{year:"yyyy",month_short:"mmm",month:"mmmm yyyy",full_short:"mmm d",full:"mmmm d',' yyyy",time_no_seconds_short:"h:MM TT",time_no_seconds_small_date:"dddd', 'h:MM TT'<br/><small>'mmmm d',' yyyy'</small>'",full_long:"dddd',' mmm d',' yyyy 'at' hh:MM TT",full_long_small_date:"hh:MM TT'<br/><small>'dddd',' mmm d',' yyyy'</small>'"},setLanguage:function(e){trace("SET DATE LANGUAGE"),VMM.Date.dateformats=e.dateformats,VMM.Date.month=e.date.month,VMM.Date.month_abbr=e.date.month_abbr,VMM.Date.day=e.date.day,VMM.Date.day_abbr=e.date.day_abbr,dateFormat.i18n.dayNames=e.date.day_abbr.concat(e.date.day),dateFormat.i18n.monthNames=e.date.month_abbr.concat(e.date.month)},parse:function(e,t){"use strict";var i,a,n,r,o={year:!1,month:!1,day:!1,hour:!1,minute:!1,second:!1,millisecond:!1};if("date"==type.of(e))trace("DEBUG THIS, ITs A DATE"),i=e;else if(i=new Date(0,0,1,0,0,0,0),e.match(/,/gi)){a=e.split(",");for(var s=0;a.length>s;s++)a[s]=parseInt(a[s],10);a[0]&&(i.setFullYear(a[0]),o.year=!0),a[1]&&(i.setMonth(a[1]-1),o.month=!0),a[2]&&(i.setDate(a[2]),o.day=!0),a[3]&&(i.setHours(a[3]),o.hour=!0),a[4]&&(i.setMinutes(a[4]),o.minute=!0),a[5]&&(i.setSeconds(a[5]),a[5]>=1&&(o.second=!0)),a[6]&&(i.setMilliseconds(a[6]),a[6]>=1&&(o.millisecond=!0))}else if(e.match("/"))e.match(" ")?(r=e.split(" "),e.match(":")&&(n=r[1].split(":"),n[0]>=0&&(i.setHours(n[0]),o.hour=!0),n[1]>=0&&(i.setMinutes(n[1]),o.minute=!0),n[2]>=0&&(i.setSeconds(n[2]),o.second=!0),n[3]>=0&&(i.setMilliseconds(n[3]),o.millisecond=!0)),a=r[0].split("/")):a=e.split("/"),a[2]&&(i.setFullYear(a[2]),o.year=!0),a[0]>=0&&(i.setMonth(a[0]-1),o.month=!0),a[1]>=0&&(a[1].length>2?(i.setFullYear(a[1]),o.year=!0):(i.setDate(a[1]),o.day=!0));else if(e.match("now")){var l=new Date;i.setFullYear(l.getFullYear()),o.year=!0,i.setMonth(l.getMonth()),o.month=!0,i.setDate(l.getDate()),o.day=!0,e.match("hours")&&(i.setHours(l.getHours()),o.hour=!0),e.match("minutes")&&(i.setHours(l.getHours()),i.setMinutes(l.getMinutes()),o.hour=!0,o.minute=!0),e.match("seconds")&&(i.setHours(l.getHours()),i.setMinutes(l.getMinutes()),i.setSeconds(l.getSeconds()),o.hour=!0,o.minute=!0,o.second=!0),e.match("milliseconds")&&(i.setHours(l.getHours()),i.setMinutes(l.getMinutes()),i.setSeconds(l.getSeconds()),i.setMilliseconds(l.getMilliseconds()),o.hour=!0,o.minute=!0,o.second=!0,o.millisecond=!0)}else 8>=e.length?(o.year=!0,i.setFullYear(parseInt(e,10)),i.setMonth(0),i.setDate(1),i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0)):e.match("T")?navigator.userAgent.match(/MSIE\s(?!9.0)/)?(r=e.split("T"),e.match(":")&&(n=r[1].split(":"),n[0]>=1&&(i.setHours(n[0]),o.hour=!0),n[1]>=1&&(i.setMinutes(n[1]),o.minute=!0),n[2]>=1&&(i.setSeconds(n[2]),n[2]>=1&&(o.second=!0)),n[3]>=1&&(i.setMilliseconds(n[3]),n[3]>=1&&(o.millisecond=!0))),a=r[0].split("-"),a[0]&&(i.setFullYear(a[0]),o.year=!0),a[1]>=0&&(i.setMonth(a[1]-1),o.month=!0),a[2]>=0&&(i.setDate(a[2]),o.day=!0)):(i=new Date(Date.parse(e)),o.year=!0,o.month=!0,o.day=!0,o.hour=!0,o.minute=!0,i.getSeconds()>=1&&(o.second=!0),i.getMilliseconds()>=1&&(o.millisecond=!0)):(i=new Date(parseInt(e.slice(0,4),10),parseInt(e.slice(4,6),10)-1,parseInt(e.slice(6,8),10),parseInt(e.slice(8,10),10),parseInt(e.slice(10,12),10)),o.year=!0,o.month=!0,o.day=!0,o.hour=!0,o.minute=!0,i.getSeconds()>=1&&(o.second=!0),i.getMilliseconds()>=1&&(o.millisecond=!0));return null!=t&&""!=t?{date:i,precision:o}:i},prettyDate:function(e,t,i,a){var n,r,o,s,l,d,c,u=!1;if(null!=a&&""!=a&&a!==void 0&&(u=!0,trace("D2 "+a)),"date"==type.of(e)){o="object"==type.of(i)?i.millisecond||i.second&&e.getSeconds()>=1?t?VMM.Date.dateformats.time_short:VMM.Date.dateformats.time_short:i.minute?t?VMM.Date.dateformats.time_no_seconds_short:VMM.Date.dateformats.time_no_seconds_small_date:i.hour?t?VMM.Date.dateformats.time_no_seconds_short:VMM.Date.dateformats.time_no_seconds_small_date:i.day?t?VMM.Date.dateformats.full_short:VMM.Date.dateformats.full:i.month?t?VMM.Date.dateformats.month_short:VMM.Date.dateformats.month:i.year?VMM.Date.dateformats.year:VMM.Date.dateformats.year:0===e.getMonth()&&1==e.getDate()&&0===e.getHours()&&0===e.getMinutes()?VMM.Date.dateformats.year:1>=e.getDate()&&0===e.getHours()&&0===e.getMinutes()?t?VMM.Date.dateformats.month_short:VMM.Date.dateformats.month:0===e.getHours()&&0===e.getMinutes()?t?VMM.Date.dateformats.full_short:VMM.Date.dateformats.full:0===e.getMinutes()?t?VMM.Date.dateformats.time_no_seconds_short:VMM.Date.dateformats.time_no_seconds_small_date:t?VMM.Date.dateformats.time_no_seconds_short:VMM.Date.dateformats.full_long,n=dateFormat(e,o,!1),s=n.split(" ");for(var m=0;s.length>m;m++)0>parseInt(s[m],10)&&(trace("YEAR IS BC"),l=s[m],d=Math.abs(parseInt(s[m],10)),c=""+d+" B.C.",n=n.replace(l,c));if(u){r=dateFormat(a,o,!1),s=r.split(" ");for(var p=0;s.length>p;p++)0>parseInt(s[p],10)&&(trace("YEAR IS BC"),l=s[p],d=Math.abs(parseInt(s[p],10)),c=""+d+" B.C.",r=r.replace(l,c))}}else trace("NOT A VALID DATE?"),trace(e);return u?n+" &mdash; "+r:n}}.init();var dateFormat=function(){var e=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,t=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,i=/[^-+\dA-Z]/g,a=function(e,t){for(e+="",t=t||2;t>e.length;)e="0"+e;return e};return function(n,r,o){var s=dateFormat;1!=arguments.length||"[object String]"!=Object.prototype.toString.call(n)||/\d/.test(n)||(r=n,n=void 0),isNaN(n)&&trace("invalid date "+n),r=(s.masks[r]||r||s.masks["default"])+"","UTC:"==r.slice(0,4)&&(r=r.slice(4),o=!0);var l=o?"getUTC":"get",d=n[l+"Date"](),c=n[l+"Day"](),u=n[l+"Month"](),m=n[l+"FullYear"](),p=n[l+"Hours"](),h=n[l+"Minutes"](),M=n[l+"Seconds"](),g=n[l+"Milliseconds"](),f=o?0:n.getTimezoneOffset(),v={d:d,dd:a(d),ddd:s.i18n.dayNames[c],dddd:s.i18n.dayNames[c+7],m:u+1,mm:a(u+1),mmm:s.i18n.monthNames[u],mmmm:s.i18n.monthNames[u+12],yy:(m+"").slice(2),yyyy:m,h:p%12||12,hh:a(p%12||12),H:p,HH:a(p),M:h,MM:a(h),s:M,ss:a(M),l:a(g,3),L:a(g>99?Math.round(g/10):g),t:12>p?"a":"p",tt:12>p?"am":"pm",T:12>p?"A":"P",TT:12>p?"AM":"PM",Z:o?"UTC":((n+"").match(t)||[""]).pop().replace(i,""),o:(f>0?"-":"+")+a(100*Math.floor(Math.abs(f)/60)+Math.abs(f)%60,4),S:["th","st","nd","rd"][d%10>3?0:(10!=d%100-d%10)*d%10]};return r.replace(e,function(e){return e in v?v[e]:e.slice(1,e.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},Date.prototype.format=function(e,t){return dateFormat(this,e,t)}}VMM!==void 0&&VMM.Util===void 0&&(VMM.Util={init:function(){return this},correctProtocol:function(e){var t=""+window.parent.location.protocol,i="",a=e.split("://",2);return i=t.match("http")?t:"https",i+"://"+a[1]},mergeConfig:function(e,t){var i;for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},getObjectAttributeByIndex:function(e,t){if(e!==void 0){var i=0;for(var a in e){if(t===i)return e[a];i++}return""}return""},ordinal:function(e){return["th","st","nd","rd"][!(e%10>3||1==Math.floor(e%100/10))*(e%10)]},randomBetween:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},average:function(e){for(var t,i={mean:0,variance:0,deviation:0},a=e.length,n=0,r=a;r--;n+=e[r]);for(t=i.mean=n/a,r=a,n=0;r--;n+=Math.pow(e[r]-t,2));return i.deviation=Math.sqrt(i.variance=n/a),i},customSort:function(e,t){var i=e,a=t;return i==a?0:i>a?1:-1},deDupeArray:function(e){var t,i=e.length,a=[],n={};for(t=0;i>t;t++)n[e[t]]=0;for(t in n)a.push(t);return a},number2money:function(e,t,i){var t=null!==t?t:!0,i=null!==i?i:!1,a=VMM.Math2.floatPrecision(e,2),n=this.niceNumber(a);return!n.split(/\./g)[1]&&i&&(n+=".00"),t&&(n="$"+n),n},wordCount:function(e){var t=e+" ",i=/^[^A-Za-z0-9\'\-]+/gi,a=t.replace(i,""),n=/[^A-Za-z0-9\'\-]+/gi,r=a.replace(n," "),o=r.split(" "),s=o.length-1;return 2>t.length&&(s=0),s},ratio:{fit:function(e,t,i,a){var n={width:0,height:0};return n.width=e,n.height=Math.round(e/i*a),n.height>t&&(n.height=t,n.width=Math.round(t/a*i),n.width>e&&trace("FIT: DIDN'T FIT!!! ")),n},r16_9:function(e,t){return null!==e&&""!==e?Math.round(9*(t/16)):null!==t&&""!==t?Math.round(16*(e/9)):void 0},r4_3:function(e,t){return null!==e&&""!==e?Math.round(3*(t/4)):null!==t&&""!==t?Math.round(4*(e/3)):void 0}},doubledigit:function(e){return(10>e?"0":"")+e},truncateWords:function(e,t,i){t||(t=30),i||(i=t);var a=/^[^A-Za-z0-9\'\-]+/gi,n=e.replace(a,""),r=n.split(" "),o=[];t=Math.min(r.length,t),i=Math.min(r.length,i);for(var s=0;t>s;s++)o.push(r[s]);for(;i>s;s++){var l=r[s];if(o.push(l),"."==l.charAt(l.length-1))break}return o.join(" ")},linkify:function(e){var t=/\b(?:https?|ftp):\/\/[a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|]/gim,i=/(^|[^\/])(www\.[\S]+(\b|$))/gim,a=/(([a-zA-Z0-9_\-\.]+)@[a-zA-Z_]+?(?:\.[a-zA-Z]{2,6}))+/gim;return e.replace(t,"<a target='_blank' href='$&' onclick='void(0)'>$&</a>").replace(i,"$1<a target='_blank' onclick='void(0)' href='http://$2'>$2</a>").replace(a,"<a target='_blank' onclick='void(0)' href='mailto:$1'>$1</a>")},linkify_with_twitter:function(e){var t=/(\()((?:ht|f)tps?:\/\/[a-z0-9\-._~!$&'()*+,;=:\/?#[\]@%]+)(\))|(\[)((?:ht|f)tps?:\/\/[a-z0-9\-._~!$&'()*+,;=:\/?#[\]@%]+)(\])|(\{)((?:ht|f)tps?:\/\/[a-z0-9\-._~!$&'()*+,;=:\/?#[\]@%]+)(\})|(<|&(?:lt|#60|#x3c);)((?:ht|f)tps?:\/\/[a-z0-9\-._~!$&'()*+,;=:\/?#[\]@%]+)(>|&(?:gt|#62|#x3e);)|((?:^|[^=\s'"\]])\s*['"]?|[^=\s]\s+)(\b(?:ht|f)tps?:\/\/[a-z0-9\-._~!$'()*+,;=:\/?#[\]@%]+(?:(?!&(?:gt|#0*62|#x0*3e);|&(?:amp|apos|quot|#0*3[49]|#x0*2[27]);[.!&',:?;]?(?:[^a-z0-9\-._~!$&'()*+,;=:\/?#[\]@%]|$))&[a-z0-9\-._~!$'()*+,;=:\/?#[\]@%]*)*[a-z0-9\-_~$()*+=\/#[\]@%])/gim,i='$1$4$7$10$13<a href="$2$5$8$11$14" target="_blank" class="hyphenate">$2$5$8$11$14</a>$3$6$9$12',a=/(^|[^\/])(www\.[\S]+(\b|$))/gim,n=/(([a-zA-Z0-9_\-\.]+)@[a-zA-Z_]+?(?:\.[a-zA-Z]{2,6}))+/gim,r=/\B@([\w-]+)/gm;return e.replace(t,i).replace(a,"$1<a target='_blank' class='hyphenate' onclick='void(0)' href='http://$2'>$2</a>").replace(n,"<a target='_blank' onclick='void(0)' href='mailto:$1'>$1</a>").replace(r,"<a href='http://twitter.com/$1' target='_blank' onclick='void(0)'>@$1</a>")},linkify_wikipedia:function(e){var t=/<i[^>]*>(.*?)<\/i>/gim;return e.replace(t,"<a target='_blank' href='http://en.wikipedia.org/wiki/$&' onclick='void(0)'>$&</a>").replace(/<i\b[^>]*>/gim,"").replace(/<\/i>/gim,"").replace(/<b\b[^>]*>/gim,"").replace(/<\/b>/gim,"")},unlinkify:function(e){return e?(e=e.replace(/<a\b[^>]*>/i,""),e=e.replace(/<\/a>/i,"")):e},untagify:function(e){return e?e=e.replace(/<\s*\w.*?>/g,""):e},nl2br:function(e){return e.replace(/(\r\n|[\r\n]|\\n|\\r)/g,"<br/>")},unique_ID:function(e){var t=function(e){return Math.floor(Math.random()*e)},i=function(){var e="abcdefghijklmnopqurstuvwxyzABCDEFGHIJKLMNOPQURSTUVWXYZ";return e.substr(t(62),1)},a=function(e){for(var t="",a=0;e>a;a++)t+=i();return t};return a(e)},isEven:function(e){return 0===e%2?!0:!1},getUrlVars:function(e){var t=""+e;t.match("&#038;")?t=t.replace("&#038;","&"):t.match("&#38;")?t=t.replace("&#38;","&"):t.match("&amp;")&&(t=t.replace("&amp;","&"));for(var i,a=[],n=t.slice(t.indexOf("?")+1).split("&"),r=0;n.length>r;r++)i=n[r].split("="),a.push(i[0]),a[i[0]]=i[1];return a},toHTML:function(e){return e=this.nl2br(e),e=this.linkify(e),e.replace(/\s\s/g,"&nbsp;&nbsp;")},toCamelCase:function(e,t){t!==!1&&(t=!0);for(var i=(t?e.toLowerCase():e).split(" "),a=0;i.length>a;a++)i[a]=i[a].substr(0,1).toUpperCase()+i[a].substr(1);return i.join(" ")},properQuotes:function(e){return e.replace(/\"([^\"]*)\"/gi,"&#8220;$1&#8221;")},niceNumber:function(e){e+="",x=e.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var t=/(\d+)(\d{3})/;t.test(x1);)x1=x1.replace(t,"$1,$2");return x1+x2},toTitleCase:function(e){if("Explorer"==VMM.Browser.browser&&parseInt(VMM.Browser.version,10)>=7)return e.replace("_","%20");var t={__smallWords:["a","an","and","as","at","but","by","en","for","if","in","of","on","or","the","to","v[.]?","via","vs[.]?"],init:function(){this.__smallRE=this.__smallWords.join("|"),this.__lowerCaseWordsRE=RegExp("\\b("+this.__smallRE+")\\b","gi"),this.__firstWordRE=RegExp("^([^a-zA-Z0-9 \\r\\n\\t]*)("+this.__smallRE+")\\b","gi"),this.__lastWordRE=RegExp("\\b("+this.__smallRE+")([^a-zA-Z0-9 \\r\\n\\t]*)$","gi")},toTitleCase:function(e){for(var t="",i=e.split(/([:.;?!][ ]|(?:[ ]|^)["“])/),a=0;i.length>a;++a){var n=i[a];n=n.replace(/\b([a-zA-Z][a-z.'’]*)\b/g,this.__titleCaseDottedWordReplacer),n=n.replace(this.__lowerCaseWordsRE,this.__lowerReplacer),n=n.replace(this.__firstWordRE,this.__firstToUpperCase),n=n.replace(this.__lastWordRE,this.__firstToUpperCase),t+=n}return t=t.replace(/ V(s?)\. /g," v$1. "),t=t.replace(/(['’])S\b/g,"$1s"),t=t.replace(/\b(AT&T|Q&A)\b/gi,this.__upperReplacer)},__titleCaseDottedWordReplacer:function(e){return e.match(/[a-zA-Z][.][a-zA-Z]/)?e:t.__firstToUpperCase(e)},__lowerReplacer:function(e){return e.toLowerCase()},__upperReplacer:function(e){return e.toUpperCase()},__firstToUpperCase:function(e){var t=e.split(/(^[^a-zA-Z0-9]*[a-zA-Z0-9])(.*)$/);return t[1]&&(t[1]=t[1].toUpperCase()),t.join("")}};return t.init(),e=e.replace(/_/g," "),e=t.toTitleCase(e)}}.init()),LazyLoad=function(e){function t(t,i){var a,n=e.createElement(t);for(a in i)i.hasOwnProperty(a)&&n.setAttribute(a,i[a]);return n}function i(e){var t,i,a=d[e];a&&(t=a.callback,i=a.urls,i.shift(),c=0,i.length||(t&&t.call(a.context,a.obj),d[e]=null,u[e].length&&n(e)))}function a(){var t=navigator.userAgent;s={async:e.createElement("script").async===!0},(s.webkit=/AppleWebKit\//.test(t))||(s.ie=/MSIE/.test(t))||(s.opera=/Opera/.test(t))||(s.gecko=/Gecko\//.test(t))||(s.unknown=!0)}function n(n,c,m,p,h){var M,g,f,v,y,b,V=function(){i(n)},w="css"===n,_=[];if(s||a(),c)if(c="string"==typeof c?[c]:c.concat(),w||s.async||s.gecko||s.opera)u[n].push({urls:c,callback:m,obj:p,context:h});else for(M=0,g=c.length;g>M;++M)u[n].push({urls:[c[M]],callback:M===g-1?m:null,obj:p,context:h});if(!d[n]&&(v=d[n]=u[n].shift())){for(l||(l=e.head||e.getElementsByTagName("head")[0]),y=v.urls,M=0,g=y.length;g>M;++M)b=y[M],w?f=s.gecko?t("style"):t("link",{href:b,rel:"stylesheet"}):(f=t("script",{src:b}),f.async=!1),f.className="lazyload",f.setAttribute("charset","utf-8"),s.ie&&!w?f.onreadystatechange=function(){/loaded|complete/.test(f.readyState)&&(f.onreadystatechange=null,V())}:w&&(s.gecko||s.webkit)?s.webkit?(v.urls[M]=f.href,o()):(f.innerHTML='@import "'+b+'";',r(f)):f.onload=f.onerror=V,_.push(f);for(M=0,g=_.length;g>M;++M)l.appendChild(_[M])}}function r(e){var t;try{t=!!e.sheet.cssRules}catch(a){return c+=1,200>c?setTimeout(function(){r(e)},50):t&&i("css"),void 0}i("css")}function o(){var e,t=d.css;if(t){for(e=m.length;--e>=0;)if(m[e].href===t.urls[0]){i("css");break}c+=1,t&&(200>c?setTimeout(o,50):i("css"))}}var s,l,d={},c=0,u={css:[],js:[]},m=e.styleSheets;return{css:function(e,t,i,a){n("css",e,t,i,a)},js:function(e,t,i,a){n("js",e,t,i,a)}}}(this.document),LoadLib=function(){function e(e){var i=0,a=!1;for(i=0;t.length>i;i++)t[i]==e&&(a=!0);return a?!0:(t.push(e),!1)}var t=[];return{css:function(t,i,a,n){e(t)||LazyLoad.css(t,i,a,n)},js:function(t,i,a,n){e(t)||LazyLoad.js(t,i,a,n)}}}(this.document),VMM!==void 0&&VMM.Language===void 0&&(VMM.Language={lang:"en",api:{wikipedia:"en"},date:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],month_abbr:["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."],day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_abbr:["Sun.","Mon.","Tues.","Wed.","Thurs.","Fri.","Sat."]},dateformats:{year:"yyyy",month_short:"mmm",month:"mmmm yyyy",full_short:"mmm d",full:"mmmm d',' yyyy",time_short:"h:MM:ss TT",time_no_seconds_short:"h:MM TT",time_no_seconds_small_date:"h:MM TT'<br/><small>'mmmm d',' yyyy'</small>'",full_long:"mmm d',' yyyy 'at' h:MM TT",full_long_small_date:"h:MM TT'<br/><small>mmm d',' yyyy'</small>'"},messages:{loading_timeline:"Loading Timeline... ",return_to_title:"Return to Title",expand_timeline:"Expand Timeline",contract_timeline:"Contract Timeline",wikipedia:"From Wikipedia, the free encyclopedia",loading_content:"Loading Content",loading:"Loading"}}),VMM!==void 0&&VMM.ExternalAPI===void 0&&(VMM.ExternalAPI={keys:{google:"",flickr:"",twitter:""},keys_master:{vp:"Pellentesque nibh felis, eleifend id, commodo in, interdum vitae, leo",flickr:"RAIvxHY4hE/Elm5cieh4X5ptMyDpj7MYIxziGxi0WGCcy1s+yr7rKQ==",google:"jwNGnYw4hE9lmAez4ll0QD+jo6SKBJFknkopLS4FrSAuGfIwyj57AusuR0s8dAo=",twitter:""},init:function(){return this},setKeys:function(e){VMM.ExternalAPI.keys=e},pushQues:function(){VMM.master_config.googlemaps.active&&VMM.ExternalAPI.googlemaps.pushQue(),VMM.master_config.youtube.active&&VMM.ExternalAPI.youtube.pushQue(),VMM.master_config.soundcloud.active&&VMM.ExternalAPI.soundcloud.pushQue(),VMM.master_config.googledocs.active&&VMM.ExternalAPI.googledocs.pushQue(),VMM.master_config.googleplus.active&&VMM.ExternalAPI.googleplus.pushQue(),VMM.master_config.wikipedia.active&&VMM.ExternalAPI.wikipedia.pushQue(),VMM.master_config.vimeo.active&&VMM.ExternalAPI.vimeo.pushQue(),VMM.master_config.vine.active&&VMM.ExternalAPI.vine.pushQue(),VMM.master_config.twitter.active&&VMM.ExternalAPI.twitter.pushQue(),VMM.master_config.flickr.active&&VMM.ExternalAPI.flickr.pushQue(),VMM.master_config.webthumb.active&&VMM.ExternalAPI.webthumb.pushQue()},twitter:{tweetArray:[],get:function(e){var t={mid:e.id,id:e.uid};VMM.master_config.twitter.que.push(t),VMM.master_config.twitter.active=!0},create:function(e,t){""+e.mid,{twitterid:e.mid},"//api.twitter.com/1/statuses/show.json?id="+e.mid+"&include_entities=true&callback=?",VMM.ExternalAPI.twitter.getOEmbed(e,t)},errorTimeOut:function(e){trace("TWITTER JSON ERROR TIMEOUT "+e.mid),VMM.attachElement("#"+(""+e.id),VMM.MediaElement.loadingmessage("Still waiting on Twitter: "+e.mid)),VMM.getJSON("//api.twitter.com/1/account/rate_limit_status.json",function(t){trace("REMAINING TWITTER API CALLS "+t.remaining_hits),trace("TWITTER RATE LIMIT WILL RESET AT "+t.reset_time);var i="";0==t.remaining_hits?(i="<p>You've reached the maximum number of tweets you can load in an hour.</p>",i+="<p>You can view tweets again starting at: <br/>"+t.reset_time+"</p>"):i="<p>Still waiting on Twitter. "+e.mid+"</p>",VMM.attachElement("#"+(""+e.id),VMM.MediaElement.loadingmessage(i))})},errorTimeOutOembed:function(e){trace("TWITTER JSON ERROR TIMEOUT "+e.mid),VMM.attachElement("#"+(""+e.id),VMM.MediaElement.loadingmessage("Still waiting on Twitter: "+e.mid))},pushQue:function(){VMM.master_config.twitter.que.length>0&&(VMM.ExternalAPI.twitter.create(VMM.master_config.twitter.que[0],VMM.ExternalAPI.twitter.pushQue),VMM.master_config.twitter.que.remove(0))},getOEmbed:function(e,t){var i="//api.twitter.com/1/statuses/oembed.json?id="+e.mid+"&omit_script=true&include_entities=true&callback=?",a=setTimeout(VMM.ExternalAPI.twitter.errorTimeOutOembed,VMM.master_config.timers.api,e);VMM.getJSON(i,function(t){var i="",a="";i+=t.html.split("</p>&mdash;")[0]+"</p></blockquote>",a=t.author_url.split("twitter.com/")[1],i+="<div class='vcard author'>",i+="<a class='screen-name url' href='"+t.author_url+"' target='_blank'>",i+="<span class='avatar'></span>",i+="<span class='fn'>"+t.author_name+"</span>",i+="<span class='nickname'>@"+a+"<span class='thumbnail-inline'></span></span>",i+="</a>",i+="</div>",VMM.attachElement("#"+(""+e.id),i),VMM.attachElement("#text_thumb_"+(""+e.id),t.html),VMM.attachElement("#marker_content_"+(""+e.id),t.html)
}).error(function(t,i){trace("TWITTER error"),trace("TWITTER ERROR: "+i+" "+t.responseText),clearTimeout(a),VMM.attachElement("#"+e.id,VMM.MediaElement.loadingmessage("ERROR LOADING TWEET "+e.mid))}).success(function(){clearTimeout(a),clearTimeout(callback_timeout),t()})},getHTML:function(e){var t="//api.twitter.com/1/statuses/oembed.json?id="+e+"&omit_script=true&include_entities=true&callback=?";VMM.getJSON(t,VMM.ExternalAPI.twitter.onJSONLoaded)},onJSONLoaded:function(e){trace("TWITTER JSON LOADED");var t=e.id;VMM.attachElement("#"+t,VMM.Util.linkify_with_twitter(e.html))},parseTwitterDate:function(e){var t=new Date(Date.parse(e));return t},prettyParseTwitterDate:function(e){var t=new Date(Date.parse(e));return VMM.Date.prettyDate(t,!0)},getTweets:function(e){for(var t=[],i=e.length,a=0;e.length>a;a++){var n="";n=e[a].tweet.match("status/")?e[a].tweet.split("status/")[1]:e[a].tweet.match("statuses/")?e[a].tweet.split("statuses/")[1]:"";var r="//api.twitter.com/1/statuses/show.json?id="+n+"&include_entities=true&callback=?";VMM.getJSON(r,function(e){var a={},n="<div class='twitter'><blockquote><p>",r=VMM.Util.linkify_with_twitter(e.text,"_blank");if(n+=r,n+="</p>",n+="— "+e.user.name+" (<a href='https://twitter.com/"+e.user.screen_name+"'>@"+e.user.screen_name+"</a>) <a href='https://twitter.com/"+e.user.screen_name+"/status/"+e.id+"'>"+VMM.ExternalAPI.twitter.prettyParseTwitterDate(e.created_at)+" </a></blockquote></div>",a.content=n,a.raw=e,t.push(a),t.length==i){var o={tweetdata:t};VMM.fireEvent(global,"TWEETSLOADED",o)}}).success(function(){trace("second success")}).error(function(){trace("error")}).complete(function(){trace("complete")})}},getTweetSearch:function(e,t){var i=40;null!=t&&""!=t&&(i=t);var a="//search.twitter.com/search.json?q="+e+"&rpp="+i+"&include_entities=true&result_type=mixed",n=[];VMM.getJSON(a,function(e){for(var t=0;e.results.length>t;t++){var i={},a="<div class='twitter'><blockquote><p>",r=VMM.Util.linkify_with_twitter(e.results[t].text,"_blank");a+=r,a+="</p>",a+="— "+e.results[t].from_user_name+" (<a href='https://twitter.com/"+e.results[t].from_user+"'>@"+e.results[t].from_user+"</a>) <a href='https://twitter.com/"+e.results[t].from_user+"/status/"+e.id+"'>"+VMM.ExternalAPI.twitter.prettyParseTwitterDate(e.results[t].created_at)+" </a></blockquote></div>",i.content=a,i.raw=e.results[t],n.push(i)}var o={tweetdata:n};VMM.fireEvent(global,"TWEETSLOADED",o)})},prettyHTML:function(e,t){var e=""+e,i="//api.twitter.com/1/statuses/show.json?id="+e+"&include_entities=true&callback=?",a=setTimeout(VMM.ExternalAPI.twitter.errorTimeOut,VMM.master_config.timers.api,e);VMM.getJSON(i,VMM.ExternalAPI.twitter.formatJSON).error(function(t,i){trace("TWITTER error"),trace("TWITTER ERROR: "+i+" "+t.responseText),VMM.attachElement("#twitter_"+e,"<p>ERROR LOADING TWEET "+e+"</p>")}).success(function(e){clearTimeout(a),t&&VMM.ExternalAPI.twitter.secondaryMedia(e)})},formatJSON:function(e){var t=e.id_str,i="<blockquote><p>",a=VMM.Util.linkify_with_twitter(e.text,"_blank");i+=a,i+="</p></blockquote>",i+="<div class='vcard author'>",i+="<a class='screen-name url' href='https://twitter.com/"+e.user.screen_name+"' data-screen-name='"+e.user.screen_name+"' target='_blank'>",i+="<span class='avatar'><img src=' "+e.user.profile_image_url+"'  alt=''></span>",i+="<span class='fn'>"+e.user.name+"</span>",i+="<span class='nickname'>@"+e.user.screen_name+"<span class='thumbnail-inline'></span></span>",i+="</a>",i+="</div>",e.entities.media!==void 0&&"photo"==e.entities.media[0].type&&(i+="<img src=' "+e.entities.media[0].media_url+"'  alt=''>"),VMM.attachElement("#twitter_"+(""+t),i),VMM.attachElement("#text_thumb_"+(""+t),e.text)}},googlemaps:{maptype:"toner",setMapType:function(e){""!=e&&(VMM.ExternalAPI.googlemaps.maptype=e)},get:function(e){var t,i;e.vars=VMM.Util.getUrlVars(e.id),t=""!=VMM.ExternalAPI.keys.google?VMM.ExternalAPI.keys.google:Aes.Ctr.decrypt(VMM.ExternalAPI.keys_master.google,VMM.ExternalAPI.keys_master.vp,256),i="//maps.googleapis.com/maps/api/js?key="+t+"&v=3.9&libraries=places&sensor=false&callback=VMM.ExternalAPI.googlemaps.onMapAPIReady",VMM.master_config.googlemaps.active?VMM.master_config.googlemaps.que.push(e):(VMM.master_config.googlemaps.que.push(e),VMM.master_config.googlemaps.api_loaded||LoadLib.js(i,function(){trace("Google Maps API Library Loaded")}))},create:function(e){VMM.ExternalAPI.googlemaps.createAPIMap(e)},createiFrameMap:function(e){var t=e.id+"&output=embed",i="",a=""+e.uid+"_gmap";i+="<div class='google-map' id='"+a+"' style='width=100%;height=100%;'>",i+="<iframe width='100%' height='100%' frameborder='0' scrolling='no' marginheight='0' marginwidth='0' src='"+t+"'></iframe>",i+="</div>",VMM.attachElement("#"+e.uid,i)},createAPIMap:function(e){function t(e){return e in VMM.ExternalAPI.googlemaps.map_providers?(d=VMM.ExternalAPI.googlemaps.map_attribution[VMM.ExternalAPI.googlemaps.map_providers[e].attribution],VMM.ExternalAPI.googlemaps.map_providers[e]):VMM.ExternalAPI.googlemaps.defaultType(e)?(trace("GOOGLE MAP DEFAULT TYPE"),google.maps.MapTypeId[e.toUpperCase()]):(trace("Not a maptype: "+e),void 0)}function i(){var t,i=new google.maps.Geocoder,n=VMM.Util.getUrlVars(e.id).q;if(n.match("loc:")){var r=n.split(":")[1].split("+");m=new google.maps.LatLng(parseFloat(r[0]),parseFloat(r[1])),h=!0}i.geocode({address:n},function(e,i){i==google.maps.GeocoderStatus.OK?(t=new google.maps.Marker({map:o,position:e[0].geometry.location}),e[0].geometry.viewport!==void 0?o.fitBounds(e[0].geometry.viewport):e[0].geometry.bounds!==void 0?o.fitBounds(e[0].geometry.bounds):o.setCenter(e[0].geometry.location),h&&o.panTo(m),M&&o.setZoom(p)):(trace("Geocode for "+n+" was not successful for the following reason: "+i),trace("TRYING PLACES SEARCH"),h&&o.panTo(m),M&&o.setZoom(p),a())})}function a(){function t(t,a){if(a==google.maps.places.PlacesServiceStatus.OK){for(var n=0;t.length>n;n++);h?o.panTo(m):t.length>=1&&(o.panTo(t[0].geometry.location),M&&o.setZoom(p))}else trace("Place search for "+i.query+" was not successful for the following reason: "+a),trace("YOU MAY NEED A GOOGLE MAPS API KEY IN ORDER TO USE THIS FEATURE OF TIMELINEJS"),trace("FIND OUT HOW TO GET YOUR KEY HERE: https://developers.google.com/places/documentation/#Authentication"),h?(o.panTo(m),M&&o.setZoom(p)):(trace("USING SIMPLE IFRAME MAP EMBED"),e.id[0].match("https")&&(e.id=e.url[0].replace("https","http")),VMM.ExternalAPI.googlemaps.createiFrameMap(e))}var i,a,n,r,s;place_search=new google.maps.places.PlacesService(o),a=new google.maps.InfoWindow,i={query:"",types:["country","neighborhood","political","locality","geocode"]},"string"==type.of(VMM.Util.getUrlVars(e.id).q)&&(i.query=VMM.Util.getUrlVars(e.id).q),h?(i.location=m,i.radius="15000"):(r=new google.maps.LatLng(-89.999999,-179.999999),s=new google.maps.LatLng(89.999999,179.999999),n=new google.maps.LatLngBounds(r,s)),place_search.textSearch(i,t)}function n(){var t,i,a,n;t=e.id+"&output=kml",t=t.replace("&output=embed",""),i=new google.maps.KmlLayer(t,{preserveViewport:!0}),a=new google.maps.InfoWindow,i.setMap(o),google.maps.event.addListenerOnce(i,"defaultviewport_changed",function(){h?o.panTo(m):o.fitBounds(i.getDefaultViewport()),M&&o.setZoom(p)}),google.maps.event.addListener(i,"click",function(e){function t(e){a.setContent(e),a.open(o)}n=e.featureData.description,t(n)})}var r,o,s,l,d="",c=""+e.uid+"_gmap",u="",m=new google.maps.LatLng(41.875696,-87.624207),p=11,h=!1,M=!1;google.maps.VeriteMapType=function(e){if(VMM.ExternalAPI.googlemaps.defaultType(e))return google.maps.MapTypeId[e.toUpperCase()];var i=t(e);return google.maps.ImageMapType.call(this,{getTileUrl:function(e,t){var a=(t+e.x+e.y)%VMM.ExternalAPI.googlemaps.map_subdomains.length;return[i.url.replace("{S}",VMM.ExternalAPI.googlemaps.map_subdomains[a]).replace("{Z}",t).replace("{X}",e.x).replace("{Y}",e.y).replace("{z}",t).replace("{x}",e.x).replace("{y}",e.y)]},tileSize:new google.maps.Size(256,256),name:e,minZoom:i.minZoom,maxZoom:i.maxZoom})},google.maps.VeriteMapType.prototype=new google.maps.ImageMapType("_"),r=""!=VMM.ExternalAPI.googlemaps.maptype?VMM.ExternalAPI.googlemaps.defaultType(VMM.ExternalAPI.googlemaps.maptype)?google.maps.MapTypeId[VMM.ExternalAPI.googlemaps.maptype.toUpperCase()]:VMM.ExternalAPI.googlemaps.maptype:"toner","string"==type.of(VMM.Util.getUrlVars(e.id).ll)?(h=!0,l=VMM.Util.getUrlVars(e.id).ll.split(","),m=new google.maps.LatLng(parseFloat(l[0]),parseFloat(l[1]))):"string"==type.of(VMM.Util.getUrlVars(e.id).sll)&&(l=VMM.Util.getUrlVars(e.id).sll.split(","),m=new google.maps.LatLng(parseFloat(l[0]),parseFloat(l[1]))),"string"==type.of(VMM.Util.getUrlVars(e.id).z)&&(M=!0,p=parseFloat(VMM.Util.getUrlVars(e.id).z)),s={zoom:p,draggable:!1,disableDefaultUI:!0,mapTypeControl:!1,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.TOP_RIGHT},center:m,mapTypeId:r,mapTypeControlOptions:{mapTypeIds:[r]}},VMM.attachElement("#"+e.uid,"<div class='google-map' id='"+c+"' style='width=100%;height=100%;'></div>"),o=new google.maps.Map(document.getElementById(c),s),VMM.ExternalAPI.googlemaps.defaultType(VMM.ExternalAPI.googlemaps.maptype)||(o.mapTypes.set(r,new google.maps.VeriteMapType(r)),u="<div class='map-attribution'><div class='attribution-text'>"+d+"</div></div>",VMM.appendElement("#"+c,u)),"string"==type.of(VMM.Util.getUrlVars(e.id).msid)?n():"string"==type.of(VMM.Util.getUrlVars(e.id).q)&&i()},pushQue:function(){for(var e=0;VMM.master_config.googlemaps.que.length>e;e++)VMM.ExternalAPI.googlemaps.create(VMM.master_config.googlemaps.que[e]);VMM.master_config.googlemaps.que=[]},onMapAPIReady:function(){VMM.master_config.googlemaps.map_active=!0,VMM.master_config.googlemaps.places_active=!0,VMM.ExternalAPI.googlemaps.onAPIReady()},onPlacesAPIReady:function(){VMM.master_config.googlemaps.places_active=!0,VMM.ExternalAPI.googlemaps.onAPIReady()},onAPIReady:function(){!VMM.master_config.googlemaps.active&&VMM.master_config.googlemaps.map_active&&VMM.master_config.googlemaps.places_active&&(VMM.master_config.googlemaps.active=!0,VMM.ExternalAPI.googlemaps.pushQue())},defaultType:function(e){return"satellite"==e.toLowerCase()||"hybrid"==e.toLowerCase()||"terrain"==e.toLowerCase()||"roadmap"==e.toLowerCase()?!0:!1},map_subdomains:["","a.","b.","c.","d."],map_attribution:{stamen:"Map tiles by <a href='http://stamen.com'>Stamen Design</a>, under <a href='http://creativecommons.org/licenses/by/3.0'>CC BY 3.0</a>. Data by <a href='http://openstreetmap.org'>OpenStreetMap</a>, under <a href='http://creativecommons.org/licenses/by-sa/3.0'>CC BY SA</a>.",apple:"Map data &copy; 2012  Apple, Imagery &copy; 2012 Apple"},map_providers:{toner:{url:"//{S}tile.stamen.com/toner/{Z}/{X}/{Y}.png",minZoom:0,maxZoom:20,attribution:"stamen"},"toner-lines":{url:"//{S}tile.stamen.com/toner-lines/{Z}/{X}/{Y}.png",minZoom:0,maxZoom:20,attribution:"stamen"},"toner-labels":{url:"//{S}tile.stamen.com/toner-labels/{Z}/{X}/{Y}.png",minZoom:0,maxZoom:20,attribution:"stamen"},sterrain:{url:"//{S}tile.stamen.com/terrain/{Z}/{X}/{Y}.jpg",minZoom:4,maxZoom:20,attribution:"stamen"},apple:{url:"//gsp2.apple.com/tile?api=1&style=slideshow&layers=default&lang=en_US&z={z}&x={x}&y={y}&v=9",minZoom:4,maxZoom:14,attribution:"apple"},watercolor:{url:"//{S}tile.stamen.com/watercolor/{Z}/{X}/{Y}.jpg",minZoom:3,maxZoom:16,attribution:"stamen"}}},googleplus:{get:function(e){var t={user:e.user,activity:e.id,id:e.uid};VMM.master_config.googleplus.que.push(t),VMM.master_config.googleplus.active=!0},create:function(e,t){var i,a,n="",r="",o="",s="",l="";googleplus_timeout=setTimeout(VMM.ExternalAPI.googleplus.errorTimeOut,VMM.master_config.timers.api,e),callback_timeout=setTimeout(t,VMM.master_config.timers.api,e),r=""!=VMM.master_config.Timeline.api_keys.google?VMM.master_config.Timeline.api_keys.google:Aes.Ctr.decrypt(VMM.master_config.api_keys_master.google,VMM.master_config.vp,256),i="https://www.googleapis.com/plus/v1/people/"+e.user+"/activities/public?alt=json&maxResults=100&fields=items(id,url)&key="+r,n="GOOGLE PLUS API CALL",VMM.getJSON(i,function(t){for(var i=0;t.items.length>i;i++)if(trace("loop"),t.items[i].url.split("posts/")[1]==e.activity){trace("FOUND IT!!"),o=t.items[i].id,a="https://www.googleapis.com/plus/v1/activities/"+o+"?alt=json&key="+r,VMM.getJSON(a,function(t){if(trace(t),t.annotation!==void 0?(s+="<div class='googleplus-annotation'>'"+t.annotation+"</div>",s+=t.object.content):s+=t.object.content,t.object.attachments!==void 0){for(var i=0;t.object.attachments.length>i;i++)"photo"==t.object.attachments[i].objectType?l="<a href='"+t.object.url+"' target='_blank'>"+"<img src='"+t.object.attachments[i].image.url+"' class='article-thumb'></a>"+l:"video"==t.object.attachments[i].objectType?(l="<img src='"+t.object.attachments[i].image.url+"' class='article-thumb'>"+l,l+="<div>",l+="<a href='"+t.object.attachments[i].url+"' target='_blank'>",l+="<h5>"+t.object.attachments[i].displayName+"</h5>",l+="</a>",l+="</div>"):"article"==t.object.attachments[i].objectType&&(l+="<div>",l+="<a href='"+t.object.attachments[i].url+"' target='_blank'>",l+="<h5>"+t.object.attachments[i].displayName+"</h5>",l+="<p>"+t.object.attachments[i].content+"</p>",l+="</a>",l+="</div>"),trace(t.object.attachments[i]);l="<div class='googleplus-attachments'>"+l+"</div>"}n="<div class='googleplus-content'>"+s+l+"</div>",n+="<div class='vcard author'><a class='screen-name url' href='"+t.url+"' target='_blank'>",n+="<span class='avatar'><img src='"+t.actor.image.url+"' style='max-width: 32px; max-height: 32px;'></span>",n+="<span class='fn'>"+t.actor.displayName+"</span>",n+="<span class='nickname'><span class='thumbnail-inline'></span></span>",n+="</a></div>",VMM.attachElement("#googleplus_"+e.activity,n)});break}}).error(function(t){var i=VMM.parseJSON(t.responseText);trace(i.error.message),VMM.attachElement("#googleplus_"+e.activity,VMM.MediaElement.loadingmessage("<p>ERROR LOADING GOOGLE+ </p><p>"+i.error.message+"</p>"))}).success(function(){clearTimeout(googleplus_timeout),clearTimeout(callback_timeout),t()})},pushQue:function(){VMM.master_config.googleplus.que.length>0&&(VMM.ExternalAPI.googleplus.create(VMM.master_config.googleplus.que[0],VMM.ExternalAPI.googleplus.pushQue),VMM.master_config.googleplus.que.remove(0))},errorTimeOut:function(e){trace("GOOGLE+ JSON ERROR TIMEOUT "+e.activity),VMM.attachElement("#googleplus_"+e.activity,VMM.MediaElement.loadingmessage("<p>Still waiting on GOOGLE+ </p><p>"+e.activity+"</p>"))}},googledocs:{get:function(e){VMM.master_config.googledocs.que.push(e),VMM.master_config.googledocs.active=!0},create:function(e){var t="";t=e.id.match(/docs.google.com/i)?"<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+e.id+"&amp;embedded=true'></iframe>":"<iframe class='doc' frameborder='0' width='100%' height='100%' src='//docs.google.com/viewer?url="+e.id+"&amp;embedded=true'></iframe>",VMM.attachElement("#"+e.uid,t)},pushQue:function(){for(var e=0;VMM.master_config.googledocs.que.length>e;e++)VMM.ExternalAPI.googledocs.create(VMM.master_config.googledocs.que[e]);VMM.master_config.googledocs.que=[]}},flickr:{get:function(e){VMM.master_config.flickr.que.push(e),VMM.master_config.flickr.active=!0},create:function(e,t){var i,a=setTimeout(t,VMM.master_config.timers.api,e);i=VMM.master_config.Timeline!==void 0&&""!=VMM.master_config.Timeline.api_keys.flickr?VMM.master_config.Timeline.api_keys.flickr:Aes.Ctr.decrypt(VMM.master_config.api_keys_master.flickr,VMM.master_config.vp,256);var n="//api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key="+i+"&photo_id="+e.id+"&format=json&jsoncallback=?";VMM.getJSON(n,function(t){var i,a,n=(t.sizes.size[0].url.split("photos/")[1].split("/")[1],"#"+e.uid),r="#"+e.uid+"_thumb",o=!1,s="Large";s=VMM.ExternalAPI.flickr.sizes(VMM.master_config.sizes.api.height);for(var l=0;t.sizes.size.length>l;l++)t.sizes.size[l].label==s&&(o=!0,i=t.sizes.size[l].source);o||(i=t.sizes.size[t.sizes.size.length-2].source),a=t.sizes.size[0].source,VMM.Lib.attr(n,"src",i),VMM.attachElement(r,"<img src='"+a+"'>")}).error(function(e,t){trace("FLICKR error"),trace("FLICKR ERROR: "+t+" "+e.responseText)}).success(function(){clearTimeout(a),t()})},pushQue:function(){VMM.master_config.flickr.que.length>0&&(VMM.ExternalAPI.flickr.create(VMM.master_config.flickr.que[0],VMM.ExternalAPI.flickr.pushQue),VMM.master_config.flickr.que.remove(0))},sizes:function(e){var t="";return t=75>=e?"Thumbnail":180>=e?"Small":240>=e?"Small 320":375>=e?"Medium":480>=e?"Medium 640":600>=e?"Large":"Large"}},instagram:{get:function(e,t){return t?"//instagr.am/p/"+e.id+"/media/?size=t":"//instagr.am/p/"+e.id+"/media/?size="+VMM.ExternalAPI.instagram.sizes(VMM.master_config.sizes.api.height)},sizes:function(e){var t="";return t=150>=e?"t":306>=e?"m":"l"}},soundcloud:{get:function(e){VMM.master_config.soundcloud.que.push(e),VMM.master_config.soundcloud.active=!0},create:function(e,t){var i="//soundcloud.com/oembed?url="+e.id+"&format=js&callback=?";VMM.getJSON(i,function(i){VMM.attachElement("#"+e.uid,i.html),t()})},pushQue:function(){VMM.master_config.soundcloud.que.length>0&&(VMM.ExternalAPI.soundcloud.create(VMM.master_config.soundcloud.que[0],VMM.ExternalAPI.soundcloud.pushQue),VMM.master_config.soundcloud.que.remove(0))}},wikipedia:{get:function(e){VMM.master_config.wikipedia.que.push(e),VMM.master_config.wikipedia.active=!0},create:function(e,t){var i="//"+e.lang+".wikipedia.org/w/api.php?action=query&prop=extracts&redirects=&titles="+e.id+"&exintro=1&format=json&callback=?";if(callback_timeout=setTimeout(t,VMM.master_config.timers.api,e),"Explorer"==VMM.Browser.browser&&parseInt(VMM.Browser.version,10)>=7&&window.XDomainRequest){var a="<h4><a href='http://"+VMM.master_config.language.api.wikipedia+".wikipedia.org/wiki/"+e.id+"' target='_blank'>"+e.url+"</a></h4>";a+="<span class='wiki-source'>"+VMM.master_config.language.messages.wikipedia+"</span>",a+="<p>Wikipedia entry unable to load using Internet Explorer 8 or below.</p>",VMM.attachElement("#"+e.uid,a)}VMM.getJSON(i,function(t){if(t.query){var i,a,n="",r="",o=1,s=[];i=VMM.Util.getObjectAttributeByIndex(t.query.pages,0).extract,a=VMM.Util.getObjectAttributeByIndex(t.query.pages,0).title,i.match("<p>")?s=i.split("<p>"):s.push(i);for(var l=0;s.length>l;l++)o>=l+1&&s.length>l+1&&(r+="<p>"+s[l+1]);n="<h4><a href='http://"+VMM.master_config.language.api.wikipedia+".wikipedia.org/wiki/"+a+"' target='_blank'>"+a+"</a></h4>",n+="<span class='wiki-source'>"+VMM.master_config.language.messages.wikipedia+"</span>",n+=VMM.Util.linkify_wikipedia(r),i.match("REDIRECT")||VMM.attachElement("#"+e.uid,n)}}).error(function(i,a,n){trace("WIKIPEDIA error"),trace("WIKIPEDIA ERROR: "+a+" "+i.responseText),trace(n),VMM.attachElement("#"+e.uid,VMM.MediaElement.loadingmessage("<p>Wikipedia is not responding</p>")),clearTimeout(callback_timeout),4>VMM.master_config.wikipedia.tries?(trace("WIKIPEDIA ATTEMPT "+VMM.master_config.wikipedia.tries),trace(e),VMM.master_config.wikipedia.tries++,VMM.ExternalAPI.wikipedia.create(e,t)):t()}).success(function(){VMM.master_config.wikipedia.tries=0,clearTimeout(callback_timeout),t()})},pushQue:function(){VMM.master_config.wikipedia.que.length>0&&(trace("WIKIPEDIA PUSH QUE "+VMM.master_config.wikipedia.que.length),VMM.ExternalAPI.wikipedia.create(VMM.master_config.wikipedia.que[0],VMM.ExternalAPI.wikipedia.pushQue),VMM.master_config.wikipedia.que.remove(0))}},youtube:{get:function(e){var t="//gdata.youtube.com/feeds/api/videos/"+e.id+"?v=2&alt=jsonc&callback=?";VMM.master_config.youtube.que.push(e),VMM.master_config.youtube.active||VMM.master_config.youtube.api_loaded||LoadLib.js("http://www.youtube.com/player_api",function(){trace("YouTube API Library Loaded")}),VMM.getJSON(t,function(t){VMM.ExternalAPI.youtube.createThumb(t,e)})},create:function(e){if(e.start!==void 0){var t=""+e.start,i=0,a=0;t.match("m")?(i=parseInt(t.split("m")[0],10),a=parseInt(t.split("m")[1].split("s")[0],10),e.start=60*i+a):e.start=0}else e.start=0;var n={active:!1,player:{},name:e.uid,playing:!1,hd:!1};e.hd!==void 0&&(n.hd=!0),n.player[e.id]=new YT.Player(e.uid,{height:"390",width:"640",playerVars:{enablejsapi:1,color:"white",showinfo:0,theme:"light",start:e.start,rel:0},videoId:e.id,events:{onReady:VMM.ExternalAPI.youtube.onPlayerReady,onStateChange:VMM.ExternalAPI.youtube.onStateChange}}),VMM.master_config.youtube.array.push(n)},createThumb:function(e,t){if(trace("CREATE THUMB"),trace(e),trace(t),e.data!==void 0){var i="#"+t.uid+"_thumb";VMM.attachElement(i,"<img src='"+e.data.thumbnail.sqDefault+"'>")}},pushQue:function(){for(var e=0;VMM.master_config.youtube.que.length>e;e++)VMM.ExternalAPI.youtube.create(VMM.master_config.youtube.que[e]);VMM.master_config.youtube.que=[]},onAPIReady:function(){VMM.master_config.youtube.active=!0,VMM.ExternalAPI.youtube.pushQue()},stopPlayers:function(){for(var e=0;VMM.master_config.youtube.array.length>e;e++)if(VMM.master_config.youtube.array[e].playing){var t=VMM.master_config.youtube.array[e].name;VMM.master_config.youtube.array[e].player[t].stopVideo()}},onStateChange:function(e){for(var t=0;VMM.master_config.youtube.array.length>t;t++){var i=VMM.master_config.youtube.array[t].name;VMM.master_config.youtube.array[t].player[i]==e.target&&e.data==YT.PlayerState.PLAYING&&(VMM.master_config.youtube.array[t].playing=!0,trace(VMM.master_config.youtube.array[t].hd),VMM.master_config.youtube.array[t].hd)}},onPlayerReady:function(){}},vimeo:{get:function(e){VMM.master_config.vimeo.que.push(e),VMM.master_config.vimeo.active=!0},create:function(e,t){trace("VIMEO CREATE");var i="//vimeo.com/api/v2/video/"+e.id+".json",a="//player.vimeo.com/video/"+e.id+"?title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff";VMM.getJSON(i,function(i){VMM.ExternalAPI.vimeo.createThumb(i,e),t()}),VMM.attachElement("#"+e.uid,"<iframe autostart='false' frameborder='0' width='100%' height='100%' src='"+a+"'></iframe>")},createThumb:function(e,t){trace("VIMEO CREATE THUMB");var i="#"+t.uid+"_thumb";VMM.attachElement(i,"<img src='"+e[0].thumbnail_small+"'>")},pushQue:function(){VMM.master_config.vimeo.que.length>0&&(VMM.ExternalAPI.vimeo.create(VMM.master_config.vimeo.que[0],VMM.ExternalAPI.vimeo.pushQue),VMM.master_config.vimeo.que.remove(0))}},vine:{get:function(e){VMM.master_config.vine.que.push(e),VMM.master_config.vine.active=!0},create:function(e){trace("VINE CREATE");var t="https://vine.co/v/"+e.id+"/embed/simple";VMM.attachElement("#"+e.uid,"<iframe frameborder='0' width='100%' height='100%' src='"+t+"'></iframe><script async src='http://platform.vine.co/static/scripts/embed.js' charset='utf-8'></script>")},pushQue:function(){VMM.master_config.vine.que.length>0&&(VMM.ExternalAPI.vine.create(VMM.master_config.vine.que[0],VMM.ExternalAPI.vine.pushQue),VMM.master_config.vine.que.remove(0))}},webthumb:{get:function(e){VMM.master_config.webthumb.que.push(e),VMM.master_config.webthumb.active=!0},sizes:function(e){var t="";return t=150>=e?"t":306>=e?"m":"l"},create:function(e){trace("WEB THUMB CREATE");var t="//free.pagepeeker.com/v2/thumbs.php?";url=e.id.replace("http://",""),VMM.attachElement("#"+e.uid,"<a href='"+e.id+"' target='_blank'><img src='"+t+"size=x&url="+url+"'></a>"),VMM.attachElement("#"+e.uid+"_thumb","<img src='"+t+"size=t&url="+url+"'>")},pushQue:function(){for(var e=0;VMM.master_config.webthumb.que.length>e;e++)VMM.ExternalAPI.webthumb.create(VMM.master_config.webthumb.que[e]);VMM.master_config.webthumb.que=[]}}}.init()),VMM!==void 0&&VMM.MediaElement===void 0&&(VMM.MediaElement={init:function(){return this},loadingmessage:function(e){return"<div class='vco-loading'><div class='vco-loading-container'><div class='vco-loading-icon'></div><div class='vco-message'><p>"+e+"</p></div></div></div>"},thumbnail:function(e,t,i,a){var n=16,r=24,o="";if(null!=t&&""!=t&&(n=t),null!=i&&""!=i&&(r=i),null!=a&&""!=a&&(o=a),null!=e.media&&""!=e.media){var s="",l=VMM.MediaType(e.media);return null!=e.thumbnail&&""!=e.thumbnail?(trace("CUSTOM THUMB"),s="<div class='thumbnail thumb-custom' id='"+a+"_custom_thumb'><img src='"+e.thumbnail+"'></div>"):s="image"==l.type?"<div class='thumbnail thumb-photo'></div>":"flickr"==l.type?"<div class='thumbnail thumb-photo' id='"+a+"_thumb'></div>":"instagram"==l.type?"<div class='thumbnail thumb-instagram' id='"+a+"_thumb'><img src='"+VMM.ExternalAPI.instagram.get(l.id,!0)+"'></div>":"youtube"==l.type?"<div class='thumbnail thumb-youtube' id='"+a+"_thumb'></div>":"googledoc"==l.type?"<div class='thumbnail thumb-document'></div>":"vimeo"==l.type?"<div class='thumbnail thumb-vimeo' id='"+a+"_thumb'></div>":"vine"==l.type?"<div class='thumbnail thumb-vine'></div>":"dailymotion"==l.type?"<div class='thumbnail thumb-video'></div>":"twitter"==l.type?"<div class='thumbnail thumb-twitter'></div>":"twitter-ready"==l.type?"<div class='thumbnail thumb-twitter'></div>":"soundcloud"==l.type?"<div class='thumbnail thumb-audio'></div>":"google-map"==l.type?"<div class='thumbnail thumb-map'></div>":"googleplus"==l.type?"<div class='thumbnail thumb-googleplus'></div>":"wikipedia"==l.type?"<div class='thumbnail thumb-wikipedia'></div>":"storify"==l.type?"<div class='thumbnail thumb-storify'></div>":"quote"==l.type?"<div class='thumbnail thumb-quote'></div>":"iframe"==l.type?"<div class='thumbnail thumb-video'></div>":"unknown"==l.type?l.id.match("blockquote")?"<div class='thumbnail thumb-quote'></div>":"<div class='thumbnail thumb-plaintext'></div>":"website"==l.type?"<div class='thumbnail thumb-website' id='"+a+"_thumb'></div>":"<div class='thumbnail thumb-plaintext'></div>"}},create:function(e,t){var i=!1,a=VMM.MediaElement.loadingmessage(VMM.master_config.language.messages.loading+"...");if(null!=e.media&&""!=e.media){var n,r="",o="",s="",l="",d=!1;return n=VMM.MediaType(e.media),n.uid=t,i=!0,null!=e.credit&&""!=e.credit&&(s="<div class='credit'>"+VMM.Util.linkify_with_twitter(e.credit,"_blank")+"</div>"),null!=e.caption&&""!=e.caption&&(o="<div class='caption'>"+VMM.Util.linkify_with_twitter(e.caption,"_blank")+"</div>"),"image"==n.type?(n.id.match("https://")&&(n.id=n.id.replace("https://","http://")),r="<div class='media-image media-shadow'><img src='"+n.id+"' class='media-image'></div>"):"flickr"==n.type?(r="<div class='media-image media-shadow'><a href='"+n.link+"' target='_blank'><img id='"+t+"'></a></div>",VMM.ExternalAPI.flickr.get(n)):"instagram"==n.type?r="<div class='media-image media-shadow'><a href='"+n.link+"' target='_blank'><img src='"+VMM.ExternalAPI.instagram.get(n)+"'></a></div>":"googledoc"==n.type?(r="<div class='media-frame media-shadow doc' id='"+n.uid+"'>"+a+"</div>",VMM.ExternalAPI.googledocs.get(n)):"youtube"==n.type?(r="<div class='media-shadow'><div class='media-frame video youtube' id='"+n.uid+"'>"+a+"</div></div>",VMM.ExternalAPI.youtube.get(n)):"vimeo"==n.type?(r="<div class='media-shadow media-frame video vimeo' id='"+n.uid+"'>"+a+"</div>",VMM.ExternalAPI.vimeo.get(n)):"dailymotion"==n.type?r="<div class='media-shadow'><iframe class='media-frame video dailymotion' autostart='false' frameborder='0' width='100%' height='100%' src='http://www.dailymotion.com/embed/video/"+n.id+"'></iframe></div>":"vine"==n.type?(r="<div class='media-shadow media-frame video vine' id='"+n.uid+"'>"+a+"</div>",VMM.ExternalAPI.vine.get(n)):"twitter"==n.type?(r="<div class='twitter' id='"+n.uid+"'>"+a+"</div>",d=!0,VMM.ExternalAPI.twitter.get(n)):"twitter-ready"==n.type?(d=!0,r=n.id):"soundcloud"==n.type?(r="<div class='media-frame media-shadow soundcloud' id='"+n.uid+"'>"+a+"</div>",VMM.ExternalAPI.soundcloud.get(n)):"google-map"==n.type?(r="<div class='media-frame media-shadow map' id='"+n.uid+"'>"+a+"</div>",VMM.ExternalAPI.googlemaps.get(n)):"googleplus"==n.type?(l="googleplus_"+n.id,r="<div class='googleplus' id='"+l+"'>"+a+"</div>",d=!0,VMM.ExternalAPI.googleplus.get(n)):"wikipedia"==n.type?(r="<div class='wikipedia' id='"+n.uid+"'>"+a+"</div>",d=!0,VMM.ExternalAPI.wikipedia.get(n)):"storify"==n.type?(d=!0,r="<div class='plain-text-quote'>"+n.id+"</div>"):"iframe"==n.type?(d=!0,r="<div class='media-shadow'><iframe class='media-frame video' autostart='false' frameborder='0' width='100%' height='100%' src='"+n.id+"'></iframe></div>"):"quote"==n.type?(d=!0,r="<div class='plain-text-quote'>"+n.id+"</div>"):"unknown"==n.type?(trace("NO KNOWN MEDIA TYPE FOUND TRYING TO JUST PLACE THE HTML"),d=!0,r="<div class='plain-text'><div class='container'>"+VMM.Util.properQuotes(n.id)+"</div></div>"):"website"==n.type?(r="<div class='media-shadow website' id='"+n.uid+"'>"+a+"</div>",VMM.ExternalAPI.webthumb.get(n)):(trace("NO KNOWN MEDIA TYPE FOUND"),trace(n.type)),r="<div class='media-container' >"+r+s+o+"</div>",d?"<div class='text-media'><div class='media-wrapper'>"+r+"</div></div>":"<div class='media-wrapper'>"+r+"</div>"}}}.init()),VMM!==void 0&&VMM.MediaType===void 0&&(VMM.MediaType=function(e){var t=e.replace(/^\s\s*/,"").replace(/\s\s*$/,""),i=!1,a={type:"unknown",id:"",start:0,hd:!1,link:"",lang:VMM.Language.lang,uniqueid:VMM.Util.unique_ID(6)};if(t.match("div class='twitter'"))a.type="twitter-ready",a.id=t,i=!0;else if(t.match("(www.)?youtube|youtu.be"))t.match("v=")?a.id=VMM.Util.getUrlVars(t).v:t.match("/embed/")?a.id=t.split("embed/")[1].split(/[?&]/)[0]:t.match(/v\/|v=|youtu\.be\//)?a.id=t.split(/v\/|v=|youtu\.be\//)[1].split(/[?&]/)[0]:trace("YOUTUBE IN URL BUT NOT A VALID VIDEO"),a.start=VMM.Util.getUrlVars(t).t,a.hd=VMM.Util.getUrlVars(t).hd,a.type="youtube",i=!0;else if(t.match("(player.)?vimeo.com"))a.type="vimeo",a.id=t.split(/video\/|\/\/vimeo\.com\//)[1].split(/[?&]/)[0],i=!0;else if(t.match("(www.)?dailymotion.com"))a.id=t.split(/video\/|\/\/dailymotion\.com\//)[1],a.type="dailymotion",i=!0;else if(t.match("(www.)?vine.co"))trace("VINE"),t.match("vine.co/v/")&&(a.id=t.split("vine.co/v/")[1],trace(a.id)),trace(t),a.type="vine",i=!0;else if(t.match("(player.)?soundcloud.com"))a.type="soundcloud",a.id=t,i=!0;else if(t.match("(www.)?twitter.com")&&t.match("status"))a.id=t.match("status/")?t.split("status/")[1]:t.match("statuses/")?t.split("statuses/")[1]:"",a.type="twitter",i=!0;else if(t.match("maps.google")&&!t.match("staticmap"))a.type="google-map",a.id=t.split(/src=['|"][^'|"]*?['|"]/gi),i=!0;else if(t.match("plus.google"))a.type="googleplus",a.id=t.split("/posts/")[1],a.user=t.split("/posts/")[0].match("u/0/")?t.split("u/0/")[1].split("/posts")[0]:t.split("google.com/")[1].split("/posts/")[0],i=!0;else if(t.match("flickr.com/photos"))a.type="flickr",a.id=t.split("photos/")[1].split("/")[1],a.link=t,i=!0;else if(t.match("instagr.am/p/"))a.type="instagram",a.link=t,a.id=t.split("/p/")[1].split("/")[0],i=!0;else if(t.match(/jpg|jpeg|png|gif/i)||t.match("staticmap")||t.match("yfrog.com")||t.match("twitpic.com"))a.type="image",a.id=t,i=!0;else if(VMM.FileExtention.googleDocType(t))a.type="googledoc",a.id=t,i=!0;else if(t.match("(www.)?wikipedia.org")){a.type="wikipedia";var n=t.split("wiki/")[1].split("#")[0].replace("_"," ");a.id=n.replace(" ","%20"),a.lang=t.split("//")[1].split(".wikipedia")[0],i=!0}else 0==t.indexOf("http://")?(a.type="website",a.id=t,i=!0):t.match("storify")?(a.type="storify",a.id=t,i=!0):t.match("blockquote")?(a.type="quote",a.id=t,i=!0):t.match("iframe")?(a.type="iframe",trace("IFRAME"),trace(t.match(/src\=([^\s]*)\s/)[1].split(/"/)[1]),a.id=t.match(/src\=([^\s]*)\s/)[1].split(/"/)[1],i=!0):(trace("unknown media"),a.type="unknown",a.id=t,i=!0);return i?a:(trace("No valid media id detected"),trace(t),!1)}),VMM!==void 0&&VMM.TextElement===void 0&&(VMM.TextElement={init:function(){return this},create:function(e){return e}}.init()),VMM!==void 0&&VMM.DragSlider===void 0&&(VMM.DragSlider=function(){function e(e,n){VMM.bindEvent(e,i,u.down,{element:n,delement:e}),VMM.bindEvent(e,a,u.up,{element:n,delement:e}),VMM.bindEvent(e,t,u.leave,{element:n,delement:e})}function t(e){return VMM.unbindEvent(e.data.delement,n,u.move),c.touch||e.preventDefault(),e.stopPropagation(),c.sliding?(c.sliding=!1,o(e.data.element,e.data.delement,e),!1):!0
}function i(e){return r(e.data.element,e.data.delement,e),c.touch||e.preventDefault(),!0}function a(e){return c.touch||e.preventDefault(),c.sliding?(c.sliding=!1,o(e.data.element,e.data.delement,e),!1):!0}function n(e){s(e.data.element,e)}function r(e,t,i){c.touch?(trace("IS TOUCH"),VMM.Lib.css(e,"-webkit-transition-duration","0"),c.pagex.start=i.originalEvent.touches[0].screenX,c.pagey.start=i.originalEvent.touches[0].screenY):(c.pagex.start=i.pageX,c.pagey.start=i.pageY),c.left.start=d(e),c.time.start=(new Date).getTime(),VMM.Lib.stop(e),VMM.bindEvent(t,n,u.move,{element:e})}function o(e,t,i){VMM.unbindEvent(t,n,u.move),l(e,i)}function s(e,t){var i;c.sliding=!0,c.touch?(c.pagex.end=t.originalEvent.touches[0].screenX,c.pagey.end=t.originalEvent.touches[0].screenY):(c.pagex.end=t.pageX,c.pagey.end=t.pageY),c.left.end=d(e),i=-(c.pagex.start-c.pagex.end-c.left.start),Math.abs(c.pagey.start)-Math.abs(c.pagey.end)>10&&(trace("SCROLLING Y"),trace(Math.abs(c.pagey.start)-Math.abs(c.pagey.end))),Math.abs(i-c.left.start)>10&&(VMM.Lib.css(e,"left",i),t.preventDefault(),t.stopPropagation())}function l(e){var t={left:c.left.end,left_adjust:0,change:{x:0},time:10*((new Date).getTime()-c.time.start),time_adjust:10*((new Date).getTime()-c.time.start)},i=3e3;c.touch&&(i=6e3),t.change.x=i*(Math.abs(c.pagex.end)-Math.abs(c.pagex.start)),t.left_adjust=Math.round(t.change.x/t.time),t.left=Math.min(t.left+t.left_adjust),c.constraint&&(t.left>c.constraint.left?(t.left=c.constraint.left,t.time>5e3&&(t.time=5e3)):t.left<c.constraint.right&&(t.left=c.constraint.right,t.time>5e3&&(t.time=5e3))),VMM.fireEvent(h,"DRAGUPDATE",[t]),M||t.time>0&&(c.touch?VMM.Lib.animate(e,t.time,"easeOutCirc",{left:t.left}):VMM.Lib.animate(e,t.time,c.ease,{left:t.left}))}function d(e){return parseInt(VMM.Lib.css(e,"left").substring(0,VMM.Lib.css(e,"left").length-2),10)}var c={element:"",element_move:"",constraint:"",sliding:!1,pagex:{start:0,end:0},pagey:{start:0,end:0},left:{start:0,end:0},time:{start:0,end:0},touch:!1,ease:"easeOutExpo"},u={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},m={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},p={down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},h=this,M=!1;this.createPanel=function(t,i,a,n,r){c.element=t,c.element_move=i,null!=r&&""!=r&&(M=r),c.constraint=null!=a&&""!=a?a:!1,c.touch=n?n:!1,trace("TOUCH"+c.touch),u=c.touch?p:m,e(c.element,c.element_move)},this.updateConstraint=function(e){trace("updateConstraint"),c.constraint=e},this.cancelSlide=function(){return VMM.unbindEvent(c.element,n,u.move),!0}}),VMM!==void 0&&VMM.Slider===void 0&&(VMM.Slider=function(e,t){function i(e,t){var i=!0,a=!1;null!=e&&(i=e),null!=t&&(a=t),j=b.slider.width,b.slider.nav.height=VMM.Lib.height(O.prevBtnContainer),b.slider.content.padding="mobile"==VMM.Browser.device||640>=j?10:b.slider.content.padding_default,b.slider.content.width=j-2*b.slider.content.padding,VMM.Lib.width(x,k.length*b.slider.content.width),a&&VMM.Lib.css(E,"left",k[S].leftpos()),m(),p(),VMM.Lib.css(O.nextBtn,"left",j-b.slider.nav.width),VMM.Lib.height(O.prevBtn,b.slider.height),VMM.Lib.height(O.nextBtn,b.slider.height),VMM.Lib.css(O.nextBtnContainer,"top",b.slider.height/2-b.slider.nav.height/2+10),VMM.Lib.css(O.prevBtnContainer,"top",b.slider.height/2-b.slider.nav.height/2+10),VMM.Lib.height(_,b.slider.height),VMM.Lib.width(_,j),i&&h(S,"linear",1),0==S&&VMM.Lib.visible(O.prevBtn,!1)}function a(e,t){trace("DRAG FINISH"),trace(t.left_adjust),trace(b.slider.width/2),0>t.left_adjust?Math.abs(t.left_adjust)>b.slider.width/2?S==k.length-1?M():(h(S+1,"easeOutExpo"),l()):M():Math.abs(t.left_adjust)>b.slider.width/2?0==S?M():(h(S-1,"easeOutExpo"),l()):M()}function n(){S==k.length-1?M():(h(S+1),l())}function r(){0==S?M():(h(S-1),l())}function o(e){switch(e.keyCode){case 39:n(e);break;case 37:r(e)}}function s(){f()}function l(){b.current_slide=S,VMM.fireEvent(I,"UPDATE")}function d(e){var t=0;for(VMM.attachElement(x,""),k=[],t=0;e.length>t;t++){var i=new VMM.Slider.Slide(e[t],x);k.push(i)}}function c(e){var t=0;if(e)u();else{for(t=0;k.length>t;t++)k[t].clearTimers();V=setTimeout(u,b.duration)}}function u(){var e=0;for(e=0;k.length>e;e++)k[e].enqueue=!0;for(e=0;b.preload>e;e++)S+e>k.length-1||(k[S+e].show(),k[S+e].enqueue=!1),0>S-e||(k[S-e].show(),k[S-e].enqueue=!1);if(k.length>50)for(e=0;k.length>e;e++)k[e].enqueue&&k[e].hide();m()}function m(){var e=0,t=".slider-item .layout-text-media .media .media-container ",i=".slider-item .layout-media .media .media-container ",a=".slider-item .media .media-container",n=!1,r={text_media:{width:60*(b.slider.content.width/100),height:b.slider.height-60,video:{width:0,height:0},text:{width:40*(b.slider.content.width/100)-30,height:b.slider.height}},media:{width:b.slider.content.width,height:b.slider.height-110,video:{width:0,height:0}}};for(("mobile"==VMM.Browser.device||641>j)&&(n=!0),VMM.master_config.sizes.api.width=r.media.width,VMM.master_config.sizes.api.height=r.media.height,r.text_media.video=VMM.Util.ratio.fit(r.text_media.width,r.text_media.height,16,9),r.media.video=VMM.Util.ratio.fit(r.media.width,r.media.height,16,9),VMM.Lib.css(".slider-item","width",b.slider.content.width),VMM.Lib.height(".slider-item",b.slider.height),n?(r.text_media.width=b.slider.content.width-2*b.slider.content.padding,r.media.width=b.slider.content.width-2*b.slider.content.padding,r.text_media.height=50*(b.slider.height/100)-50,r.media.height=70*(b.slider.height/100)-40,r.text_media.video=VMM.Util.ratio.fit(r.text_media.width,r.text_media.height,16,9),r.media.video=VMM.Util.ratio.fit(r.media.width,r.media.height,16,9),VMM.Lib.css(".slider-item .layout-text-media .text","width","100%"),VMM.Lib.css(".slider-item .layout-text-media .text","display","block"),VMM.Lib.css(".slider-item .layout-text-media .text .container","display","block"),VMM.Lib.css(".slider-item .layout-text-media .text .container","width",r.media.width),VMM.Lib.css(".slider-item .layout-text-media .text .container .start","width","auto"),VMM.Lib.css(".slider-item .layout-text-media .media","float","none"),VMM.Lib.addClass(".slider-item .content-container","pad-top"),VMM.Lib.css(".slider-item .media blockquote p","line-height","18px"),VMM.Lib.css(".slider-item .media blockquote p","font-size","16px"),VMM.Lib.css(".slider-item","overflow-y","auto")):(VMM.Lib.css(".slider-item .layout-text-media .text","width","40%"),VMM.Lib.css(".slider-item .layout-text-media .text","display","table-cell"),VMM.Lib.css(".slider-item .layout-text-media .text .container","display","table-cell"),VMM.Lib.css(".slider-item .layout-text-media .text .container","width","auto"),VMM.Lib.css(".slider-item .layout-text-media .text .container .start","width",r.text_media.text.width),VMM.Lib.removeClass(".slider-item .content-container","pad-top"),VMM.Lib.css(".slider-item .layout-text-media .media","float","left"),VMM.Lib.css(".slider-item .layout-text-media","display","table"),VMM.Lib.css(".slider-item .media blockquote p","line-height","36px"),VMM.Lib.css(".slider-item .media blockquote p","font-size","28px"),VMM.Lib.css(".slider-item","display","table"),VMM.Lib.css(".slider-item","overflow-y","auto")),VMM.Lib.css(t+".media-frame","max-width",r.text_media.width),VMM.Lib.height(t+".media-frame",r.text_media.height),VMM.Lib.width(t+".media-frame",r.text_media.width),VMM.Lib.css(t+"img","max-height",r.text_media.height),VMM.Lib.css(i+"img","max-height",r.media.height),VMM.Lib.css(t+"img","max-width",r.text_media.width),VMM.Lib.css(t+".avatar img","max-width",32),VMM.Lib.css(t+".avatar img","max-height",32),VMM.Lib.css(i+".avatar img","max-width",32),VMM.Lib.css(i+".avatar img","max-height",32),VMM.Lib.css(t+".article-thumb","max-width","50%"),VMM.Lib.css(i+".article-thumb","max-width",200),VMM.Lib.width(t+".media-frame",r.text_media.video.width),VMM.Lib.height(t+".media-frame",r.text_media.video.height),VMM.Lib.width(i+".media-frame",r.media.video.width),VMM.Lib.height(i+".media-frame",r.media.video.height),VMM.Lib.css(i+".media-frame","max-height",r.media.video.height),VMM.Lib.css(i+".media-frame","max-width",r.media.video.width),VMM.Lib.height(i+".soundcloud",168),VMM.Lib.height(t+".soundcloud",168),VMM.Lib.width(i+".soundcloud",r.media.width),VMM.Lib.width(t+".soundcloud",r.text_media.width),VMM.Lib.css(a+".soundcloud","max-height",168),VMM.Lib.height(t+".map",r.text_media.height),VMM.Lib.width(t+".map",r.text_media.width),VMM.Lib.css(i+".map","max-height",r.media.height),VMM.Lib.width(i+".map",r.media.width),VMM.Lib.height(t+".doc",r.text_media.height),VMM.Lib.width(t+".doc",r.text_media.width),VMM.Lib.height(i+".doc",r.media.height),VMM.Lib.width(i+".doc",r.media.width),VMM.Lib.width(i+".wikipedia",r.media.width),VMM.Lib.width(i+".twitter",r.media.width),VMM.Lib.width(i+".plain-text-quote",r.media.width),VMM.Lib.width(i+".plain-text",r.media.width),VMM.Lib.css(a,"max-width",r.media.width),VMM.Lib.css(t+".caption","max-width",r.text_media.video.width),VMM.Lib.css(i+".caption","max-width",r.media.video.width),e=0;k.length>e;e++)k[e].layout(n),k[e].content_height()>b.slider.height+20?k[e].css("display","block"):k[e].css("display","table")}function p(){var e=0,t=0;for(t=0;k.length>t;t++)e=t*(b.slider.width+b.spacing),k[t].leftpos(e)}function h(e,t,i,a,n){var r,o=b.ease,s=b.duration,l=!1,d=!1,u="";if(VMM.ExternalAPI.youtube.stopPlayers(),S=e,r=k[S].leftpos(),0==S&&(d=!0),S+1>=k.length&&(l=!0),null!=t&&""!=t&&(o=t),null!=i&&""!=i&&(s=i),"mobile"==VMM.Browser.device?(VMM.Lib.visible(O.prevBtn,!1),VMM.Lib.visible(O.nextBtn,!1)):(d?VMM.Lib.visible(O.prevBtn,!1):(VMM.Lib.visible(O.prevBtn,!0),u=VMM.Util.unlinkify(L[S-1].title),"timeline"==b.type?L[S-1].date===void 0?(VMM.attachElement(O.prevDate,u),VMM.attachElement(O.prevTitle,"")):(VMM.attachElement(O.prevDate,VMM.Date.prettyDate(L[S-1].startdate,!1,L[S-1].precisiondate)),VMM.attachElement(O.prevTitle,u)):VMM.attachElement(O.prevTitle,u)),l?VMM.Lib.visible(O.nextBtn,!1):(VMM.Lib.visible(O.nextBtn,!0),u=VMM.Util.unlinkify(L[S+1].title),"timeline"==b.type?L[S+1].date===void 0?(VMM.attachElement(O.nextDate,u),VMM.attachElement(O.nextTitle,"")):(VMM.attachElement(O.nextDate,VMM.Date.prettyDate(L[S+1].startdate,!1,L[S+1].precisiondate)),VMM.attachElement(O.nextTitle,u)):VMM.attachElement(O.nextTitle,u))),a?VMM.Lib.css(E,"left",-(r-b.slider.content.padding)):(VMM.Lib.stop(E),VMM.Lib.animate(E,s,o,{left:-(r-b.slider.content.padding)})),n&&VMM.fireEvent(I,"LOADED"),k[S].height()>b.slider_height)VMM.Lib.css(".slider","overflow-y","scroll");else{VMM.Lib.css(I,"overflow-y","hidden");var m=0;try{m=VMM.Lib.prop(I,"scrollHeight"),VMM.Lib.animate(I,s,o,{scrollTop:m-VMM.Lib.height(I)})}catch(p){m=VMM.Lib.height(I)}}c(),VMM.fireEvent(w,"MESSAGE","TEST")}function M(){VMM.Lib.stop(E),VMM.Lib.animate(E,b.duration,"easeOutExpo",{left:-k[S].leftpos()+b.slider.content.padding})}function g(e,t){trace("showMessege "+t),VMM.attachElement(A,"<div class='vco-explainer'><div class='vco-explainer-container'><div class='vco-bezel'><div class='vco-gesture-icon'></div><div class='vco-message'><p>"+t+"</p></div></div></div></div>")}function f(){VMM.Lib.detach(A)}function v(){var e="<div class='icon'>&nbsp;</div>";O.nextBtn=VMM.appendAndGetElement(w,"<div>","nav-next"),O.prevBtn=VMM.appendAndGetElement(w,"<div>","nav-previous"),O.nextBtnContainer=VMM.appendAndGetElement(O.nextBtn,"<div>","nav-container",e),O.prevBtnContainer=VMM.appendAndGetElement(O.prevBtn,"<div>","nav-container",e),"timeline"==b.type&&(O.nextDate=VMM.appendAndGetElement(O.nextBtnContainer,"<div>","date",""),O.prevDate=VMM.appendAndGetElement(O.prevBtnContainer,"<div>","date","")),O.nextTitle=VMM.appendAndGetElement(O.nextBtnContainer,"<div>","title",""),O.prevTitle=VMM.appendAndGetElement(O.prevBtnContainer,"<div>","title",""),VMM.bindEvent(".nav-next",n),VMM.bindEvent(".nav-previous",r),VMM.bindEvent(window,o,"keydown")}function y(){var e=3e3;VMM.attachElement(I,""),w=VMM.getElement(I),_=VMM.appendAndGetElement(w,"<div>","slider-container-mask"),E=VMM.appendAndGetElement(_,"<div>","slider-container"),x=VMM.appendAndGetElement(E,"<div>","slider-item-container"),v(),d(L),("tablet"==VMM.Browser.device||"mobile"==VMM.Browser.device)&&(b.duration=500,e=1e3,T=new VMM.DragSlider,T.createPanel(w,E,"",b.touch,!0),VMM.bindEvent(T,a,"DRAGUPDATE"),A=VMM.appendAndGetElement(_,"<div>","vco-feedback",""),g(null,"Swipe to Navigate"),VMM.Lib.height(A,b.slider.height),VMM.bindEvent(A,s),VMM.bindEvent(A,s,"touchend")),i(!1,!0),VMM.Lib.visible(O.prevBtn,!1),h(b.current_slide,"easeOutExpo",e,!0,!0),C=!0}var b,V,w,_,E,x,T,A,L=[],k=[],D=[],S=0,j=960,C=!1,I=e,O={nextBtn:"",prevBtn:"",nextDate:"",prevDate:"",nextTitle:"",prevTitle:""};b=t!==void 0?t:{preload:4,current_slide:0,interval:10,something:0,width:720,height:400,ease:"easeInOutExpo",duration:1e3,timeline:!1,spacing:15,slider:{width:720,height:400,content:{width:720,height:400,padding:120,padding_default:120},nav:{width:100,height:200}}},this.ver="0.6",b.slider.width=b.width,b.slider.height=b.height,this.init=function(e){k=[],D=[],e!==void 0?this.setData(e):trace("WAITING ON DATA")},this.width=function(e){return null==e||""==e?b.slider.width:(b.slider.width=e,i(),void 0)},this.height=function(e){return null==e||""==e?b.slider.height:(b.slider.height=e,i(),void 0)},this.setData=function(e){e!==void 0?(L=e,y()):trace("NO DATA")},this.getData=function(){return L},this.setConfig=function(e){e!==void 0?b=e:trace("NO CONFIG DATA")},this.getConfig=function(){return b},this.setSize=function(e,t){null!=e&&(b.slider.width=e),null!=t&&(b.slider.height=t),C&&i()},this.active=function(){return C},this.getCurrentNumber=function(){return S},this.setSlide=function(e){h(e)}}),VMM.Slider!==void 0&&(VMM.Slider.Slide=function(e,t){var i,a,n,r,o,s,l=e,o="",d=!1,c=!1,u=!1,m=!0,p=!1,h="slide_",M={pushque:"",render:"",relayout:"",remove:"",skinny:!1},g={pushque:500,render:100,relayout:100,remove:3e4};h+=l.uniqueid,this.enqueue=m,this.id=h,o=VMM.appendAndGetElement(t,"<div>","slider-item"),l.classname!==void 0?(trace("HAS CLASSNAME"),VMM.Lib.addClass(o,l.classname)):(trace("NO CLASSNAME"),trace(l)),s={slide:"",text:"",media:"",media_element:"",layout:"content-container layout",has:{headline:!1,text:!1,media:!1}},this.show=function(e){m=!1,M.skinny=e,p=!1,clearTimeout(M.remove),d||(c?(clearTimeout(M.relayout),M.relayout=setTimeout(y,g.relayout)):f(e))},this.hide=function(){d&&!p&&(p=!0,clearTimeout(M.remove),M.remove=setTimeout(v,g.remove))},this.clearTimers=function(){clearTimeout(M.relayout),clearTimeout(M.pushque),clearTimeout(M.render)},this.layout=function(e){d&&c&&b(e)},this.elem=function(){return o},this.position=function(){return VMM.Lib.position(o)},this.leftpos=function(e){return e===void 0?VMM.Lib.position(o).left:(VMM.Lib.css(o,"left",e),void 0)},this.animate=function(e,t,i){VMM.Lib.animate(o,e,t,i)},this.css=function(e,t){VMM.Lib.css(o,e,t)},this.opacity=function(e){VMM.Lib.css(o,"opacity",e)},this.width=function(){return VMM.Lib.width(o)},this.height=function(){return VMM.Lib.height(o)},this.content_height=function(){var e=VMM.Lib.find(o,".content")[0];return"undefined"!=e&&null!=e?VMM.Lib.height(e):0};var f=function(e){trace("RENDER "+h),d=!0,c=!0,M.skinny=e,V(),clearTimeout(M.pushque),clearTimeout(M.render),M.pushque=setTimeout(VMM.ExternalAPI.pushQues,g.pushque)},v=function(){trace("REMOVE SLIDE TIMER FINISHED"),d=!1,VMM.Lib.detach(a),VMM.Lib.detach(i)},y=function(){d=!0,b(M.skinny,!0)},b=function(e,t){s.has.text?e?(!u||t)&&(VMM.Lib.removeClass(n,"pad-left"),VMM.Lib.detach(a),VMM.Lib.detach(i),VMM.Lib.append(n,a),VMM.Lib.append(n,i),u=!0):(u||t)&&(VMM.Lib.addClass(n,"pad-left"),VMM.Lib.detach(a),VMM.Lib.detach(i),VMM.Lib.append(n,i),VMM.Lib.append(n,a),u=!1):t&&(s.has.headline&&(VMM.Lib.detach(a),VMM.Lib.append(n,a)),VMM.Lib.detach(i),VMM.Lib.append(n,i))},V=function(){if(trace("BUILDSLIDE"),r=VMM.appendAndGetElement(o,"<div>","content"),n=VMM.appendAndGetElement(r,"<div>"),null!=l.startdate&&""!=l.startdate&&"date"==type.of(l.startdate)&&"start"!=l.type){var e=VMM.Date.prettyDate(l.startdate,!1,l.precisiondate),t=VMM.Date.prettyDate(l.enddate,!1,l.precisiondate),d="";null!=l.tag&&""!=l.tag&&(d=VMM.createElement("span",l.tag,"slide-tag")),s.text+=e!=t?VMM.createElement("h2",e+" &mdash; "+t+d,"date"):VMM.createElement("h2",e+d,"date")}null!=l.headline&&""!=l.headline&&(s.has.headline=!0,s.text+="start"==l.type?VMM.createElement("h2",VMM.Util.linkify_with_twitter(l.headline,"_blank"),"start"):VMM.createElement("h3",VMM.Util.linkify_with_twitter(l.headline,"_blank"))),null!=l.text&&""!=l.text&&(s.has.text=!0,s.text+=VMM.createElement("p",VMM.Util.linkify_with_twitter(l.text,"_blank"))),(s.has.text||s.has.headline)&&(s.text=VMM.createElement("div",s.text,"container"),a=VMM.appendAndGetElement(n,"<div>","text",VMM.TextElement.create(s.text))),l.needs_slug,null!=l.asset&&""!=l.asset&&null!=l.asset.media&&""!=l.asset.media&&(s.has.media=!0,i=VMM.appendAndGetElement(n,"<div>","media",VMM.MediaElement.create(l.asset,l.uniqueid))),s.has.text&&(s.layout+="-text"),s.has.media&&(s.layout+="-media"),s.has.text?M.skinny?(VMM.Lib.addClass(n,s.layout),u=!0):(VMM.Lib.addClass(n,s.layout),VMM.Lib.addClass(n,"pad-left"),VMM.Lib.detach(a),VMM.Lib.append(n,a)):VMM.Lib.addClass(n,s.layout)}});var Aes={};Aes.cipher=function(e,t){for(var i=4,a=t.length/i-1,n=[[],[],[],[]],r=0;4*i>r;r++)n[r%4][Math.floor(r/4)]=e[r];n=Aes.addRoundKey(n,t,0,i);for(var o=1;a>o;o++)n=Aes.subBytes(n,i),n=Aes.shiftRows(n,i),n=Aes.mixColumns(n,i),n=Aes.addRoundKey(n,t,o,i);n=Aes.subBytes(n,i),n=Aes.shiftRows(n,i),n=Aes.addRoundKey(n,t,a,i);for(var s=Array(4*i),r=0;4*i>r;r++)s[r]=n[r%4][Math.floor(r/4)];return s},Aes.keyExpansion=function(e){for(var t=4,i=e.length/4,a=i+6,n=Array(t*(a+1)),r=Array(4),o=0;i>o;o++){var s=[e[4*o],e[4*o+1],e[4*o+2],e[4*o+3]];n[o]=s}for(var o=i;t*(a+1)>o;o++){n[o]=Array(4);for(var l=0;4>l;l++)r[l]=n[o-1][l];if(0==o%i){r=Aes.subWord(Aes.rotWord(r));for(var l=0;4>l;l++)r[l]^=Aes.rCon[o/i][l]}else i>6&&4==o%i&&(r=Aes.subWord(r));for(var l=0;4>l;l++)n[o][l]=n[o-i][l]^r[l]}return n},Aes.subBytes=function(e,t){for(var i=0;4>i;i++)for(var a=0;t>a;a++)e[i][a]=Aes.sBox[e[i][a]];return e},Aes.shiftRows=function(e,t){for(var i=Array(4),a=1;4>a;a++){for(var n=0;4>n;n++)i[n]=e[a][(n+a)%t];for(var n=0;4>n;n++)e[a][n]=i[n]}return e},Aes.mixColumns=function(e){for(var t=0;4>t;t++){for(var i=Array(4),a=Array(4),n=0;4>n;n++)i[n]=e[n][t],a[n]=128&e[n][t]?283^e[n][t]<<1:e[n][t]<<1;e[0][t]=a[0]^i[1]^a[1]^i[2]^i[3],e[1][t]=i[0]^a[1]^i[2]^a[2]^i[3],e[2][t]=i[0]^i[1]^a[2]^i[3]^a[3],e[3][t]=i[0]^a[0]^i[1]^i[2]^a[3]}return e},Aes.addRoundKey=function(e,t,i,a){for(var n=0;4>n;n++)for(var r=0;a>r;r++)e[n][r]^=t[4*i+r][n];return e},Aes.subWord=function(e){for(var t=0;4>t;t++)e[t]=Aes.sBox[e[t]];return e},Aes.rotWord=function(e){for(var t=e[0],i=0;3>i;i++)e[i]=e[i+1];return e[3]=t,e},Aes.sBox=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],Aes.rCon=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]],Aes.Ctr={},Aes.Ctr.encrypt=function(e,t,i){var a=16;if(128!=i&&192!=i&&256!=i)return"";e=Utf8.encode(e),t=Utf8.encode(t);for(var n=i/8,r=Array(n),o=0;n>o;o++)r[o]=isNaN(t.charCodeAt(o))?0:t.charCodeAt(o);var s=Aes.cipher(r,Aes.keyExpansion(r));s=s.concat(s.slice(0,n-16));for(var l=Array(a),d=(new Date).getTime(),c=d%1e3,u=Math.floor(d/1e3),m=Math.floor(65535*Math.random()),o=0;2>o;o++)l[o]=255&c>>>8*o;for(var o=0;2>o;o++)l[o+2]=255&m>>>8*o;for(var o=0;4>o;o++)l[o+4]=255&u>>>8*o;for(var p="",o=0;8>o;o++)p+=String.fromCharCode(l[o]);for(var h=Aes.keyExpansion(s),M=Math.ceil(e.length/a),g=Array(M),f=0;M>f;f++){for(var v=0;4>v;v++)l[15-v]=255&f>>>8*v;for(var v=0;4>v;v++)l[15-v-4]=f/4294967296>>>8*v;for(var y=Aes.cipher(l,h),b=M-1>f?a:(e.length-1)%a+1,V=Array(b),o=0;b>o;o++)V[o]=y[o]^e.charCodeAt(f*a+o),V[o]=String.fromCharCode(V[o]);g[f]=V.join("")}var w=p+g.join("");return w=Base64.encode(w)},Aes.Ctr.decrypt=function(e,t,i){var a=16;if(128!=i&&192!=i&&256!=i)return"";e=Base64.decode(e),t=Utf8.encode(t);for(var n=i/8,r=Array(n),o=0;n>o;o++)r[o]=isNaN(t.charCodeAt(o))?0:t.charCodeAt(o);var s=Aes.cipher(r,Aes.keyExpansion(r));s=s.concat(s.slice(0,n-16));var l=Array(8);ctrTxt=e.slice(0,8);for(var o=0;8>o;o++)l[o]=ctrTxt.charCodeAt(o);for(var d=Aes.keyExpansion(s),c=Math.ceil((e.length-8)/a),u=Array(c),m=0;c>m;m++)u[m]=e.slice(8+m*a,8+m*a+a);e=u;for(var p=Array(e.length),m=0;c>m;m++){for(var h=0;4>h;h++)l[15-h]=255&m>>>8*h;for(var h=0;4>h;h++)l[15-h-4]=255&(m+1)/4294967296-1>>>8*h;for(var M=Aes.cipher(l,d),g=Array(e[m].length),o=0;e[m].length>o;o++)g[o]=M[o]^e[m].charCodeAt(o),g[o]=String.fromCharCode(g[o]);p[m]=g.join("")}var f=p.join("");return f=Utf8.decode(f)};var Base64={};Base64.code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Base64.encode=function(e,t){t=t===void 0?!1:t;var i,a,n,r,o,s,l,d,c,u,m,p=[],h="",M=Base64.code;if(u=t?e.encodeUTF8():e,c=u.length%3,c>0)for(;3>c++;)h+="=",u+="\0";for(c=0;u.length>c;c+=3)i=u.charCodeAt(c),a=u.charCodeAt(c+1),n=u.charCodeAt(c+2),r=i<<16|a<<8|n,o=63&r>>18,s=63&r>>12,l=63&r>>6,d=63&r,p[c/3]=M.charAt(o)+M.charAt(s)+M.charAt(l)+M.charAt(d);return m=p.join(""),m=m.slice(0,m.length-h.length)+h},Base64.decode=function(e,t){t=t===void 0?!1:t;var i,a,n,r,o,s,l,d,c,u,m=[],p=Base64.code;u=t?e.decodeUTF8():e;for(var h=0;u.length>h;h+=4)r=p.indexOf(u.charAt(h)),o=p.indexOf(u.charAt(h+1)),s=p.indexOf(u.charAt(h+2)),l=p.indexOf(u.charAt(h+3)),d=r<<18|o<<12|s<<6|l,i=255&d>>>16,a=255&d>>>8,n=255&d,m[h/4]=String.fromCharCode(i,a,n),64==l&&(m[h/4]=String.fromCharCode(i,a)),64==s&&(m[h/4]=String.fromCharCode(i));return c=m.join(""),t?c.decodeUTF8():c};var Utf8={};Utf8.encode=function(e){var t=e.replace(/[\u0080-\u07ff]/g,function(e){var t=e.charCodeAt(0);return String.fromCharCode(192|t>>6,128|63&t)});return t=t.replace(/[\u0800-\uffff]/g,function(e){var t=e.charCodeAt(0);return String.fromCharCode(224|t>>12,128|63&t>>6,128|63&t)})},Utf8.decode=function(e){var t=e.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(e){var t=(15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2);return String.fromCharCode(t)});return t=t.replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(e){var t=(31&e.charCodeAt(0))<<6|63&e.charCodeAt(1);return String.fromCharCode(t)})},!function(e){"use strict";var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,i,a){var n,r;this.type=t,this.$element=e(i),this.options=this.getOptions(a),this.enabled=!0,"manual"!=this.options.trigger&&(n="hover"==this.options.trigger?"mouseenter":"focus",r="hover"==this.options.trigger?"mouseleave":"blur",this.$element.on(n,this.options.selector,e.proxy(this.enter,this)),this.$element.on(r,this.options.selector,e.proxy(this.leave,this))),this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,t,this.$element.data()),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var i=e(t.currentTarget)[this.type](this._options).data(this.type);i.options.delay&&i.options.delay.show?(i.hoverState="in",setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show()},leave:function(t){var i=e(t.currentTarget)[this.type](this._options).data(this.type);i.options.delay&&i.options.delay.hide?(i.hoverState="out",setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()},show:function(){var e,t,i,a,n,r,o;if(this.hasContent()&&this.enabled){switch(e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),r="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,t=/in/.test(r),e.remove().css({top:0,left:0,display:"block"}).appendTo(t?this.$element:document.body),i=this.getPosition(t),a=e[0].offsetWidth,n=e[0].offsetHeight,t?r.split(" ")[1]:r){case"bottom":o={top:i.top+i.height,left:i.left+i.width/2-a/2};break;case"top":o={top:i.top-n,left:i.left+i.width/2-a/2};break;case"left":o={top:i.top+i.height/2-n/2,left:i.left-a};break;case"right":o={top:i.top+i.height/2-n/2,left:i.left+i.width}}e.css(o).addClass(r).addClass("in")}},setContent:function(){var e=this.tip();e.find(".timeline-tooltip-inner").html(this.getTitle()),e.removeClass("fade in top bottom left right")},hide:function(){function t(){var t=setTimeout(function(){i.off(e.support.transition.end).remove()},500);i.one(e.support.transition.end,function(){clearTimeout(t),i.remove()})}var i=this.tip();i.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?t():i.remove()},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(t){return e.extend({},t?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var e,t=this.$element,i=this.options;return e=t.attr("data-original-title")||("function"==typeof i.title?i.title.call(t[0]):i.title),e=(""+e).replace(/(^\s*|\s*$)/,"")},tip:function(){return this.$tip=this.$tip||e(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}},e.fn.tooltip=function(i){return this.each(function(){var a=e(this),n=a.data("tooltip"),r="object"==typeof i&&i;n||a.data("tooltip",n=new t(this,r)),"string"==typeof i&&n[i]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,delay:0,selector:!1,placement:"top",trigger:"hover",title:"",template:'<div class="timeline-tooltip"><div class="timeline-tooltip-arrow"></div><div class="timeline-tooltip-inner"></div></div>'}}(window.jQuery),VMM!==void 0&&VMM.StoryJS===void 0&&(VMM.StoryJS=function(){this.init=function(){}}),VMM!==void 0&&VMM.Timeline===void 0&&(VMM.Timeline=function(e,t,i){function a(e){"object"==typeof embed_config&&(timeline_config=embed_config),"object"==typeof timeline_config?(trace("HAS TIMELINE CONFIG"),P=VMM.Util.mergeConfig(P,timeline_config)):"object"==typeof e&&(P=VMM.Util.mergeConfig(P,e)),("mobile"==VMM.Browser.device||"tablet"==VMM.Browser.device)&&(P.touch=!0),P.nav.width=P.width,P.nav.height=200,P.feature.width=P.width,P.feature.height=P.height-P.nav.height,P.nav.zoom.adjust=parseInt(P.start_zoom_adjust,10),VMM.Timeline.Config=P,VMM.master_config.Timeline=VMM.Timeline.Config,this.events=P.events,""!=P.gmap_key&&(P.api_keys.google=P.gmap_key),trace("VERSION "+P.version),j=P.version}function n(){E=VMM.getElement(C),VMM.Lib.addClass(E,"vco-timeline"),VMM.Lib.addClass(E,"vco-storyjs"),x=VMM.appendAndGetElement(E,"<div>","vco-container vco-main"),T=VMM.appendAndGetElement(x,"<div>","vco-feature"),L=VMM.appendAndGetElement(T,"<div>","vco-slider"),k=VMM.appendAndGetElement(x,"<div>","vco-navigation"),A=VMM.appendAndGetElement(E,"<div>","vco-feedback",""),P.language.right_to_left!==void 0&&VMM.Lib.addClass(E,"vco-right-to-left"),D=new VMM.Slider(L,P),S=new VMM.Timeline.TimeNav(k),N?VMM.Lib.width(E,P.width):P.width=VMM.Lib.width(E),R?VMM.Lib.height(E,P.height):P.height=VMM.Lib.height(E),P.touch?VMM.Lib.addClass(E,"vco-touch"):VMM.Lib.addClass(E,"vco-notouch")}function r(e,t){trace("onDataReady"),I=t.timeline,"array"!=type.of(I.era)&&(I.era=[]),_()}function o(){V()}function s(){w(),D.setSize(P.feature.width,P.feature.height),S.setSize(P.width,P.height),f()&&M()}function l(){P.loaded.slider=!0,d()}function d(){P.loaded.percentloaded=P.loaded.percentloaded+25,P.loaded.slider&&P.loaded.timenav&&y()}function c(){P.loaded.timenav=!0,d()}function u(){q=!0,P.current_slide=D.getCurrentNumber(),h(P.current_slide),S.setMarker(P.current_slide,P.ease,P.duration)}function m(){q=!0,P.current_slide=S.getCurrentNumber(),h(P.current_slide),D.setSlide(P.current_slide)}function p(e){O.length-1>=e&&e>=0&&(P.current_slide=e,D.setSlide(P.current_slide),S.setMarker(P.current_slide,P.ease,P.duration))}function h(e){P.hash_bookmark&&(window.location.hash="#"+(""+e))}function M(){var e="",t=g(window.orientation);"mobile"==VMM.Browser.device?e="portrait"==t?"width=device-width; initial-scale=0.5, maximum-scale=0.5":"landscape"==t?"width=device-width; initial-scale=0.5, maximum-scale=0.5":"width=device-width, initial-scale=1, maximum-scale=1.0":"tablet"==VMM.Browser.device,document.getElementById("viewport")}function g(e){var t="";return t=0==e||180==e?"portrait":90==e||-90==e?"landscape":"normal"}function f(){var e=g(window.orientation);return e==P.orientation?!1:(P.orientation=e,!0)}function v(e,t,i){trace("showMessege "+t),i?VMM.attachElement(A,t):VMM.attachElement(A,VMM.MediaElement.loadingmessage(t))}function y(){VMM.Lib.animate(A,P.duration,4*P.ease,{opacity:0},b)}function b(){VMM.Lib.detach(A)}function V(){parseInt(P.start_at_slide)>0&&0==P.current_slide&&(P.current_slide=parseInt(P.start_at_slide)),P.start_at_end&&0==P.current_slide&&(P.current_slide=O.length-1),U?(U=!0,VMM.fireEvent(global,P.events.messege,"Internet Explorer "+VMM.Browser.version+" is not supported by TimelineJS. Please update your browser to version 8 or higher.")):(b(),s(),VMM.bindEvent(L,l,"LOADED"),VMM.bindEvent(k,c,"LOADED"),VMM.bindEvent(L,u,"UPDATE"),VMM.bindEvent(k,m,"UPDATE"),D.init(O),S.init(O,I.era),VMM.bindEvent(global,s,P.events.resize))}function w(){trace("UPDATE SIZE"),P.width=VMM.Lib.width(E),P.height=VMM.Lib.height(E),P.nav.width=P.width,P.feature.width=P.width,P.feature.height=P.height-P.nav.height-3,"mobile"==VMM.Browser.device,641>P.width?VMM.Lib.addClass(E,"vco-skinny"):VMM.Lib.removeClass(E,"vco-skinny")}function _(){O=[],VMM.fireEvent(global,P.events.messege,"Building Dates"),w();for(var e=0;I.date.length>e;e++)if(null!=I.date[e].startDate&&""!=I.date[e].startDate){var t={},i=VMM.Date.parse(I.date[e].startDate,!0);t.startdate=i.date,t.precisiondate=i.precision,isNaN(t.startdate)||(t.enddate=null!=I.date[e].endDate&&""!=I.date[e].endDate?VMM.Date.parse(I.date[e].endDate):t.startdate,t.needs_slug=!1,""==I.date[e].headline&&null!=I.date[e].slug&&""!=I.date[e].slug&&(t.needs_slug=!0),t.title=I.date[e].headline,t.headline=I.date[e].headline,t.type=I.date[e].type,t.date=VMM.Date.prettyDate(t.startdate,!1,t.precisiondate),t.asset=I.date[e].asset,t.fulldate=t.startdate.getTime(),t.text=I.date[e].text,t.content="",t.tag=I.date[e].tag,t.slug=I.date[e].slug,t.uniqueid=VMM.Util.unique_ID(7),t.classname=I.date[e].classname,O.push(t))}if("storify"!=I.type&&O.sort(function(e,t){return e.fulldate-t.fulldate}),null!=I.headline&&""!=I.headline&&null!=I.text&&""!=I.text){var a,i,n,t={};I.startDate!==void 0?(i=VMM.Date.parse(I.startDate,!0),a=i.date):a=!1,trace("HAS STARTPAGE"),trace(a),a&&O[0].startdate>a?t.startdate=new Date(a):(n=O[0].startdate,t.startdate=new Date(O[0].startdate),0===n.getMonth()&&1==n.getDate()&&0===n.getHours()&&0===n.getMinutes()?t.startdate.setFullYear(n.getFullYear()-1):1>=n.getDate()&&0===n.getHours()&&0===n.getMinutes()?t.startdate.setMonth(n.getMonth()-1):0===n.getHours()&&0===n.getMinutes()?t.startdate.setDate(n.getDate()-1):0===n.getMinutes()?t.startdate.setHours(n.getHours()-1):t.startdate.setMinutes(n.getMinutes()-1)),t.uniqueid=VMM.Util.unique_ID(7),t.enddate=t.startdate,t.precisiondate=i.precision,t.title=I.headline,t.headline=I.headline,t.text=I.text,t.type="start",t.date=VMM.Date.prettyDate(I.startDate,!1,t.precisiondate),t.asset=I.asset,t.slug=!1,t.needs_slug=!1,t.fulldate=t.startdate.getTime(),P.embed&&VMM.fireEvent(global,P.events.headline,t.headline),O.unshift(t)
}"storify"!=I.type&&O.sort(function(e,t){return e.fulldate-t.fulldate}),o()}var E,x,T,A,L,k,D,S,j="2.x",C="#timelinejs",I={},O=[],P={},N=!1,R=!1,U=!1,q=!1;if(C="string"==type.of(e)?e.match("#")?e:"#"+e:"#timelinejs",P={embed:!1,events:{data_ready:"DATAREADY",messege:"MESSEGE",headline:"HEADLINE",slide_change:"SLIDE_CHANGE",resize:"resize"},id:C,source:"nothing",type:"timeline",touch:!1,orientation:"normal",maptype:"toner",version:"2.x",preload:4,current_slide:0,hash_bookmark:!1,start_at_end:!1,start_at_slide:0,start_zoom_adjust:0,start_page:!1,api_keys:{google:"",flickr:"",twitter:""},interval:10,something:0,width:960,height:540,spacing:15,loaded:{slider:!1,timenav:!1,percentloaded:0},nav:{start_page:!1,interval_width:200,density:4,minor_width:0,minor_left:0,constraint:{left:0,right:0,right_min:0,right_max:0},zoom:{adjust:0},multiplier:{current:6,min:.1,max:50},rows:[1,1,1],width:960,height:200,marker:{width:150,height:50}},feature:{width:960,height:540},slider:{width:720,height:400,content:{width:720,height:400,padding:130,padding_default:130},nav:{width:100,height:200}},ease:"easeInOutExpo",duration:1e3,gmap_key:"",language:VMM.Language},null!=t&&""!=t&&(P.width=t,N=!0),null!=i&&""!=i&&(P.height=i,R=!0),window.location.hash){var F=window.location.hash.substring(1);isNaN(F)||(P.current_slide=parseInt(F))}window.onhashchange=function(){var e=window.location.hash.substring(1);P.hash_bookmark?q?p(parseInt(e)):q=!1:p(parseInt(e))},this.init=function(e,t){trace("INIT"),M(),a(e),n(),"string"==type.of(t)&&(P.source=t),VMM.Date.setLanguage(P.language),VMM.master_config.language=P.language,VMM.ExternalAPI.setKeys(P.api_keys),VMM.ExternalAPI.googlemaps.setMapType(P.maptype),VMM.bindEvent(global,r,P.events.data_ready),VMM.bindEvent(global,v,P.events.messege),VMM.fireEvent(global,P.events.messege,P.language.messages.loading_timeline),("Explorer"==VMM.Browser.browser||"MSIE"==VMM.Browser.browser)&&7>=parseInt(VMM.Browser.version,10)&&(U=!0),"string"==type.of(P.source)||"object"==type.of(P.source)?VMM.Timeline.DataObj.getData(P.source):VMM.fireEvent(global,P.events.messege,"No data source provided")},this.iframeLoaded=function(){trace("iframeLoaded")},this.reload=function(e){trace("Load new timeline data"+e),VMM.fireEvent(global,P.events.messege,P.language.messages.loading_timeline),I={},VMM.Timeline.DataObj.getData(e),P.current_slide=0,D.setSlide(0),S.setMarker(0,P.ease,P.duration)}},VMM.Timeline.Config={}),VMM.Timeline!==void 0&&VMM.Timeline.TimeNav===void 0&&(VMM.Timeline.TimeNav=function(e,t,a){function n(e){G.nav.constraint.left=G.width/2,G.nav.constraint.right=G.nav.constraint.right_min-G.width/2,Q.updateConstraint(G.nav.constraint),VMM.Lib.css(P,"left",Math.round(G.width/2)+2),VMM.Lib.css(N,"left",Math.round(G.width/2)-8),p(G.current_slide,G.ease,G.duration,!0,e)}function r(){VMM.fireEvent(H,"UPDATE")}function o(){Q.cancelSlide(),G.nav.multiplier.current>G.nav.multiplier.min&&(G.nav.multiplier.current=1>=G.nav.multiplier.current?G.nav.multiplier.current-.25:G.nav.multiplier.current>5?G.nav.multiplier.current>16?Math.round(G.nav.multiplier.current-10):Math.round(G.nav.multiplier.current-4):Math.round(G.nav.multiplier.current-1),0>=G.nav.multiplier.current&&(G.nav.multiplier.current=G.nav.multiplier.min),c())}function s(){Q.cancelSlide(),G.nav.multiplier.current<G.nav.multiplier.max&&(G.nav.multiplier.current=G.nav.multiplier.current>4?G.nav.multiplier.current>16?Math.round(G.nav.multiplier.current+10):Math.round(G.nav.multiplier.current+4):Math.round(G.nav.multiplier.current+1),G.nav.multiplier.current>=G.nav.multiplier.max&&(G.nav.multiplier.current=G.nav.multiplier.max),c())}function l(){Q.cancelSlide(),p(0),r()}function d(e){var t=0,i=0;e||(e=window.event),e.originalEvent&&(e=e.originalEvent),e.wheelDeltaX!==void 0&&(t=e.wheelDeltaY/6,t=Math.abs(e.wheelDeltaX)>Math.abs(e.wheelDeltaY)?e.wheelDeltaX/6:0),t&&(e.preventDefault&&e.preventDefault(),e.returnValue=!1),i=VMM.Lib.position(L).left+t,i>G.nav.constraint.left?i=G.width/2:G.nav.constraint.right>i&&(i=G.nav.constraint.right),VMM.Lib.css(L,"left",i)}function c(){trace("config.nav.multiplier "+G.nav.multiplier.current),b(!0),V(!0),w(j,Z,!0,!0),w(C,K,!0),G.nav.constraint.left=G.width/2,G.nav.constraint.right=G.nav.constraint.right_min-G.width/2,Q.updateConstraint(G.nav.constraint)}function u(e){Q.cancelSlide(),p(e.data.number),r()}function m(e){VMM.Lib.toggleClass(e.data.elem,"zFront")}function p(e,t,i){trace("GO TO MARKER");var a=G.ease,n=G.duration,r=!1,o=!1;et=e,it.left=G.width/2-J[et].pos_left,it.visible.left=Math.abs(it.left)-100,it.visible.right=Math.abs(it.left)+G.width+100,0==et&&(o=!0),et+1==J.length&&(r=!0),null!=t&&""!=t&&(a=t),null!=i&&""!=i&&(n=i);for(var s=0;J.length>s;s++)VMM.Lib.removeClass(J[s].marker,"active");G.start_page&&"start"==J[0].type&&(VMM.Lib.visible(J[0].marker,!1),VMM.Lib.addClass(J[0].marker,"start")),VMM.Lib.addClass(J[et].marker,"active"),VMM.Lib.stop(L),VMM.Lib.animate(L,n,a,{left:it.left})}function h(){var e=0,t=0,i=0,a=[],n=0;for(n=0;J.length>n;n++)if("start"!=W[n].type){var r=y(rt,J[n].relative_pos),e=t;t=r.begin,i=t-e,a.push(i)}return VMM.Util.average(a).mean}function M(){var e=G.nav.multiplier.current,t=0;for(t=0;e>t;t++)75>h()&&G.nav.multiplier.current>1&&(G.nav.multiplier.current=G.nav.multiplier.current-1)}function g(){var e=f(W[0].startdate),t=f(W[W.length-1].enddate);lt.eon.type="eon",lt.eon.first=e.eons,lt.eon.base=Math.floor(e.eons),lt.eon.last=t.eons,lt.eon.number=$.eons,lt.eon.multiplier=at.eons,lt.eon.minor=at.eons,lt.era.type="era",lt.era.first=e.eras,lt.era.base=Math.floor(e.eras),lt.era.last=t.eras,lt.era.number=$.eras,lt.era.multiplier=at.eras,lt.era.minor=at.eras,lt.epoch.type="epoch",lt.epoch.first=e.epochs,lt.epoch.base=Math.floor(e.epochs),lt.epoch.last=t.epochs,lt.epoch.number=$.epochs,lt.epoch.multiplier=at.epochs,lt.epoch.minor=at.epochs,lt.age.type="age",lt.age.first=e.ages,lt.age.base=Math.floor(e.ages),lt.age.last=t.ages,lt.age.number=$.ages,lt.age.multiplier=at.ages,lt.age.minor=at.ages,lt.millenium.type="millenium",lt.millenium.first=e.milleniums,lt.millenium.base=Math.floor(e.milleniums),lt.millenium.last=t.milleniums,lt.millenium.number=$.milleniums,lt.millenium.multiplier=at.millenium,lt.millenium.minor=at.millenium,lt.century.type="century",lt.century.first=e.centuries,lt.century.base=Math.floor(e.centuries),lt.century.last=t.centuries,lt.century.number=$.centuries,lt.century.multiplier=at.century,lt.century.minor=at.century,lt.decade.type="decade",lt.decade.first=e.decades,lt.decade.base=Math.floor(e.decades),lt.decade.last=t.decades,lt.decade.number=$.decades,lt.decade.multiplier=at.decade,lt.decade.minor=at.decade,lt.year.type="year",lt.year.first=e.years,lt.year.base=Math.floor(e.years),lt.year.last=t.years,lt.year.number=$.years,lt.year.multiplier=1,lt.year.minor=at.month,lt.month.type="month",lt.month.first=e.months,lt.month.base=Math.floor(e.months),lt.month.last=t.months,lt.month.number=$.months,lt.month.multiplier=1,lt.month.minor=Math.round(at.week),lt.week.type="week",lt.week.first=e.weeks,lt.week.base=Math.floor(e.weeks),lt.week.last=t.weeks,lt.week.number=$.weeks,lt.week.multiplier=1,lt.week.minor=7,lt.day.type="day",lt.day.first=e.days,lt.day.base=Math.floor(e.days),lt.day.last=t.days,lt.day.number=$.days,lt.day.multiplier=1,lt.day.minor=24,lt.hour.type="hour",lt.hour.first=e.hours,lt.hour.base=Math.floor(e.hours),lt.hour.last=t.hours,lt.hour.number=$.hours,lt.hour.multiplier=1,lt.hour.minor=60,lt.minute.type="minute",lt.minute.first=e.minutes,lt.minute.base=Math.floor(e.minutes),lt.minute.last=t.minutes,lt.minute.number=$.minutes,lt.minute.multiplier=1,lt.minute.minor=60,lt.second.type="decade",lt.second.first=e.seconds,lt.second.base=Math.floor(e.seconds),lt.second.last=t.seconds,lt.second.number=$.seconds,lt.second.multiplier=1,lt.second.minor=10}function f(e){var t={};return t.days=e/nt.day,t.weeks=t.days/nt.week,t.months=t.days/nt.month,t.years=t.months/nt.year,t.hours=t.days*nt.hour,t.minutes=t.days*nt.minute,t.seconds=t.days*nt.second,t.decades=t.years/nt.decade,t.centuries=t.years/nt.century,t.milleniums=t.years/nt.millenium,t.ages=t.years/nt.age,t.epochs=t.years/nt.epoch,t.eras=t.years/nt.era,t.eons=t.years/nt.eon,t}function v(e,t,i){var a,n,r=e.type,o={start:"",end:"",type:r};return a=f(t),o.start=t.months,"eon"==r?o.start=a.eons:"era"==r?o.start=a.eras:"epoch"==r?o.start=a.epochs:"age"==r?o.start=a.ages:"millenium"==r?o.start=t.milleniums:"century"==r?o.start=a.centuries:"decade"==r?o.start=a.decades:"year"==r?o.start=a.years:"month"==r?o.start=a.months:"week"==r?o.start=a.weeks:"day"==r?o.start=a.days:"hour"==r?o.start=a.hours:"minute"==r&&(o.start=a.minutes),"date"==type.of(i)?(n=f(i),o.end=i.months,"eon"==r?o.end=n.eons:"era"==r?o.end=n.eras:"epoch"==r?o.end=n.epochs:"age"==r?o.end=n.ages:"millenium"==r?o.end=i.milleniums:"century"==r?o.end=n.centuries:"decade"==r?o.end=n.decades:"year"==r?o.end=n.years:"month"==r?o.end=n.months:"week"==r?o.end=n.weeks:"day"==r?o.end=n.days:"hour"==r?o.end=n.hours:"minute"==r&&(o.end=n.minutes)):o.end=o.start,o}function y(e,t){return{begin:(t.start-rt.base)*(G.nav.interval_width/G.nav.multiplier.current),end:(t.end-rt.base)*(G.nav.interval_width/G.nav.multiplier.current)}}function b(e){var t=2,i=0,a=-2,n=0,r=150,o=6,s=0,l=G.width,d=[],c=6,u={left:it.visible.left-l,right:it.visible.right+l},m=0,p=0;for(G.nav.minor_width=G.width,VMM.Lib.removeClass(".flag","row1"),VMM.Lib.removeClass(".flag","row2"),VMM.Lib.removeClass(".flag","row3"),m=0;J.length>m;m++){var h,M=J[m],g=y(rt,J[m].relative_pos),f=0,v=!1,b={id:m,pos:0,row:0};if(g.begin=Math.round(g.begin+a),g.end=Math.round(g.end+a),h=Math.round(g.end-g.begin),M.pos_left=g.begin,et==m&&(it.left=G.width/2-g,it.visible.left=Math.abs(it.left),it.visible.right=Math.abs(it.left)+G.width,u.left=it.visible.left-l,u.right=it.visible.right+l),Math.abs(g.begin)>=u.left&&Math.abs(g.begin)<=u.right&&(v=!0),e?(VMM.Lib.stop(M.marker),VMM.Lib.animate(M.marker,G.duration/2,G.ease,{left:g.begin})):(VMM.Lib.stop(M.marker),VMM.Lib.css(M.marker,"left",g.begin)),m==et&&(s=g.begin),h>5&&(VMM.Lib.css(M.lineevent,"height",o),VMM.Lib.css(M.lineevent,"top",r),e?VMM.Lib.animate(M.lineevent,G.duration/2,G.ease,{width:h}):VMM.Lib.css(M.lineevent,"width",h)),X.length>0){for(p=0;X.length>p;p++)G.nav.rows.current.length>p&&M.tag==X[p]&&(t=p,p==G.nav.rows.current.length-1&&(trace("ON LAST ROW"),VMM.Lib.addClass(M.flag,"flag-small-last")));f=G.nav.rows.current[t]}else g.begin-i.begin<G.nav.marker.width+G.spacing?G.nav.rows.current.length-1>t?t++:(t=0,n++):(n=1,t=1),f=G.nav.rows.current[t];i=g,b.pos=g,b.row=t,d.push(b),d.length>c&&d.remove(0),e?(VMM.Lib.stop(M.flag),VMM.Lib.animate(M.flag,G.duration,G.ease,{top:f})):(VMM.Lib.stop(M.flag),VMM.Lib.css(M.flag,"top",f)),G.start_page&&"start"==J[m].type&&VMM.Lib.visible(M.marker,!1),g>G.nav.minor_width&&(G.nav.minor_width=g),G.nav.minor_left>g&&(G.nav.minor_left=g)}e&&(VMM.Lib.stop(L),VMM.Lib.animate(L,G.duration/2,G.ease,{left:G.width/2-s}))}function V(e){var t=0,i=0;for(t=0;Y.length>t;t++){var a=Y[t],n=y(rt,a.relative_pos),r=0,o=0,s=G.nav.marker.height*G.nav.rows.full.length,l=n.end-n.begin;if(""!=a.tag){for(s=G.nav.marker.height*G.nav.rows.full.length/G.nav.rows.current.length,i=0;X.length>i;i++)G.nav.rows.current.length>i&&a.tag==X[i]&&(o=i);r=G.nav.rows.current[o]}else r=-1;e?(VMM.Lib.stop(a.content),VMM.Lib.stop(a.text_content),VMM.Lib.animate(a.content,G.duration/2,G.ease,{top:r,left:n.begin,width:l,height:s}),VMM.Lib.animate(a.text_content,G.duration/2,G.ease,{left:n.begin})):(VMM.Lib.stop(a.content),VMM.Lib.stop(a.text_content),VMM.Lib.css(a.content,"left",n.begin),VMM.Lib.css(a.content,"width",l),VMM.Lib.css(a.content,"height",s),VMM.Lib.css(a.content,"top",r),VMM.Lib.css(a.text_content,"left",n.begin))}}function w(e,t,a,n){var r=0,o=G.width,s={left:it.visible.left-o,right:it.visible.right+o};for(not_too_many=!0,i=0,G.nav.minor_left=0,t.length>100&&(not_too_many=!1,trace("TOO MANY "+t.length)),i=0;t.length>i;i++){var l=t[i].element,d=(t[i].date,t[i].visible),c=y(rt,t[i].relative_pos),u=c.begin,m=t[i].animation,p=!0,h=!1;m.pos=u,m.animate=!1,Math.abs(u)>=s.left&&Math.abs(u)<=s.right&&(h=!0),G.nav.multiplier.current>16&&n?p=!1:65>u-r&&(35>u-r?0==i%4?0==u&&(p=!1):p=!1:VMM.Util.isEven(i)||(p=!1)),p?t[i].is_detached&&(VMM.Lib.append(e,l),t[i].is_detached=!1):(t[i].is_detached=!0,VMM.Lib.detach(l)),d?p?(m.opacity="100",a&&h&&(m.animate=!0)):(m.opacity="0",a&&not_too_many&&(m.animate=!0),t[i].interval_visible=!1):(m.opacity="100",p?(a&&not_too_many?m.animate=!0:a&&h&&(m.animate=!0),t[i].interval_visible=!0):a&&not_too_many&&(m.animate=!0)),r=u,u>G.nav.minor_width&&(G.nav.minor_width=u),G.nav.minor_left>u&&(G.nav.minor_left=u),m.animate?VMM.Lib.animate(l,G.duration/2,G.ease,{opacity:m.opacity,left:m.pos}):(VMM.Lib.css(l,"opacity",m.opacity),VMM.Lib.css(l,"left",u))}G.nav.constraint.right_min=-G.nav.minor_width+G.width,G.nav.constraint.right=G.nav.constraint.right_min+G.width/2,VMM.Lib.css(R,"left",G.nav.minor_left-G.width/2),VMM.Lib.width(R,G.nav.minor_width+G.width+Math.abs(G.nav.minor_left))}function _(e,t,i){var a,n,r=0,o=!0,s=0,l=0,d=Math.ceil(e.number)+2,c={flag:!1,offset:0},u=0;for(VMM.attachElement(i,""),e.date=new Date(W[0].startdate.getFullYear(),0,1,0,0,0),a=e.date.getTimezoneOffset(),u=0;d>u;u++){trace(e.type);var m=!1,p={element:VMM.appendAndGetElement(i,"<div>",e.classname),date:new Date(W[0].startdate.getFullYear(),0,1,0,0,0),visible:!1,date_string:"",type:e.interval_type,relative_pos:0,is_detached:!1,animation:{animate:!1,pos:"",opacity:"100"}};"eon"==e.type?(o&&(n=5e8*Math.floor(W[0].startdate.getFullYear()/5e8)),p.date.setFullYear(n+5e8*r),m=!0):"era"==e.type?(o&&(n=1e8*Math.floor(W[0].startdate.getFullYear()/1e8)),p.date.setFullYear(n+1e8*r),m=!0):"epoch"==e.type?(o&&(n=1e7*Math.floor(W[0].startdate.getFullYear()/1e7)),p.date.setFullYear(n+1e7*r),m=!0):"age"==e.type?(o&&(n=1e6*Math.floor(W[0].startdate.getFullYear()/1e6)),p.date.setFullYear(n+1e6*r),m=!0):"millenium"==e.type?(o&&(n=1e3*Math.floor(W[0].startdate.getFullYear()/1e3)),p.date.setFullYear(n+1e3*r),m=!0):"century"==e.type?(o&&(n=100*Math.floor(W[0].startdate.getFullYear()/100)),p.date.setFullYear(n+100*r),m=!0):"decade"==e.type?(o&&(n=10*Math.floor(W[0].startdate.getFullYear()/10)),p.date.setFullYear(n+10*r),m=!0):"year"==e.type?(o&&(n=W[0].startdate.getFullYear()),p.date.setFullYear(n+r),m=!0):"month"==e.type?(o&&(n=W[0].startdate.getMonth()),p.date.setMonth(n+r)):"week"==e.type?(o&&(n=W[0].startdate.getMonth()),p.date.setMonth(W[0].startdate.getMonth()),p.date.setDate(n+7*r)):"day"==e.type?(o&&(n=W[0].startdate.getDate()),p.date.setMonth(W[0].startdate.getMonth()),p.date.setDate(n+r)):"hour"==e.type?(o&&(n=W[0].startdate.getHours()),p.date.setMonth(W[0].startdate.getMonth()),p.date.setDate(W[0].startdate.getDate()),p.date.setHours(n+r)):"minute"==e.type?(o&&(n=W[0].startdate.getMinutes()),p.date.setMonth(W[0].startdate.getMonth()),p.date.setDate(W[0].startdate.getDate()),p.date.setHours(W[0].startdate.getHours()),p.date.setMinutes(n+r)):"second"==e.type?(o&&(n=W[0].startdate.getSeconds()),p.date.setMonth(W[0].startdate.getMonth()),p.date.setDate(W[0].startdate.getDate()),p.date.setHours(W[0].startdate.getHours()),p.date.setMinutes(W[0].startdate.getMinutes()),p.date.setSeconds(n+r)):"millisecond"==e.type&&(o&&(n=W[0].startdate.getMilliseconds()),p.date.setMonth(W[0].startdate.getMonth()),p.date.setDate(W[0].startdate.getDate()),p.date.setHours(W[0].startdate.getHours()),p.date.setMinutes(W[0].startdate.getMinutes()),p.date.setSeconds(W[0].startdate.getSeconds()),p.date.setMilliseconds(n+r)),"Firefox"==VMM.Browser.browser&&("1970"==p.date.getFullYear()&&p.date.getTimezoneOffset()!=a?(trace("FIREFOX 1970 TIMEZONE OFFSET "+p.date.getTimezoneOffset()+" SHOULD BE "+a),trace(e.type+" "+e.date),c.offset=p.date.getTimezoneOffset()/60,c.flag=!0,p.date.setHours(p.date.getHours()+c.offset)):c.flag&&(c.flag=!1,p.date.setHours(p.date.getHours()+c.offset),m&&(c.flag=!0))),p.date_string=m?0>p.date.getFullYear()?""+Math.abs(p.date.getFullYear())+" B.C.":p.date.getFullYear():VMM.Date.prettyDate(p.date,!0),r+=1,o=!1,p.relative_pos=v(rt,p.date),s=p.relative_pos.begin,p.relative_pos.begin>l&&(l=p.relative_pos.begin),VMM.appendElement(p.element,p.date_string),VMM.Lib.css(p.element,"text-indent",-(VMM.Lib.width(p.element)/2)),VMM.Lib.css(p.element,"opacity","0"),t.push(p)}VMM.Lib.width(R,l),w(i,t)}function E(){var e=0,t=0;if(VMM.attachElement(H,""),L=VMM.appendAndGetElement(H,"<div>","timenav"),k=VMM.appendAndGetElement(L,"<div>","content"),D=VMM.appendAndGetElement(L,"<div>","time"),S=VMM.appendAndGetElement(D,"<div>","time-interval-minor"),R=VMM.appendAndGetElement(S,"<div>","minor"),C=VMM.appendAndGetElement(D,"<div>","time-interval-major"),j=VMM.appendAndGetElement(D,"<div>","time-interval"),I=VMM.appendAndGetElement(H,"<div>","timenav-background"),P=VMM.appendAndGetElement(I,"<div>","timenav-line"),N=VMM.appendAndGetElement(I,"<div>","timenav-indicator"),O=VMM.appendAndGetElement(I,"<div>","timenav-interval-background","<div class='top-highlight'></div>"),U=VMM.appendAndGetElement(H,"<div>","vco-toolbar"),x(),T(),A(),M(),b(!1),V(),w(j,Z,!1,!0),w(C,K),G.start_page&&($backhome=VMM.appendAndGetElement(U,"<div>","back-home","<div class='icon'></div>"),VMM.bindEvent(".back-home",l,"click"),VMM.Lib.attribute($backhome,"title",VMM.master_config.language.messages.return_to_title),VMM.Lib.attribute($backhome,"rel","timeline-tooltip")),Q=new VMM.DragSlider,Q.createPanel(H,L,G.nav.constraint,G.touch),G.touch&&G.start_page?(VMM.Lib.addClass(U,"touch"),VMM.Lib.css(U,"top",55),VMM.Lib.css(U,"left",10)):(G.start_page&&VMM.Lib.css(U,"top",27),q=VMM.appendAndGetElement(U,"<div>","zoom-in","<div class='icon'></div>"),F=VMM.appendAndGetElement(U,"<div>","zoom-out","<div class='icon'></div>"),VMM.bindEvent(q,o,"click"),VMM.bindEvent(F,s,"click"),VMM.Lib.attribute(q,"title",VMM.master_config.language.messages.expand_timeline),VMM.Lib.attribute(q,"rel","timeline-tooltip"),VMM.Lib.attribute(F,"title",VMM.master_config.language.messages.contract_timeline),VMM.Lib.attribute(F,"rel","timeline-tooltip"),U.tooltip({selector:"div[rel=timeline-tooltip]",placement:"right"}),VMM.bindEvent(H,d,"DOMMouseScroll"),VMM.bindEvent(H,d,"mousewheel")),0!=G.nav.zoom.adjust)if(0>G.nav.zoom.adjust)for(e=0;Math.abs(G.nav.zoom.adjust)>e;e++)s();else for(t=0;G.nav.zoom.adjust>t;t++)o();tt=!0,n(!0),VMM.fireEvent(H,"LOADED")}function x(){var e=0,t=0;for($=f(W[W.length-1].enddate-W[0].startdate,!0),trace($),g(),$.centuries>W.length/G.nav.density?(rt=lt.century,ot=lt.millenium,st=lt.decade):$.decades>W.length/G.nav.density?(rt=lt.decade,ot=lt.century,st=lt.year):$.years>W.length/G.nav.density?(rt=lt.year,ot=lt.decade,st=lt.month):$.months>W.length/G.nav.density?(rt=lt.month,ot=lt.year,st=lt.day):$.days>W.length/G.nav.density?(rt=lt.day,ot=lt.month,st=lt.hour):$.hours>W.length/G.nav.density?(rt=lt.hour,ot=lt.day,st=lt.minute):$.minutes>W.length/G.nav.density?(rt=lt.minute,ot=lt.hour,st=lt.second):$.seconds>W.length/G.nav.density?(rt=lt.second,ot=lt.minute,st=lt.second):(trace("NO IDEA WHAT THE TYPE SHOULD BE"),rt=lt.day,ot=lt.month,st=lt.hour),trace("INTERVAL TYPE: "+rt.type),trace("INTERVAL MAJOR TYPE: "+ot.type),_(rt,Z,j),_(ot,K,C),e=0;Z.length>e;e++)for(t=0;K.length>t;t++)Z[e].date_string==K[t].date_string&&VMM.attachElement(Z[e].element,"")}function T(){var e=0,t=0,i=0;for(J=[],Y=[],e=0;W.length>e;e++){var a,n,r,o,s,l,d,c="",p=!1;if(a=VMM.appendAndGetElement(k,"<div>","marker"),n=VMM.appendAndGetElement(a,"<div>","flag"),r=VMM.appendAndGetElement(n,"<div>","flag-content"),o=VMM.appendAndGetElement(a,"<div>","dot"),s=VMM.appendAndGetElement(a,"<div>","line"),l=VMM.appendAndGetElement(s,"<div>","event-line"),_marker_relative_pos=v(rt,W[e].startdate,W[e].enddate),_marker_thumb="",null!=W[e].asset&&""!=W[e].asset?VMM.appendElement(r,VMM.MediaElement.thumbnail(W[e].asset,24,24,W[e].uniqueid)):VMM.appendElement(r,"<div style='margin-right:7px;height:50px;width:2px;float:left;'></div>"),""==W[e].title||" "==W[e].title)if(trace("TITLE NOTHING"),W[e].slug!==void 0&&""!=W[e].slug)trace("SLUG"),c=VMM.Util.untagify(W[e].slug),p=!0;else{var h=VMM.MediaType(W[e].asset.media);"quote"==h.type||"unknown"==h.type?(c=VMM.Util.untagify(h.id),p=!0):p=!1}else""!=W[e].title||" "!=W[e].title?(trace(W[e].title),c=VMM.Util.untagify(W[e].title),p=!0):trace("TITLE SLUG NOT FOUND "+W[e].slug);p?VMM.appendElement(r,"<h3>"+c+"</h3>"):(VMM.appendElement(r,"<h3>"+c+"</h3>"),VMM.appendElement(r,"<h3 id='marker_content_"+W[e].uniqueid+"'>"+c+"</h3>")),VMM.Lib.attr(a,"id",""+("marker_"+W[e].uniqueid)),VMM.bindEvent(n,u,"",{number:e}),VMM.bindEvent(n,m,"mouseenter mouseleave",{number:e,elem:n}),d={marker:a,flag:n,lineevent:l,type:"marker",full:!0,relative_pos:_marker_relative_pos,tag:W[e].tag,pos_left:0},"start"==W[e].type&&(trace("BUILD MARKER HAS START PAGE"),G.start_page=!0,d.type="start"),"storify"==W[e].type&&(d.type="storify"),W[e].tag&&X.push(W[e].tag),J.push(d)}for(X=VMM.Util.deDupeArray(X),G.nav.rows.current=X.length>3?G.nav.rows.half:G.nav.rows.full,t=0;X.length>t;t++)if(G.nav.rows.current.length>t){var M=VMM.appendAndGetElement(I,"<div>","timenav-tag");VMM.Lib.addClass(M,"timenav-tag-row-"+(t+1)),X.length>3?VMM.Lib.addClass(M,"timenav-tag-size-half"):VMM.Lib.addClass(M,"timenav-tag-size-full"),VMM.appendElement(M,"<div><h3>"+X[t]+"</h3></div>")}if(X.length>3)for(i=0;J.length>i;i++)VMM.Lib.addClass(J[i].flag,"flag-small"),J[i].full=!1}function A(){var e=6,t=0,i=0;for(i=0;B.length>i;i++){var a={content:VMM.appendAndGetElement(k,"<div>","era"),text_content:VMM.appendAndGetElement(j,"<div>","era"),startdate:VMM.Date.parse(B[i].startDate),enddate:VMM.Date.parse(B[i].endDate),title:B[i].headline,uniqueid:VMM.Util.unique_ID(6),tag:"",relative_pos:""},n=(VMM.Date.prettyDate(a.startdate),VMM.Date.prettyDate(a.enddate),"<div>&nbsp;</div>");B[i].tag!==void 0&&(a.tag=B[i].tag),a.relative_pos=v(rt,a.startdate,a.enddate),VMM.Lib.attr(a.content,"id",a.uniqueid),VMM.Lib.attr(a.text_content,"id",a.uniqueid+"_text"),VMM.Lib.addClass(a.content,"era"+(t+1)),VMM.Lib.addClass(a.text_content,"era"+(t+1)),e>t?t++:t=0,VMM.appendElement(a.content,n),VMM.appendElement(a.text_content,VMM.Util.unlinkify(a.title)),Y.push(a)}}trace("VMM.Timeline.TimeNav");var L,k,D,S,j,C,I,O,P,N,R,U,q,F,Q,z,B,G=VMM.Timeline.Config,$={},H=e,W=[],Y=[],J=[],Z=[],K=[],X=[],et=0,tt=!1,it={left:"",visible:{left:"",right:""}},at={day:24,month:12,year:10,hour:60,minute:60,second:1e3,decade:10,century:100,millenium:1e3,age:1e6,epoch:1e7,era:1e8,eon:5e8,week:4.34812141,days_in_month:30.4368499,days_in_week:7,weeks_in_month:4.34812141,weeks_in_year:52.177457,days_in_year:365.242199,hours_in_day:24},nt={day:864e5,week:7,month:30.4166666667,year:12,hour:24,minute:1440,second:86400,decade:10,century:100,millenium:1e3,age:1e6,epoch:1e7,era:1e8,eon:5e8},rt={type:"year",number:10,first:1970,last:2011,multiplier:100,classname:"_idd",interval_type:"interval"},ot={type:"year",number:10,first:1970,last:2011,multiplier:100,classname:"major",interval_type:"interval major"},st={type:"year",number:10,first:1970,last:2011,multiplier:100,classname:"_dd_minor",interval_type:"interval minor"},lt={day:{},month:{},year:{},hour:{},minute:{},second:{},decade:{},century:{},millenium:{},week:{},age:{},epoch:{},era:{},eon:{}};z=G.nav.marker.height/2,G.nav.rows={full:[1,2*z,4*z],half:[1,z,2*z,3*z,4*z,5*z],current:[]},null!=t&&""!=t&&(G.nav.width=t),null!=a&&""!=a&&(G.nav.height=a),this.init=function(e,t){trace("VMM.Timeline.TimeNav init"),e!==void 0?this.setData(e,t):trace("WAITING ON DATA")},this.setData=function(e,t){e!==void 0?(W={},W=e,B=t,E()):trace("NO DATA")},this.setSize=function(e,t){null!=e&&(G.width=e),null!=t&&(G.height=t),tt&&n()},this.setMarker=function(e,t,i){p(e,t,i)},this.getCurrentNumber=function(){return et}}),VMM.Timeline!==void 0&&VMM.Timeline.DataObj===void 0&&(VMM.Timeline.DataObj={data_obj:{},model_array:[],getData:function(e){if(VMM.Timeline.DataObj.data_obj={},VMM.fireEvent(global,VMM.Timeline.Config.events.messege,VMM.Timeline.Config.language.messages.loading_timeline),"object"==type.of(e))trace("DATA SOURCE: JSON OBJECT"),VMM.Timeline.DataObj.parseJSON(e);else if("string"==type.of(e))if(e.match("%23"))trace("DATA SOURCE: TWITTER SEARCH"),VMM.Timeline.DataObj.model.tweets.getData("%23medill");else if(e.match("spreadsheet"))trace("DATA SOURCE: GOOGLE SPREADSHEET"),VMM.Timeline.DataObj.model.googlespreadsheet.getData(e);else if(e.match("storify.com"))trace("DATA SOURCE: STORIFY"),VMM.Timeline.DataObj.model.storify.getData(e);else if(e.match(".jsonp"))trace("DATA SOURCE: JSONP"),LoadLib.js(e,VMM.Timeline.DataObj.onJSONPLoaded);else{trace("DATA SOURCE: JSON");var t="";t=e.indexOf("?")>-1?e+"&callback=onJSONP_Data":e+"?callback=onJSONP_Data",VMM.getJSON(t,VMM.Timeline.DataObj.parseJSON)}else"html"==type.of(e)?(trace("DATA SOURCE: HTML"),VMM.Timeline.DataObj.parseHTML(e)):trace("DATA SOURCE: UNKNOWN")},onJSONPLoaded:function(){trace("JSONP IS LOADED"),VMM.fireEvent(global,VMM.Timeline.Config.events.data_ready,storyjs_jsonp_data)},parseHTML:function(){trace("parseHTML"),trace("WARNING: THIS IS STILL ALPHA AND WILL NOT WORK WITH ID's other than #timeline");var e=VMM.Timeline.DataObj.data_template_obj;if(VMM.Lib.find("#timeline section","time")[0]){e.timeline.startDate=VMM.Lib.html(VMM.Lib.find("#timeline section","time")[0]),e.timeline.headline=VMM.Lib.html(VMM.Lib.find("#timeline section","h2")),e.timeline.text=VMM.Lib.html(VMM.Lib.find("#timeline section","article"));var t=!1;0!=VMM.Lib.find("#timeline section","figure img").length?(t=!0,e.timeline.asset.media=VMM.Lib.attr(VMM.Lib.find("#timeline section","figure img"),"src")):0!=VMM.Lib.find("#timeline section","figure a").length&&(t=!0,e.timeline.asset.media=VMM.Lib.attr(VMM.Lib.find("#timeline section","figure a"),"href")),t&&(0!=VMM.Lib.find("#timeline section","cite").length&&(e.timeline.asset.credit=VMM.Lib.html(VMM.Lib.find("#timeline section","cite"))),0!=VMM.Lib.find(this,"figcaption").length&&(e.timeline.asset.caption=VMM.Lib.html(VMM.Lib.find("#timeline section","figcaption"))))}VMM.Lib.each("#timeline li",function(){var t=!1,i={type:"default",startDate:"",headline:"",text:"",asset:{media:"",credit:"",caption:""},tags:"Optional"};if(0!=VMM.Lib.find(this,"time")){t=!0,i.startDate=VMM.Lib.html(VMM.Lib.find(this,"time")[0]),VMM.Lib.find(this,"time")[1]&&(i.endDate=VMM.Lib.html(VMM.Lib.find(this,"time")[1])),i.headline=VMM.Lib.html(VMM.Lib.find(this,"h3")),i.text=VMM.Lib.html(VMM.Lib.find(this,"article"));var a=!1;0!=VMM.Lib.find(this,"figure img").length?(a=!0,i.asset.media=VMM.Lib.attr(VMM.Lib.find(this,"figure img"),"src")):0!=VMM.Lib.find(this,"figure a").length&&(a=!0,i.asset.media=VMM.Lib.attr(VMM.Lib.find(this,"figure a"),"href")),a&&(0!=VMM.Lib.find(this,"cite").length&&(i.asset.credit=VMM.Lib.html(VMM.Lib.find(this,"cite"))),0!=VMM.Lib.find(this,"figcaption").length&&(i.asset.caption=VMM.Lib.html(VMM.Lib.find(this,"figcaption")))),trace(i),e.timeline.date.push(i)}}),VMM.fireEvent(global,VMM.Timeline.Config.events.data_ready,e)},parseJSON:function(e){trace("parseJSON"),"default"==e.timeline.type?(trace("DATA SOURCE: JSON STANDARD TIMELINE"),VMM.fireEvent(global,VMM.Timeline.Config.events.data_ready,e)):"twitter"==e.timeline.type?(trace("DATA SOURCE: JSON TWEETS"),VMM.Timeline.DataObj.model_Tweets.buildData(e)):(trace("DATA SOURCE: UNKNOWN JSON"),trace(type.of(e.timeline)))},model:{googlespreadsheet:{getData:function(e){function t(){i=VMM.getJSON(r,function(e){clearTimeout(o),VMM.Timeline.DataObj.model.googlespreadsheet.buildData(e)}).error(function(e,t){trace("Google Docs ERROR"),trace("Google Docs ERROR: "+t+" "+e.responseText)}).success(function(){clearTimeout(o)})}var i,a,n,r,o,s=0;a=VMM.Util.getUrlVars(e).key,n=VMM.Util.getUrlVars(e).worksheet,n===void 0&&(n="od6"),r="https://spreadsheets.google.com/feeds/list/"+a+"/"+n+"/public/values?alt=json",o=setTimeout(function(){trace("Google Docs timeout "+r),trace(r),3>s?(VMM.fireEvent(global,VMM.Timeline.Config.events.messege,"Still waiting on Google Docs, trying again "+s),s++,i.abort(),t()):VMM.fireEvent(global,VMM.Timeline.Config.events.messege,"Google Docs is not responding")},16e3),t()},buildData:function(e){function t(e){return e!==void 0?e.$t:""}var i=VMM.Timeline.DataObj.data_template_obj,a=!1;if(VMM.fireEvent(global,VMM.Timeline.Config.events.messege,"Parsing Google Doc Data"),e.feed.entry!==void 0){a=!0;for(var n=0;e.feed.entry.length>n;n++){var r=e.feed.entry[n],o="";if(r.gsx$type!==void 0?o=r.gsx$type.$t:r.gsx$titleslide!==void 0&&(o=r.gsx$titleslide.$t),o.match("start")||o.match("title"))i.timeline.startDate=t(r.gsx$startdate),i.timeline.headline=t(r.gsx$headline),i.timeline.asset.media=t(r.gsx$media),i.timeline.asset.caption=t(r.gsx$mediacaption),i.timeline.asset.credit=t(r.gsx$mediacredit),i.timeline.text=t(r.gsx$text),i.timeline.type="google spreadsheet";else if(o.match("era")){var s={startDate:t(r.gsx$startdate),endDate:t(r.gsx$enddate),headline:t(r.gsx$headline),text:t(r.gsx$text),tag:t(r.gsx$tag)};i.timeline.era.push(s)}else{var l={type:"google spreadsheet",startDate:t(r.gsx$startdate),endDate:t(r.gsx$enddate),headline:t(r.gsx$headline),text:t(r.gsx$text),tag:t(r.gsx$tag),asset:{media:t(r.gsx$media),credit:t(r.gsx$mediacredit),caption:t(r.gsx$mediacaption),thumbnail:t(r.gsx$mediathumbnail)}};i.timeline.date.push(l)}}}a?(VMM.fireEvent(global,VMM.Timeline.Config.events.messege,"Finished Parsing Data"),VMM.fireEvent(global,VMM.Timeline.Config.events.data_ready,i)):(VMM.fireEvent(global,VMM.Timeline.Config.events.messege,VMM.Language.messages.loading+" Google Doc Data (cells)"),trace("There may be too many entries. Still trying to load data. Now trying to load cells to avoid Googles limitation on cells"),VMM.Timeline.DataObj.model.googlespreadsheet.getDataCells(e.feed.link[0].href))},getDataCells:function(e){function t(){i=VMM.getJSON(n,function(e){clearTimeout(r),VMM.Timeline.DataObj.model.googlespreadsheet.buildDataCells(e)}).error(function(e,t){trace("Google Docs ERROR"),trace("Google Docs ERROR: "+t+" "+e.responseText)}).success(function(){clearTimeout(r)})}var i,a,n,r,o=0;a=VMM.Util.getUrlVars(e).key,n="https://spreadsheets.google.com/feeds/cells/"+a+"/od6/public/values?alt=json",r=setTimeout(function(){trace("Google Docs timeout "+n),trace(n),3>o?(VMM.fireEvent(global,VMM.Timeline.Config.events.messege,"Still waiting on Google Docs, trying again "+o),o++,i.abort(),t()):VMM.fireEvent(global,VMM.Timeline.Config.events.messege,"Google Docs is not responding")},16e3),t()},buildDataCells:function(e){function t(e){return e!==void 0?e.$t:""}var i=VMM.Timeline.DataObj.data_template_obj,a=!1,n=["timeline"],r=[],o=0,s=0;if(VMM.fireEvent(global,VMM.Timeline.Config.events.messege,VMM.Language.messages.loading_timeline+" Parsing Google Doc Data (cells)"),e.feed.entry!==void 0){for(a=!0,s=0;e.feed.entry.length>s;s++){var l=e.feed.entry[s];parseInt(l.gs$cell.row)>o&&(o=parseInt(l.gs$cell.row))}for(var s=0;o+1>s;s++){var d={type:"",startDate:"",endDate:"",headline:"",text:"",tag:"",asset:{media:"",credit:"",caption:"",thumbnail:""}};r.push(d)}for(s=0;e.feed.entry.length>s;s++){var l=e.feed.entry[s],c="",u={content:t(l.gs$cell),col:l.gs$cell.col,row:l.gs$cell.row,name:""};1==u.row?("Start Date"==u.content?c="startDate":"End Date"==u.content?c="endDate":"Headline"==u.content?c="headline":"Text"==u.content?c="text":"Media"==u.content?c="media":"Media Credit"==u.content?c="credit":"Media Caption"==u.content?c="caption":"Media Thumbnail"==u.content?c="thumbnail":"Type"==u.content?c="type":"Tag"==u.content&&(c="tag"),n.push(c)):(u.name=n[u.col],r[u.row][u.name]=u.content)}for(s=0;r.length>s;s++){var d=r[s];if(d.type.match("start")||d.type.match("title"))i.timeline.startDate=d.startDate,i.timeline.headline=d.headline,i.timeline.asset.media=d.media,i.timeline.asset.caption=d.caption,i.timeline.asset.credit=d.credit,i.timeline.text=d.text,i.timeline.type="google spreadsheet";else if(d.type.match("era")){var m={startDate:d.startDate,endDate:d.endDate,headline:d.headline,text:d.text,tag:d.tag};
i.timeline.era.push(m)}else{var d={type:"google spreadsheet",startDate:d.startDate,endDate:d.endDate,headline:d.headline,text:d.text,tag:d.tag,asset:{media:d.media,credit:d.credit,caption:d.caption,thumbnail:d.thumbnail}};i.timeline.date.push(d)}}}a?(VMM.fireEvent(global,VMM.Timeline.Config.events.messege,"Finished Parsing Data"),VMM.fireEvent(global,VMM.Timeline.Config.events.data_ready,i)):VMM.fireEvent(global,VMM.Timeline.Config.events.messege,"Unable to load Google Doc data source")}},storify:{getData:function(e){var t,i,a;VMM.fireEvent(global,VMM.Timeline.Config.events.messege,"Loading Storify..."),t=e.split("storify.com/")[1],i="//api.storify.com/v1/stories/"+t+"?per_page=300&callback=?",a=setTimeout(function(){trace("STORIFY timeout"),VMM.fireEvent(global,VMM.Timeline.Config.events.messege,"Storify is not responding")},6e3),VMM.getJSON(i,VMM.Timeline.DataObj.model.storify.buildData).error(function(e,t){trace("STORIFY error"),trace("STORIFY ERROR: "+t+" "+e.responseText)}).success(function(){clearTimeout(a)})},buildData:function(e){VMM.fireEvent(global,VMM.Timeline.Config.events.messege,"Parsing Data");var t=VMM.Timeline.DataObj.data_template_obj;t.timeline.startDate=new Date(e.content.date.created),t.timeline.headline=e.content.title,trace(e);var i="",a=e.content.author.username,n="";e.content.author.name!==void 0&&(a=e.content.author.name,n=e.content.author.username+"&nbsp;"),e.content.description!==void 0&&null!=e.content.description&&(i+=e.content.description),i+="<div class='storify'>",i+="<div class='vcard author'><a class='screen-name url' href='"+e.content.author.permalink+"' target='_blank'>",i+="<span class='avatar'><img src='"+e.content.author.avatar+"' style='max-width: 32px; max-height: 32px;'></span>",i+="<span class='fn'>"+a+"</span>",i+="<span class='nickname'>"+n+"<span class='thumbnail-inline'></span></span>",i+="</a>",i+="</div>",i+="</div>",t.timeline.text=i,t.timeline.asset.media=e.content.thumbnail,t.timeline.type="storify";for(var r=0;e.content.elements.length>r;r++){var o=e.content.elements[r],s=!1;new Date(o.posted_at),trace(o.type);var l={type:"storify",startDate:o.posted_at,endDate:o.posted_at,headline:" ",slug:"",text:"",asset:{media:"",credit:"",caption:""}};if("image"==o.type)o.source.name!==void 0?"flickr"==o.source.name?(l.asset.media="//flickr.com/photos/"+o.meta.pathalias+"/"+o.meta.id+"/",l.asset.credit="<a href='"+l.asset.media+"'>"+o.attribution.name+"</a>",l.asset.credit+=" on <a href='"+o.source.href+"'>"+o.source.name+"</a>"):"instagram"==o.source.name?(l.asset.media=o.permalink,l.asset.credit="<a href='"+o.permalink+"'>"+o.attribution.name+"</a>",l.asset.credit+=" on <a href='"+o.source.href+"'>"+o.source.name+"</a>"):(l.asset.credit="<a href='"+o.permalink+"'>"+o.attribution.name+"</a>",o.source.href!==void 0&&(l.asset.credit+=" on <a href='"+o.source.href+"'>"+o.source.name+"</a>"),l.asset.media=o.data.image.src):(l.asset.credit="<a href='"+o.permalink+"'>"+o.attribution.name+"</a>",l.asset.media=o.data.image.src),l.slug=o.attribution.name,o.data.image.caption!==void 0&&"undefined"!=o.data.image.caption&&(l.asset.caption=o.data.image.caption,l.slug=o.data.image.caption);else if("quote"==o.type)o.permalink.match("twitter")?(l.asset.media=o.permalink,l.slug=VMM.Util.untagify(o.data.quote.text)):o.permalink.match("storify")&&(s=!0,l.asset.media="<blockquote>"+o.data.quote.text.replace(/<\s*\/?\s*b\s*.*?>/g,"")+"</blockquote>");else if("link"==o.type)l.headline=o.data.link.title,l.text=o.data.link.description,l.asset.media="undefined"!=o.data.link.thumbnail&&""!=o.data.link.thumbnail?o.data.link.thumbnail:o.permalink,l.asset.caption="<a href='"+o.permalink+"' target='_blank'>"+o.data.link.title+"</a>",l.slug=o.data.link.title;else if("text"==o.type){if(o.permalink.match("storify")){s=!0,e.content.author.username,o.attribution.name!==void 0&&(a=o.attribution.name,n=o.attribution.username+"&nbsp;");var d="<div class='storify'>";d+="<blockquote><p>"+o.data.text.replace(/<\s*\/?\s*b\s*.*?>/g,"")+"</p></blockquote>",d+="<div class='vcard author'><a class='screen-name url' href='"+o.attribution.href+"' target='_blank'>",d+="<span class='avatar'><img src='"+o.attribution.thumbnail+"' style='max-width: 32px; max-height: 32px;'></span>",d+="<span class='fn'>"+a+"</span>",d+="<span class='nickname'>"+n+"<span class='thumbnail-inline'></span></span>",d+="</a></div></div>",l.text=d,r+1>=e.content.elements.length?l.startDate=e.content.elements[r-1].posted_at:"text"==e.content.elements[r+1].type&&e.content.elements[r+1].permalink.match("storify")?r+2>=e.content.elements.length?l.startDate=e.content.elements[r-1].posted_at:"text"==e.content.elements[r+2].type&&e.content.elements[r+2].permalink.match("storify")?r+3>=e.content.elements.length?l.startDate=e.content.elements[r-1].posted_at:"text"==e.content.elements[r+3].type&&e.content.elements[r+3].permalink.match("storify")?l.startDate=e.content.elements[r-1].posted_at:(trace("LEVEL 3"),l.startDate=e.content.elements[r+3].posted_at):(trace("LEVEL 2"),l.startDate=e.content.elements[r+2].posted_at):(trace("LEVEL 1"),l.startDate=e.content.elements[r+1].posted_at),l.endDate=l.startDate}}else"video"==o.type?(l.headline=o.data.video.title,l.asset.caption=o.data.video.description,l.asset.caption=o.source.username,l.asset.media=o.data.video.src):(trace("NO MATCH "),trace(o));s&&(l.slug=VMM.Util.untagify(o.data.text)),t.timeline.date.push(l)}VMM.fireEvent(global,VMM.Timeline.Config.events.data_ready,t)}},tweets:{type:"twitter",buildData:function(e){VMM.bindEvent(global,VMM.Timeline.DataObj.model.tweets.onTwitterDataReady,"TWEETSLOADED"),VMM.ExternalAPI.twitter.getTweets(e.timeline.tweets)},getData:function(e){VMM.bindEvent(global,VMM.Timeline.DataObj.model.tweets.onTwitterDataReady,"TWEETSLOADED"),VMM.ExternalAPI.twitter.getTweetSearch(e)},onTwitterDataReady:function(e,t){for(var i=VMM.Timeline.DataObj.data_template_obj,a=0;t.tweetdata.length>a;a++){var n={type:"tweets",startDate:"",headline:"",text:"",asset:{media:"",credit:"",caption:""},tags:"Optional"};n.startDate=t.tweetdata[a].raw.created_at,n.headline=type.of(t.tweetdata[a].raw.from_user_name)?t.tweetdata[a].raw.from_user_name+" (<a href='https://twitter.com/"+t.tweetdata[a].raw.from_user+"'>"+"@"+t.tweetdata[a].raw.from_user+"</a>)":t.tweetdata[a].raw.user.name+" (<a href='https://twitter.com/"+t.tweetdata[a].raw.user.screen_name+"'>"+"@"+t.tweetdata[a].raw.user.screen_name+"</a>)",n.asset.media=t.tweetdata[a].content,i.timeline.date.push(n)}VMM.fireEvent(global,VMM.Timeline.Config.events.data_ready,i)}}},data_template_obj:{timeline:{headline:"",description:"",asset:{media:"",credit:"",caption:""},date:[],era:[]}},date_obj:{startDate:"2012,2,2,11,30",headline:"",text:"",asset:{media:"http://youtu.be/vjVfu8-Wp6s",credit:"",caption:""},tags:"Optional"}}),VMM.debug=!1;